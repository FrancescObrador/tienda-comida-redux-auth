var CS=Object.defineProperty;var IS=(t,e,n)=>e in t?CS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yi=(t,e,n)=>IS(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function kS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vc={exports:{}},Ps={},Gc={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm;function TS(){if(Jm)return le;Jm=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),y=Symbol.iterator;function v(k){return k===null||typeof k!="object"?null:(k=y&&k[y]||k["@@iterator"],typeof k=="function"?k:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,A={};function x(k,b,oe){this.props=k,this.context=b,this.refs=A,this.updater=oe||C}x.prototype.isReactComponent={},x.prototype.setState=function(k,b){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,b,"setState")},x.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function O(){}O.prototype=x.prototype;function W(k,b,oe){this.props=k,this.context=b,this.refs=A,this.updater=oe||C}var L=W.prototype=new O;L.constructor=W,I(L,x.prototype),L.isPureReactComponent=!0;var B=Array.isArray,Y=Object.prototype.hasOwnProperty,J={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function ee(k,b,oe){var ce,pe={},me=null,Se=null;if(b!=null)for(ce in b.ref!==void 0&&(Se=b.ref),b.key!==void 0&&(me=""+b.key),b)Y.call(b,ce)&&!se.hasOwnProperty(ce)&&(pe[ce]=b[ce]);var ye=arguments.length-2;if(ye===1)pe.children=oe;else if(1<ye){for(var Pe=Array(ye),wt=0;wt<ye;wt++)Pe[wt]=arguments[wt+2];pe.children=Pe}if(k&&k.defaultProps)for(ce in ye=k.defaultProps,ye)pe[ce]===void 0&&(pe[ce]=ye[ce]);return{$$typeof:t,type:k,key:me,ref:Se,props:pe,_owner:J.current}}function fe(k,b){return{$$typeof:t,type:k.type,key:b,ref:k.ref,props:k.props,_owner:k._owner}}function De(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function Rt(k){var b={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(oe){return b[oe]})}var Yt=/\/+/g;function vt(k,b){return typeof k=="object"&&k!==null&&k.key!=null?Rt(""+k.key):b.toString(36)}function bt(k,b,oe,ce,pe){var me=typeof k;(me==="undefined"||me==="boolean")&&(k=null);var Se=!1;if(k===null)Se=!0;else switch(me){case"string":case"number":Se=!0;break;case"object":switch(k.$$typeof){case t:case e:Se=!0}}if(Se)return Se=k,pe=pe(Se),k=ce===""?"."+vt(Se,0):ce,B(pe)?(oe="",k!=null&&(oe=k.replace(Yt,"$&/")+"/"),bt(pe,b,oe,"",function(wt){return wt})):pe!=null&&(De(pe)&&(pe=fe(pe,oe+(!pe.key||Se&&Se.key===pe.key?"":(""+pe.key).replace(Yt,"$&/")+"/")+k)),b.push(pe)),1;if(Se=0,ce=ce===""?".":ce+":",B(k))for(var ye=0;ye<k.length;ye++){me=k[ye];var Pe=ce+vt(me,ye);Se+=bt(me,b,oe,Pe,pe)}else if(Pe=v(k),typeof Pe=="function")for(k=Pe.call(k),ye=0;!(me=k.next()).done;)me=me.value,Pe=ce+vt(me,ye++),Se+=bt(me,b,oe,Pe,pe);else if(me==="object")throw b=String(k),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return Se}function Jt(k,b,oe){if(k==null)return k;var ce=[],pe=0;return bt(k,ce,"","",function(me){return b.call(oe,me,pe++)}),ce}function ut(k){if(k._status===-1){var b=k._result;b=b(),b.then(function(oe){(k._status===0||k._status===-1)&&(k._status=1,k._result=oe)},function(oe){(k._status===0||k._status===-1)&&(k._status=2,k._result=oe)}),k._status===-1&&(k._status=0,k._result=b)}if(k._status===1)return k._result.default;throw k._result}var Le={current:null},$={transition:null},te={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:$,ReactCurrentOwner:J};function G(){throw Error("act(...) is not supported in production builds of React.")}return le.Children={map:Jt,forEach:function(k,b,oe){Jt(k,function(){b.apply(this,arguments)},oe)},count:function(k){var b=0;return Jt(k,function(){b++}),b},toArray:function(k){return Jt(k,function(b){return b})||[]},only:function(k){if(!De(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},le.Component=x,le.Fragment=n,le.Profiler=o,le.PureComponent=W,le.StrictMode=s,le.Suspense=h,le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,le.act=G,le.cloneElement=function(k,b,oe){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var ce=I({},k.props),pe=k.key,me=k.ref,Se=k._owner;if(b!=null){if(b.ref!==void 0&&(me=b.ref,Se=J.current),b.key!==void 0&&(pe=""+b.key),k.type&&k.type.defaultProps)var ye=k.type.defaultProps;for(Pe in b)Y.call(b,Pe)&&!se.hasOwnProperty(Pe)&&(ce[Pe]=b[Pe]===void 0&&ye!==void 0?ye[Pe]:b[Pe])}var Pe=arguments.length-2;if(Pe===1)ce.children=oe;else if(1<Pe){ye=Array(Pe);for(var wt=0;wt<Pe;wt++)ye[wt]=arguments[wt+2];ce.children=ye}return{$$typeof:t,type:k.type,key:pe,ref:me,props:ce,_owner:Se}},le.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:a,_context:k},k.Consumer=k},le.createElement=ee,le.createFactory=function(k){var b=ee.bind(null,k);return b.type=k,b},le.createRef=function(){return{current:null}},le.forwardRef=function(k){return{$$typeof:f,render:k}},le.isValidElement=De,le.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:ut}},le.memo=function(k,b){return{$$typeof:m,type:k,compare:b===void 0?null:b}},le.startTransition=function(k){var b=$.transition;$.transition={};try{k()}finally{$.transition=b}},le.unstable_act=G,le.useCallback=function(k,b){return Le.current.useCallback(k,b)},le.useContext=function(k){return Le.current.useContext(k)},le.useDebugValue=function(){},le.useDeferredValue=function(k){return Le.current.useDeferredValue(k)},le.useEffect=function(k,b){return Le.current.useEffect(k,b)},le.useId=function(){return Le.current.useId()},le.useImperativeHandle=function(k,b,oe){return Le.current.useImperativeHandle(k,b,oe)},le.useInsertionEffect=function(k,b){return Le.current.useInsertionEffect(k,b)},le.useLayoutEffect=function(k,b){return Le.current.useLayoutEffect(k,b)},le.useMemo=function(k,b){return Le.current.useMemo(k,b)},le.useReducer=function(k,b,oe){return Le.current.useReducer(k,b,oe)},le.useRef=function(k){return Le.current.useRef(k)},le.useState=function(k){return Le.current.useState(k)},le.useSyncExternalStore=function(k,b,oe){return Le.current.useSyncExternalStore(k,b,oe)},le.useTransition=function(){return Le.current.useTransition()},le.version="18.3.1",le}var Xm;function Pa(){return Xm||(Xm=1,Gc.exports=TS()),Gc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function RS(){if(Zm)return Ps;Zm=1;var t=Pa(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(f,h,m){var _,y={},v=null,C=null;m!==void 0&&(v=""+m),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(C=h.ref);for(_ in h)s.call(h,_)&&!a.hasOwnProperty(_)&&(y[_]=h[_]);if(f&&f.defaultProps)for(_ in h=f.defaultProps,h)y[_]===void 0&&(y[_]=h[_]);return{$$typeof:e,type:f,key:v,ref:C,props:y,_owner:o.current}}return Ps.Fragment=n,Ps.jsx=c,Ps.jsxs=c,Ps}var eg;function PS(){return eg||(eg=1,Vc.exports=RS()),Vc.exports}var j=PS(),N=Pa();const Yd=kS(N);var Ul={},Kc={exports:{}},mt={},qc={exports:{}},Qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function NS(){return tg||(tg=1,function(t){function e($,te){var G=$.length;$.push(te);e:for(;0<G;){var k=G-1>>>1,b=$[k];if(0<o(b,te))$[k]=te,$[G]=b,G=k;else break e}}function n($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var te=$[0],G=$.pop();if(G!==te){$[0]=G;e:for(var k=0,b=$.length,oe=b>>>1;k<oe;){var ce=2*(k+1)-1,pe=$[ce],me=ce+1,Se=$[me];if(0>o(pe,G))me<b&&0>o(Se,pe)?($[k]=Se,$[me]=G,k=me):($[k]=pe,$[ce]=G,k=ce);else if(me<b&&0>o(Se,G))$[k]=Se,$[me]=G,k=me;else break e}}return te}function o($,te){var G=$.sortIndex-te.sortIndex;return G!==0?G:$.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,f=c.now();t.unstable_now=function(){return c.now()-f}}var h=[],m=[],_=1,y=null,v=3,C=!1,I=!1,A=!1,x=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L($){for(var te=n(m);te!==null;){if(te.callback===null)s(m);else if(te.startTime<=$)s(m),te.sortIndex=te.expirationTime,e(h,te);else break;te=n(m)}}function B($){if(A=!1,L($),!I)if(n(h)!==null)I=!0,ut(Y);else{var te=n(m);te!==null&&Le(B,te.startTime-$)}}function Y($,te){I=!1,A&&(A=!1,O(ee),ee=-1),C=!0;var G=v;try{for(L(te),y=n(h);y!==null&&(!(y.expirationTime>te)||$&&!Rt());){var k=y.callback;if(typeof k=="function"){y.callback=null,v=y.priorityLevel;var b=k(y.expirationTime<=te);te=t.unstable_now(),typeof b=="function"?y.callback=b:y===n(h)&&s(h),L(te)}else s(h);y=n(h)}if(y!==null)var oe=!0;else{var ce=n(m);ce!==null&&Le(B,ce.startTime-te),oe=!1}return oe}finally{y=null,v=G,C=!1}}var J=!1,se=null,ee=-1,fe=5,De=-1;function Rt(){return!(t.unstable_now()-De<fe)}function Yt(){if(se!==null){var $=t.unstable_now();De=$;var te=!0;try{te=se(!0,$)}finally{te?vt():(J=!1,se=null)}}else J=!1}var vt;if(typeof W=="function")vt=function(){W(Yt)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Jt=bt.port2;bt.port1.onmessage=Yt,vt=function(){Jt.postMessage(null)}}else vt=function(){x(Yt,0)};function ut($){se=$,J||(J=!0,vt())}function Le($,te){ee=x(function(){$(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||C||(I=!0,ut(Y))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var G=v;v=te;try{return $()}finally{v=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,te){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=v;v=$;try{return te()}finally{v=G}},t.unstable_scheduleCallback=function($,te,G){var k=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?k+G:k):G=k,$){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=G+b,$={id:_++,callback:te,priorityLevel:$,startTime:G,expirationTime:b,sortIndex:-1},G>k?($.sortIndex=G,e(m,$),n(h)===null&&$===n(m)&&(A?(O(ee),ee=-1):A=!0,Le(B,G-k))):($.sortIndex=b,e(h,$),I||C||(I=!0,ut(Y))),$},t.unstable_shouldYield=Rt,t.unstable_wrapCallback=function($){var te=v;return function(){var G=v;v=te;try{return $.apply(this,arguments)}finally{v=G}}}}(Qc)),Qc}var ng;function xS(){return ng||(ng=1,qc.exports=NS()),qc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function AS(){if(rg)return mt;rg=1;var t=Pa(),e=xS();function n(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function a(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},y={};function v(r){return h.call(y,r)?!0:h.call(_,r)?!1:m.test(r)?y[r]=!0:(_[r]=!0,!1)}function C(r,i,l,u){if(l!==null&&l.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function I(r,i,l,u){if(i===null||typeof i>"u"||C(r,i,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function A(r,i,l,u,d,p,g){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=u,this.attributeNamespace=d,this.mustUseProperty=l,this.propertyName=r,this.type=i,this.sanitizeURL=p,this.removeEmptyString=g}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){x[r]=new A(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];x[i]=new A(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){x[r]=new A(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){x[r]=new A(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){x[r]=new A(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){x[r]=new A(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){x[r]=new A(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){x[r]=new A(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){x[r]=new A(r,5,!1,r.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function W(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(O,W);x[i]=new A(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(O,W);x[i]=new A(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(O,W);x[i]=new A(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){x[r]=new A(r,1,!1,r.toLowerCase(),null,!1,!1)}),x.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){x[r]=new A(r,1,!1,r.toLowerCase(),null,!0,!0)});function L(r,i,l,u){var d=x.hasOwnProperty(i)?x[i]:null;(d!==null?d.type!==0:u||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(I(i,l,d,u)&&(l=null),u||d===null?v(i)&&(l===null?r.removeAttribute(i):r.setAttribute(i,""+l)):d.mustUseProperty?r[d.propertyName]=l===null?d.type===3?!1:"":l:(i=d.attributeName,u=d.attributeNamespace,l===null?r.removeAttribute(i):(d=d.type,l=d===3||d===4&&l===!0?"":""+l,u?r.setAttributeNS(u,i,l):r.setAttribute(i,l))))}var B=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),J=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),De=Symbol.for("react.provider"),Rt=Symbol.for("react.context"),Yt=Symbol.for("react.forward_ref"),vt=Symbol.for("react.suspense"),bt=Symbol.for("react.suspense_list"),Jt=Symbol.for("react.memo"),ut=Symbol.for("react.lazy"),Le=Symbol.for("react.offscreen"),$=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=$&&r[$]||r["@@iterator"],typeof r=="function"?r:null)}var G=Object.assign,k;function b(r){if(k===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);k=i&&i[1]||""}return`
`+k+r}var oe=!1;function ce(r,i){if(!r||oe)return"";oe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(P){var u=P}Reflect.construct(r,[],i)}else{try{i.call()}catch(P){u=P}r.call(i.prototype)}else{try{throw Error()}catch(P){u=P}r()}}catch(P){if(P&&u&&typeof P.stack=="string"){for(var d=P.stack.split(`
`),p=u.stack.split(`
`),g=d.length-1,w=p.length-1;1<=g&&0<=w&&d[g]!==p[w];)w--;for(;1<=g&&0<=w;g--,w--)if(d[g]!==p[w]){if(g!==1||w!==1)do if(g--,w--,0>w||d[g]!==p[w]){var E=`
`+d[g].replace(" at new "," at ");return r.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",r.displayName)),E}while(1<=g&&0<=w);break}}}finally{oe=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?b(r):""}function pe(r){switch(r.tag){case 5:return b(r.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return r=ce(r.type,!1),r;case 11:return r=ce(r.type.render,!1),r;case 1:return r=ce(r.type,!0),r;default:return""}}function me(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case se:return"Fragment";case J:return"Portal";case fe:return"Profiler";case ee:return"StrictMode";case vt:return"Suspense";case bt:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Rt:return(r.displayName||"Context")+".Consumer";case De:return(r._context.displayName||"Context")+".Provider";case Yt:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Jt:return i=r.displayName||null,i!==null?i:me(r.type)||"Memo";case ut:i=r._payload,r=r._init;try{return me(r(i))}catch{}}return null}function Se(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(i);case 8:return i===ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ye(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Pe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function wt(r){var i=Pe(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),u=""+r[i];if(!r.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,p=l.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(g){u=""+g,p.call(this,g)}}),Object.defineProperty(r,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(g){u=""+g},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Po(r){r._valueTracker||(r._valueTracker=wt(r))}function rh(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return r&&(u=Pe(r)?r.checked?"true":"false":r.value),r=u,r!==l?(i.setValue(r),!0):!1}function No(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Xa(r,i){var l=i.checked;return G({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function ih(r,i){var l=i.defaultValue==null?"":i.defaultValue,u=i.checked!=null?i.checked:i.defaultChecked;l=ye(i.value!=null?i.value:l),r._wrapperState={initialChecked:u,initialValue:l,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function sh(r,i){i=i.checked,i!=null&&L(r,"checked",i,!1)}function Za(r,i){sh(r,i);var l=ye(i.value),u=i.type;if(l!=null)u==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(u==="submit"||u==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?eu(r,i.type,l):i.hasOwnProperty("defaultValue")&&eu(r,i.type,ye(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function oh(r,i,l){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var u=i.type;if(!(u!=="submit"&&u!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,l||i===r.value||(r.value=i),r.defaultValue=i}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function eu(r,i,l){(i!=="number"||No(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var $i=Array.isArray;function Kr(r,i,l,u){if(r=r.options,i){i={};for(var d=0;d<l.length;d++)i["$"+l[d]]=!0;for(l=0;l<r.length;l++)d=i.hasOwnProperty("$"+r[l].value),r[l].selected!==d&&(r[l].selected=d),d&&u&&(r[l].defaultSelected=!0)}else{for(l=""+ye(l),i=null,d=0;d<r.length;d++){if(r[d].value===l){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function tu(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lh(r,i){var l=i.value;if(l==null){if(l=i.children,i=i.defaultValue,l!=null){if(i!=null)throw Error(n(92));if($i(l)){if(1<l.length)throw Error(n(93));l=l[0]}i=l}i==null&&(i=""),l=i}r._wrapperState={initialValue:ye(l)}}function ah(r,i){var l=ye(i.value),u=ye(i.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),i.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),u!=null&&(r.defaultValue=""+u)}function uh(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function ch(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nu(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?ch(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var xo,dh=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,l,u,d){MSApp.execUnsafeLocalFunction(function(){return r(i,l,u,d)})}:r}(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(xo=xo||document.createElement("div"),xo.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=xo.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Hi(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pw=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(r){Pw.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Vi[i]=Vi[r]})});function fh(r,i,l){return i==null||typeof i=="boolean"||i===""?"":l||typeof i!="number"||i===0||Vi.hasOwnProperty(r)&&Vi[r]?(""+i).trim():i+"px"}function hh(r,i){r=r.style;for(var l in i)if(i.hasOwnProperty(l)){var u=l.indexOf("--")===0,d=fh(l,i[l],u);l==="float"&&(l="cssFloat"),u?r.setProperty(l,d):r[l]=d}}var Nw=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ru(r,i){if(i){if(Nw[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(n(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(n(61))}if(i.style!=null&&typeof i.style!="object")throw Error(n(62))}}function iu(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var su=null;function ou(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var lu=null,qr=null,Qr=null;function ph(r){if(r=hs(r)){if(typeof lu!="function")throw Error(n(280));var i=r.stateNode;i&&(i=Zo(i),lu(r.stateNode,r.type,i))}}function mh(r){qr?Qr?Qr.push(r):Qr=[r]:qr=r}function gh(){if(qr){var r=qr,i=Qr;if(Qr=qr=null,ph(r),i)for(r=0;r<i.length;r++)ph(i[r])}}function _h(r,i){return r(i)}function yh(){}var au=!1;function vh(r,i,l){if(au)return r(i,l);au=!0;try{return _h(r,i,l)}finally{au=!1,(qr!==null||Qr!==null)&&(yh(),gh())}}function Gi(r,i){var l=r.stateNode;if(l===null)return null;var u=Zo(l);if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(n(231,i,typeof l));return l}var uu=!1;if(f)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){uu=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{uu=!1}function xw(r,i,l,u,d,p,g,w,E){var P=Array.prototype.slice.call(arguments,3);try{i.apply(l,P)}catch(M){this.onError(M)}}var qi=!1,Ao=null,Oo=!1,cu=null,Aw={onError:function(r){qi=!0,Ao=r}};function Ow(r,i,l,u,d,p,g,w,E){qi=!1,Ao=null,xw.apply(Aw,arguments)}function Dw(r,i,l,u,d,p,g,w,E){if(Ow.apply(this,arguments),qi){if(qi){var P=Ao;qi=!1,Ao=null}else throw Error(n(198));Oo||(Oo=!0,cu=P)}}function _r(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,i.flags&4098&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function wh(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Eh(r){if(_r(r)!==r)throw Error(n(188))}function Lw(r){var i=r.alternate;if(!i){if(i=_r(r),i===null)throw Error(n(188));return i!==r?null:r}for(var l=r,u=i;;){var d=l.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){l=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===l)return Eh(d),r;if(p===u)return Eh(d),i;p=p.sibling}throw Error(n(188))}if(l.return!==u.return)l=d,u=p;else{for(var g=!1,w=d.child;w;){if(w===l){g=!0,l=d,u=p;break}if(w===u){g=!0,u=d,l=p;break}w=w.sibling}if(!g){for(w=p.child;w;){if(w===l){g=!0,l=p,u=d;break}if(w===u){g=!0,u=p,l=d;break}w=w.sibling}if(!g)throw Error(n(189))}}if(l.alternate!==u)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?r:i}function Sh(r){return r=Lw(r),r!==null?Ch(r):null}function Ch(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=Ch(r);if(i!==null)return i;r=r.sibling}return null}var Ih=e.unstable_scheduleCallback,kh=e.unstable_cancelCallback,bw=e.unstable_shouldYield,Mw=e.unstable_requestPaint,Fe=e.unstable_now,Fw=e.unstable_getCurrentPriorityLevel,du=e.unstable_ImmediatePriority,Th=e.unstable_UserBlockingPriority,Do=e.unstable_NormalPriority,Uw=e.unstable_LowPriority,Rh=e.unstable_IdlePriority,Lo=null,Xt=null;function zw(r){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Lo,r,void 0,(r.current.flags&128)===128)}catch{}}var Mt=Math.clz32?Math.clz32:Bw,jw=Math.log,Ww=Math.LN2;function Bw(r){return r>>>=0,r===0?32:31-(jw(r)/Ww|0)|0}var bo=64,Mo=4194304;function Qi(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Fo(r,i){var l=r.pendingLanes;if(l===0)return 0;var u=0,d=r.suspendedLanes,p=r.pingedLanes,g=l&268435455;if(g!==0){var w=g&~d;w!==0?u=Qi(w):(p&=g,p!==0&&(u=Qi(p)))}else g=l&~d,g!==0?u=Qi(g):p!==0&&(u=Qi(p));if(u===0)return 0;if(i!==0&&i!==u&&!(i&d)&&(d=u&-u,p=i&-i,d>=p||d===16&&(p&4194240)!==0))return i;if(u&4&&(u|=l&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=u;0<i;)l=31-Mt(i),d=1<<l,u|=r[l],i&=~d;return u}function $w(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hw(r,i){for(var l=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes;0<p;){var g=31-Mt(p),w=1<<g,E=d[g];E===-1?(!(w&l)||w&u)&&(d[g]=$w(w,i)):E<=i&&(r.expiredLanes|=w),p&=~w}}function fu(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ph(){var r=bo;return bo<<=1,!(bo&4194240)&&(bo=64),r}function hu(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Yi(r,i,l){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Mt(i),r[i]=l}function Vw(r,i){var l=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var u=r.eventTimes;for(r=r.expirationTimes;0<l;){var d=31-Mt(l),p=1<<d;i[d]=0,u[d]=-1,r[d]=-1,l&=~p}}function pu(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var u=31-Mt(l),d=1<<u;d&i|r[u]&i&&(r[u]|=i),l&=~d}}var ve=0;function Nh(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var xh,mu,Ah,Oh,Dh,gu=!1,Uo=[],On=null,Dn=null,Ln=null,Ji=new Map,Xi=new Map,bn=[],Gw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lh(r,i){switch(r){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Ji.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(i.pointerId)}}function Zi(r,i,l,u,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},i!==null&&(i=hs(i),i!==null&&mu(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Kw(r,i,l,u,d){switch(i){case"focusin":return On=Zi(On,r,i,l,u,d),!0;case"dragenter":return Dn=Zi(Dn,r,i,l,u,d),!0;case"mouseover":return Ln=Zi(Ln,r,i,l,u,d),!0;case"pointerover":var p=d.pointerId;return Ji.set(p,Zi(Ji.get(p)||null,r,i,l,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Xi.set(p,Zi(Xi.get(p)||null,r,i,l,u,d)),!0}return!1}function bh(r){var i=yr(r.target);if(i!==null){var l=_r(i);if(l!==null){if(i=l.tag,i===13){if(i=wh(l),i!==null){r.blockedOn=i,Dh(r.priority,function(){Ah(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function zo(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=yu(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);su=u,l.target.dispatchEvent(u),su=null}else return i=hs(l),i!==null&&mu(i),r.blockedOn=l,!1;i.shift()}return!0}function Mh(r,i,l){zo(r)&&l.delete(i)}function qw(){gu=!1,On!==null&&zo(On)&&(On=null),Dn!==null&&zo(Dn)&&(Dn=null),Ln!==null&&zo(Ln)&&(Ln=null),Ji.forEach(Mh),Xi.forEach(Mh)}function es(r,i){r.blockedOn===i&&(r.blockedOn=null,gu||(gu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qw)))}function ts(r){function i(d){return es(d,r)}if(0<Uo.length){es(Uo[0],r);for(var l=1;l<Uo.length;l++){var u=Uo[l];u.blockedOn===r&&(u.blockedOn=null)}}for(On!==null&&es(On,r),Dn!==null&&es(Dn,r),Ln!==null&&es(Ln,r),Ji.forEach(i),Xi.forEach(i),l=0;l<bn.length;l++)u=bn[l],u.blockedOn===r&&(u.blockedOn=null);for(;0<bn.length&&(l=bn[0],l.blockedOn===null);)bh(l),l.blockedOn===null&&bn.shift()}var Yr=B.ReactCurrentBatchConfig,jo=!0;function Qw(r,i,l,u){var d=ve,p=Yr.transition;Yr.transition=null;try{ve=1,_u(r,i,l,u)}finally{ve=d,Yr.transition=p}}function Yw(r,i,l,u){var d=ve,p=Yr.transition;Yr.transition=null;try{ve=4,_u(r,i,l,u)}finally{ve=d,Yr.transition=p}}function _u(r,i,l,u){if(jo){var d=yu(r,i,l,u);if(d===null)bu(r,i,u,Wo,l),Lh(r,u);else if(Kw(d,r,i,l,u))u.stopPropagation();else if(Lh(r,u),i&4&&-1<Gw.indexOf(r)){for(;d!==null;){var p=hs(d);if(p!==null&&xh(p),p=yu(r,i,l,u),p===null&&bu(r,i,u,Wo,l),p===d)break;d=p}d!==null&&u.stopPropagation()}else bu(r,i,u,null,l)}}var Wo=null;function yu(r,i,l,u){if(Wo=null,r=ou(u),r=yr(r),r!==null)if(i=_r(r),i===null)r=null;else if(l=i.tag,l===13){if(r=wh(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Wo=r,null}function Fh(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fw()){case du:return 1;case Th:return 4;case Do:case Uw:return 16;case Rh:return 536870912;default:return 16}default:return 16}}var Mn=null,vu=null,Bo=null;function Uh(){if(Bo)return Bo;var r,i=vu,l=i.length,u,d="value"in Mn?Mn.value:Mn.textContent,p=d.length;for(r=0;r<l&&i[r]===d[r];r++);var g=l-r;for(u=1;u<=g&&i[l-u]===d[p-u];u++);return Bo=d.slice(r,1<u?1-u:void 0)}function $o(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ho(){return!0}function zh(){return!1}function Et(r){function i(l,u,d,p,g){this._reactName=l,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=g,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(l=r[w],this[w]=l?l(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ho:zh,this.isPropagationStopped=zh,this}return G(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),i}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Et(Jr),ns=G({},Jr,{view:0,detail:0}),Jw=Et(ns),Eu,Su,rs,Vo=G({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rs&&(rs&&r.type==="mousemove"?(Eu=r.screenX-rs.screenX,Su=r.screenY-rs.screenY):Su=Eu=0,rs=r),Eu)},movementY:function(r){return"movementY"in r?r.movementY:Su}}),jh=Et(Vo),Xw=G({},Vo,{dataTransfer:0}),Zw=Et(Xw),eE=G({},ns,{relatedTarget:0}),Cu=Et(eE),tE=G({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),nE=Et(tE),rE=G({},Jr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),iE=Et(rE),sE=G({},Jr,{data:0}),Wh=Et(sE),oE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uE(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=aE[r])?!!i[r]:!1}function Iu(){return uE}var cE=G({},ns,{key:function(r){if(r.key){var i=oE[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=$o(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?lE[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(r){return r.type==="keypress"?$o(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?$o(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),dE=Et(cE),fE=G({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bh=Et(fE),hE=G({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),pE=Et(hE),mE=G({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),gE=Et(mE),_E=G({},Vo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),yE=Et(_E),vE=[9,13,27,32],ku=f&&"CompositionEvent"in window,is=null;f&&"documentMode"in document&&(is=document.documentMode);var wE=f&&"TextEvent"in window&&!is,$h=f&&(!ku||is&&8<is&&11>=is),Hh=" ",Vh=!1;function Gh(r,i){switch(r){case"keyup":return vE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xr=!1;function EE(r,i){switch(r){case"compositionend":return Kh(i);case"keypress":return i.which!==32?null:(Vh=!0,Hh);case"textInput":return r=i.data,r===Hh&&Vh?null:r;default:return null}}function SE(r,i){if(Xr)return r==="compositionend"||!ku&&Gh(r,i)?(r=Uh(),Bo=vu=Mn=null,Xr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return $h&&i.locale!=="ko"?null:i.data;default:return null}}var CE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qh(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!CE[r.type]:i==="textarea"}function Qh(r,i,l,u){mh(u),i=Yo(i,"onChange"),0<i.length&&(l=new wu("onChange","change",null,l,u),r.push({event:l,listeners:i}))}var ss=null,os=null;function IE(r){hp(r,0)}function Go(r){var i=ri(r);if(rh(i))return r}function kE(r,i){if(r==="change")return i}var Yh=!1;if(f){var Tu;if(f){var Ru="oninput"in document;if(!Ru){var Jh=document.createElement("div");Jh.setAttribute("oninput","return;"),Ru=typeof Jh.oninput=="function"}Tu=Ru}else Tu=!1;Yh=Tu&&(!document.documentMode||9<document.documentMode)}function Xh(){ss&&(ss.detachEvent("onpropertychange",Zh),os=ss=null)}function Zh(r){if(r.propertyName==="value"&&Go(os)){var i=[];Qh(i,os,r,ou(r)),vh(IE,i)}}function TE(r,i,l){r==="focusin"?(Xh(),ss=i,os=l,ss.attachEvent("onpropertychange",Zh)):r==="focusout"&&Xh()}function RE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Go(os)}function PE(r,i){if(r==="click")return Go(i)}function NE(r,i){if(r==="input"||r==="change")return Go(i)}function xE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Ft=typeof Object.is=="function"?Object.is:xE;function ls(r,i){if(Ft(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var d=l[u];if(!h.call(i,d)||!Ft(r[d],i[d]))return!1}return!0}function ep(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function tp(r,i){var l=ep(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=i&&u>=i)return{node:l,offset:i-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ep(l)}}function np(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?np(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function rp(){for(var r=window,i=No();i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=No(r.document)}return i}function Pu(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function AE(r){var i=rp(),l=r.focusedElem,u=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&np(l.ownerDocument.documentElement,l)){if(u!==null&&Pu(l)){if(i=u.start,r=u.end,r===void 0&&(r=i),"selectionStart"in l)l.selectionStart=i,l.selectionEnd=Math.min(r,l.value.length);else if(r=(i=l.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=l.textContent.length,p=Math.min(u.start,d);u=u.end===void 0?p:Math.min(u.end,d),!r.extend&&p>u&&(d=u,u=p,p=d),d=tp(l,p);var g=tp(l,u);d&&g&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==g.node||r.focusOffset!==g.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),p>u?(r.addRange(i),r.extend(g.node,g.offset)):(i.setEnd(g.node,g.offset),r.addRange(i)))}}for(i=[],r=l;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<i.length;l++)r=i[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var OE=f&&"documentMode"in document&&11>=document.documentMode,Zr=null,Nu=null,as=null,xu=!1;function ip(r,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;xu||Zr==null||Zr!==No(u)||(u=Zr,"selectionStart"in u&&Pu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),as&&ls(as,u)||(as=u,u=Yo(Nu,"onSelect"),0<u.length&&(i=new wu("onSelect","select",null,i,l),r.push({event:i,listeners:u}),i.target=Zr)))}function Ko(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var ei={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},Au={},sp={};f&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function qo(r){if(Au[r])return Au[r];if(!ei[r])return r;var i=ei[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in sp)return Au[r]=i[l];return r}var op=qo("animationend"),lp=qo("animationiteration"),ap=qo("animationstart"),up=qo("transitionend"),cp=new Map,dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(r,i){cp.set(r,i),a(i,[r])}for(var Ou=0;Ou<dp.length;Ou++){var Du=dp[Ou],DE=Du.toLowerCase(),LE=Du[0].toUpperCase()+Du.slice(1);Fn(DE,"on"+LE)}Fn(op,"onAnimationEnd"),Fn(lp,"onAnimationIteration"),Fn(ap,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(up,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bE=new Set("cancel close invalid load scroll toggle".split(" ").concat(us));function fp(r,i,l){var u=r.type||"unknown-event";r.currentTarget=l,Dw(u,i,void 0,r),r.currentTarget=null}function hp(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],d=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var g=u.length-1;0<=g;g--){var w=u[g],E=w.instance,P=w.currentTarget;if(w=w.listener,E!==p&&d.isPropagationStopped())break e;fp(d,w,P),p=E}else for(g=0;g<u.length;g++){if(w=u[g],E=w.instance,P=w.currentTarget,w=w.listener,E!==p&&d.isPropagationStopped())break e;fp(d,w,P),p=E}}}if(Oo)throw r=cu,Oo=!1,cu=null,r}function ke(r,i){var l=i[Wu];l===void 0&&(l=i[Wu]=new Set);var u=r+"__bubble";l.has(u)||(pp(i,r,2,!1),l.add(u))}function Lu(r,i,l){var u=0;i&&(u|=4),pp(l,r,u,i)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function cs(r){if(!r[Qo]){r[Qo]=!0,s.forEach(function(l){l!=="selectionchange"&&(bE.has(l)||Lu(l,!1,r),Lu(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Qo]||(i[Qo]=!0,Lu("selectionchange",!1,i))}}function pp(r,i,l,u){switch(Fh(i)){case 1:var d=Qw;break;case 4:d=Yw;break;default:d=_u}l=d.bind(null,i,l,r),d=void 0,!uu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(i,l,{capture:!0,passive:d}):r.addEventListener(i,l,!0):d!==void 0?r.addEventListener(i,l,{passive:d}):r.addEventListener(i,l,!1)}function bu(r,i,l,u,d){var p=u;if(!(i&1)&&!(i&2)&&u!==null)e:for(;;){if(u===null)return;var g=u.tag;if(g===3||g===4){var w=u.stateNode.containerInfo;if(w===d||w.nodeType===8&&w.parentNode===d)break;if(g===4)for(g=u.return;g!==null;){var E=g.tag;if((E===3||E===4)&&(E=g.stateNode.containerInfo,E===d||E.nodeType===8&&E.parentNode===d))return;g=g.return}for(;w!==null;){if(g=yr(w),g===null)return;if(E=g.tag,E===5||E===6){u=p=g;continue e}w=w.parentNode}}u=u.return}vh(function(){var P=p,M=ou(l),F=[];e:{var D=cp.get(r);if(D!==void 0){var H=wu,K=r;switch(r){case"keypress":if($o(l)===0)break e;case"keydown":case"keyup":H=dE;break;case"focusin":K="focus",H=Cu;break;case"focusout":K="blur",H=Cu;break;case"beforeblur":case"afterblur":H=Cu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Zw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=pE;break;case op:case lp:case ap:H=nE;break;case up:H=gE;break;case"scroll":H=Jw;break;case"wheel":H=yE;break;case"copy":case"cut":case"paste":H=iE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Bh}var q=(i&4)!==0,Ue=!q&&r==="scroll",T=q?D!==null?D+"Capture":null:D;q=[];for(var S=P,R;S!==null;){R=S;var U=R.stateNode;if(R.tag===5&&U!==null&&(R=U,T!==null&&(U=Gi(S,T),U!=null&&q.push(ds(S,U,R)))),Ue)break;S=S.return}0<q.length&&(D=new H(D,K,null,l,M),F.push({event:D,listeners:q}))}}if(!(i&7)){e:{if(D=r==="mouseover"||r==="pointerover",H=r==="mouseout"||r==="pointerout",D&&l!==su&&(K=l.relatedTarget||l.fromElement)&&(yr(K)||K[un]))break e;if((H||D)&&(D=M.window===M?M:(D=M.ownerDocument)?D.defaultView||D.parentWindow:window,H?(K=l.relatedTarget||l.toElement,H=P,K=K?yr(K):null,K!==null&&(Ue=_r(K),K!==Ue||K.tag!==5&&K.tag!==6)&&(K=null)):(H=null,K=P),H!==K)){if(q=jh,U="onMouseLeave",T="onMouseEnter",S="mouse",(r==="pointerout"||r==="pointerover")&&(q=Bh,U="onPointerLeave",T="onPointerEnter",S="pointer"),Ue=H==null?D:ri(H),R=K==null?D:ri(K),D=new q(U,S+"leave",H,l,M),D.target=Ue,D.relatedTarget=R,U=null,yr(M)===P&&(q=new q(T,S+"enter",K,l,M),q.target=R,q.relatedTarget=Ue,U=q),Ue=U,H&&K)t:{for(q=H,T=K,S=0,R=q;R;R=ti(R))S++;for(R=0,U=T;U;U=ti(U))R++;for(;0<S-R;)q=ti(q),S--;for(;0<R-S;)T=ti(T),R--;for(;S--;){if(q===T||T!==null&&q===T.alternate)break t;q=ti(q),T=ti(T)}q=null}else q=null;H!==null&&mp(F,D,H,q,!1),K!==null&&Ue!==null&&mp(F,Ue,K,q,!0)}}e:{if(D=P?ri(P):window,H=D.nodeName&&D.nodeName.toLowerCase(),H==="select"||H==="input"&&D.type==="file")var Q=kE;else if(qh(D))if(Yh)Q=NE;else{Q=RE;var X=TE}else(H=D.nodeName)&&H.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(Q=PE);if(Q&&(Q=Q(r,P))){Qh(F,Q,l,M);break e}X&&X(r,D,P),r==="focusout"&&(X=D._wrapperState)&&X.controlled&&D.type==="number"&&eu(D,"number",D.value)}switch(X=P?ri(P):window,r){case"focusin":(qh(X)||X.contentEditable==="true")&&(Zr=X,Nu=P,as=null);break;case"focusout":as=Nu=Zr=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,ip(F,l,M);break;case"selectionchange":if(OE)break;case"keydown":case"keyup":ip(F,l,M)}var Z;if(ku)e:{switch(r){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Xr?Gh(r,l)&&(ie="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(ie="onCompositionStart");ie&&($h&&l.locale!=="ko"&&(Xr||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Xr&&(Z=Uh()):(Mn=M,vu="value"in Mn?Mn.value:Mn.textContent,Xr=!0)),X=Yo(P,ie),0<X.length&&(ie=new Wh(ie,r,null,l,M),F.push({event:ie,listeners:X}),Z?ie.data=Z:(Z=Kh(l),Z!==null&&(ie.data=Z)))),(Z=wE?EE(r,l):SE(r,l))&&(P=Yo(P,"onBeforeInput"),0<P.length&&(M=new Wh("onBeforeInput","beforeinput",null,l,M),F.push({event:M,listeners:P}),M.data=Z))}hp(F,i)})}function ds(r,i,l){return{instance:r,listener:i,currentTarget:l}}function Yo(r,i){for(var l=i+"Capture",u=[];r!==null;){var d=r,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=Gi(r,l),p!=null&&u.unshift(ds(r,p,d)),p=Gi(r,i),p!=null&&u.push(ds(r,p,d))),r=r.return}return u}function ti(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function mp(r,i,l,u,d){for(var p=i._reactName,g=[];l!==null&&l!==u;){var w=l,E=w.alternate,P=w.stateNode;if(E!==null&&E===u)break;w.tag===5&&P!==null&&(w=P,d?(E=Gi(l,p),E!=null&&g.unshift(ds(l,E,w))):d||(E=Gi(l,p),E!=null&&g.push(ds(l,E,w)))),l=l.return}g.length!==0&&r.push({event:i,listeners:g})}var ME=/\r\n?/g,FE=/\u0000|\uFFFD/g;function gp(r){return(typeof r=="string"?r:""+r).replace(ME,`
`).replace(FE,"")}function Jo(r,i,l){if(i=gp(i),gp(r)!==i&&l)throw Error(n(425))}function Xo(){}var Mu=null,Fu=null;function Uu(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var zu=typeof setTimeout=="function"?setTimeout:void 0,UE=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,zE=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(r){return _p.resolve(null).then(r).catch(jE)}:zu;function jE(r){setTimeout(function(){throw r})}function ju(r,i){var l=i,u=0;do{var d=l.nextSibling;if(r.removeChild(l),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(u===0){r.removeChild(d),ts(i);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=d}while(l);ts(i)}function Un(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function yp(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return r;i--}else l==="/$"&&i++}r=r.previousSibling}return null}var ni=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ni,fs="__reactProps$"+ni,un="__reactContainer$"+ni,Wu="__reactEvents$"+ni,WE="__reactListeners$"+ni,BE="__reactHandles$"+ni;function yr(r){var i=r[Zt];if(i)return i;for(var l=r.parentNode;l;){if(i=l[un]||l[Zt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=yp(r);r!==null;){if(l=r[Zt])return l;r=yp(r)}return i}r=l,l=r.parentNode}return null}function hs(r){return r=r[Zt]||r[un],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ri(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Zo(r){return r[fs]||null}var Bu=[],ii=-1;function zn(r){return{current:r}}function Te(r){0>ii||(r.current=Bu[ii],Bu[ii]=null,ii--)}function Ce(r,i){ii++,Bu[ii]=r.current,r.current=i}var jn={},Ze=zn(jn),ct=zn(!1),vr=jn;function si(r,i){var l=r.type.contextTypes;if(!l)return jn;var u=r.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===i)return u.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in l)d[p]=i[p];return u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function dt(r){return r=r.childContextTypes,r!=null}function el(){Te(ct),Te(Ze)}function vp(r,i,l){if(Ze.current!==jn)throw Error(n(168));Ce(Ze,i),Ce(ct,l)}function wp(r,i,l){var u=r.stateNode;if(i=i.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var d in u)if(!(d in i))throw Error(n(108,Se(r)||"Unknown",d));return G({},l,u)}function tl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||jn,vr=Ze.current,Ce(Ze,r),Ce(ct,ct.current),!0}function Ep(r,i,l){var u=r.stateNode;if(!u)throw Error(n(169));l?(r=wp(r,i,vr),u.__reactInternalMemoizedMergedChildContext=r,Te(ct),Te(Ze),Ce(Ze,r)):Te(ct),Ce(ct,l)}var cn=null,nl=!1,$u=!1;function Sp(r){cn===null?cn=[r]:cn.push(r)}function $E(r){nl=!0,Sp(r)}function Wn(){if(!$u&&cn!==null){$u=!0;var r=0,i=ve;try{var l=cn;for(ve=1;r<l.length;r++){var u=l[r];do u=u(!0);while(u!==null)}cn=null,nl=!1}catch(d){throw cn!==null&&(cn=cn.slice(r+1)),Ih(du,Wn),d}finally{ve=i,$u=!1}}return null}var oi=[],li=0,rl=null,il=0,Pt=[],Nt=0,wr=null,dn=1,fn="";function Er(r,i){oi[li++]=il,oi[li++]=rl,rl=r,il=i}function Cp(r,i,l){Pt[Nt++]=dn,Pt[Nt++]=fn,Pt[Nt++]=wr,wr=r;var u=dn;r=fn;var d=32-Mt(u)-1;u&=~(1<<d),l+=1;var p=32-Mt(i)+d;if(30<p){var g=d-d%5;p=(u&(1<<g)-1).toString(32),u>>=g,d-=g,dn=1<<32-Mt(i)+d|l<<d|u,fn=p+r}else dn=1<<p|l<<d|u,fn=r}function Hu(r){r.return!==null&&(Er(r,1),Cp(r,1,0))}function Vu(r){for(;r===rl;)rl=oi[--li],oi[li]=null,il=oi[--li],oi[li]=null;for(;r===wr;)wr=Pt[--Nt],Pt[Nt]=null,fn=Pt[--Nt],Pt[Nt]=null,dn=Pt[--Nt],Pt[Nt]=null}var St=null,Ct=null,Ne=!1,Ut=null;function Ip(r,i){var l=Dt(5,null,null,0);l.elementType="DELETED",l.stateNode=i,l.return=r,i=r.deletions,i===null?(r.deletions=[l],r.flags|=16):i.push(l)}function kp(r,i){switch(r.tag){case 5:var l=r.type;return i=i.nodeType!==1||l.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,St=r,Ct=Un(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,St=r,Ct=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(l=wr!==null?{id:dn,overflow:fn}:null,r.memoizedState={dehydrated:i,treeContext:l,retryLane:1073741824},l=Dt(18,null,null,0),l.stateNode=i,l.return=r,r.child=l,St=r,Ct=null,!0):!1;default:return!1}}function Gu(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ku(r){if(Ne){var i=Ct;if(i){var l=i;if(!kp(r,i)){if(Gu(r))throw Error(n(418));i=Un(l.nextSibling);var u=St;i&&kp(r,i)?Ip(u,l):(r.flags=r.flags&-4097|2,Ne=!1,St=r)}}else{if(Gu(r))throw Error(n(418));r.flags=r.flags&-4097|2,Ne=!1,St=r}}}function Tp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;St=r}function sl(r){if(r!==St)return!1;if(!Ne)return Tp(r),Ne=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Uu(r.type,r.memoizedProps)),i&&(i=Ct)){if(Gu(r))throw Rp(),Error(n(418));for(;i;)Ip(r,i),i=Un(i.nextSibling)}if(Tp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(i===0){Ct=Un(r.nextSibling);break e}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++}r=r.nextSibling}Ct=null}}else Ct=St?Un(r.stateNode.nextSibling):null;return!0}function Rp(){for(var r=Ct;r;)r=Un(r.nextSibling)}function ai(){Ct=St=null,Ne=!1}function qu(r){Ut===null?Ut=[r]:Ut.push(r)}var HE=B.ReactCurrentBatchConfig;function ps(r,i,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(n(309));var u=l.stateNode}if(!u)throw Error(n(147,r));var d=u,p=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(g){var w=d.refs;g===null?delete w[p]:w[p]=g},i._stringRef=p,i)}if(typeof r!="string")throw Error(n(284));if(!l._owner)throw Error(n(290,r))}return r}function ol(r,i){throw r=Object.prototype.toString.call(i),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Pp(r){var i=r._init;return i(r._payload)}function Np(r){function i(T,S){if(r){var R=T.deletions;R===null?(T.deletions=[S],T.flags|=16):R.push(S)}}function l(T,S){if(!r)return null;for(;S!==null;)i(T,S),S=S.sibling;return null}function u(T,S){for(T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function d(T,S){return T=Qn(T,S),T.index=0,T.sibling=null,T}function p(T,S,R){return T.index=R,r?(R=T.alternate,R!==null?(R=R.index,R<S?(T.flags|=2,S):R):(T.flags|=2,S)):(T.flags|=1048576,S)}function g(T){return r&&T.alternate===null&&(T.flags|=2),T}function w(T,S,R,U){return S===null||S.tag!==6?(S=zc(R,T.mode,U),S.return=T,S):(S=d(S,R),S.return=T,S)}function E(T,S,R,U){var Q=R.type;return Q===se?M(T,S,R.props.children,U,R.key):S!==null&&(S.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ut&&Pp(Q)===S.type)?(U=d(S,R.props),U.ref=ps(T,S,R),U.return=T,U):(U=xl(R.type,R.key,R.props,null,T.mode,U),U.ref=ps(T,S,R),U.return=T,U)}function P(T,S,R,U){return S===null||S.tag!==4||S.stateNode.containerInfo!==R.containerInfo||S.stateNode.implementation!==R.implementation?(S=jc(R,T.mode,U),S.return=T,S):(S=d(S,R.children||[]),S.return=T,S)}function M(T,S,R,U,Q){return S===null||S.tag!==7?(S=Nr(R,T.mode,U,Q),S.return=T,S):(S=d(S,R),S.return=T,S)}function F(T,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return S=zc(""+S,T.mode,R),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Y:return R=xl(S.type,S.key,S.props,null,T.mode,R),R.ref=ps(T,null,S),R.return=T,R;case J:return S=jc(S,T.mode,R),S.return=T,S;case ut:var U=S._init;return F(T,U(S._payload),R)}if($i(S)||te(S))return S=Nr(S,T.mode,R,null),S.return=T,S;ol(T,S)}return null}function D(T,S,R,U){var Q=S!==null?S.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Q!==null?null:w(T,S,""+R,U);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Y:return R.key===Q?E(T,S,R,U):null;case J:return R.key===Q?P(T,S,R,U):null;case ut:return Q=R._init,D(T,S,Q(R._payload),U)}if($i(R)||te(R))return Q!==null?null:M(T,S,R,U,null);ol(T,R)}return null}function H(T,S,R,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number")return T=T.get(R)||null,w(S,T,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Y:return T=T.get(U.key===null?R:U.key)||null,E(S,T,U,Q);case J:return T=T.get(U.key===null?R:U.key)||null,P(S,T,U,Q);case ut:var X=U._init;return H(T,S,R,X(U._payload),Q)}if($i(U)||te(U))return T=T.get(R)||null,M(S,T,U,Q,null);ol(S,U)}return null}function K(T,S,R,U){for(var Q=null,X=null,Z=S,ie=S=0,Ge=null;Z!==null&&ie<R.length;ie++){Z.index>ie?(Ge=Z,Z=null):Ge=Z.sibling;var ge=D(T,Z,R[ie],U);if(ge===null){Z===null&&(Z=Ge);break}r&&Z&&ge.alternate===null&&i(T,Z),S=p(ge,S,ie),X===null?Q=ge:X.sibling=ge,X=ge,Z=Ge}if(ie===R.length)return l(T,Z),Ne&&Er(T,ie),Q;if(Z===null){for(;ie<R.length;ie++)Z=F(T,R[ie],U),Z!==null&&(S=p(Z,S,ie),X===null?Q=Z:X.sibling=Z,X=Z);return Ne&&Er(T,ie),Q}for(Z=u(T,Z);ie<R.length;ie++)Ge=H(Z,T,ie,R[ie],U),Ge!==null&&(r&&Ge.alternate!==null&&Z.delete(Ge.key===null?ie:Ge.key),S=p(Ge,S,ie),X===null?Q=Ge:X.sibling=Ge,X=Ge);return r&&Z.forEach(function(Yn){return i(T,Yn)}),Ne&&Er(T,ie),Q}function q(T,S,R,U){var Q=te(R);if(typeof Q!="function")throw Error(n(150));if(R=Q.call(R),R==null)throw Error(n(151));for(var X=Q=null,Z=S,ie=S=0,Ge=null,ge=R.next();Z!==null&&!ge.done;ie++,ge=R.next()){Z.index>ie?(Ge=Z,Z=null):Ge=Z.sibling;var Yn=D(T,Z,ge.value,U);if(Yn===null){Z===null&&(Z=Ge);break}r&&Z&&Yn.alternate===null&&i(T,Z),S=p(Yn,S,ie),X===null?Q=Yn:X.sibling=Yn,X=Yn,Z=Ge}if(ge.done)return l(T,Z),Ne&&Er(T,ie),Q;if(Z===null){for(;!ge.done;ie++,ge=R.next())ge=F(T,ge.value,U),ge!==null&&(S=p(ge,S,ie),X===null?Q=ge:X.sibling=ge,X=ge);return Ne&&Er(T,ie),Q}for(Z=u(T,Z);!ge.done;ie++,ge=R.next())ge=H(Z,T,ie,ge.value,U),ge!==null&&(r&&ge.alternate!==null&&Z.delete(ge.key===null?ie:ge.key),S=p(ge,S,ie),X===null?Q=ge:X.sibling=ge,X=ge);return r&&Z.forEach(function(SS){return i(T,SS)}),Ne&&Er(T,ie),Q}function Ue(T,S,R,U){if(typeof R=="object"&&R!==null&&R.type===se&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Y:e:{for(var Q=R.key,X=S;X!==null;){if(X.key===Q){if(Q=R.type,Q===se){if(X.tag===7){l(T,X.sibling),S=d(X,R.props.children),S.return=T,T=S;break e}}else if(X.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===ut&&Pp(Q)===X.type){l(T,X.sibling),S=d(X,R.props),S.ref=ps(T,X,R),S.return=T,T=S;break e}l(T,X);break}else i(T,X);X=X.sibling}R.type===se?(S=Nr(R.props.children,T.mode,U,R.key),S.return=T,T=S):(U=xl(R.type,R.key,R.props,null,T.mode,U),U.ref=ps(T,S,R),U.return=T,T=U)}return g(T);case J:e:{for(X=R.key;S!==null;){if(S.key===X)if(S.tag===4&&S.stateNode.containerInfo===R.containerInfo&&S.stateNode.implementation===R.implementation){l(T,S.sibling),S=d(S,R.children||[]),S.return=T,T=S;break e}else{l(T,S);break}else i(T,S);S=S.sibling}S=jc(R,T.mode,U),S.return=T,T=S}return g(T);case ut:return X=R._init,Ue(T,S,X(R._payload),U)}if($i(R))return K(T,S,R,U);if(te(R))return q(T,S,R,U);ol(T,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,S!==null&&S.tag===6?(l(T,S.sibling),S=d(S,R),S.return=T,T=S):(l(T,S),S=zc(R,T.mode,U),S.return=T,T=S),g(T)):l(T,S)}return Ue}var ui=Np(!0),xp=Np(!1),ll=zn(null),al=null,ci=null,Qu=null;function Yu(){Qu=ci=al=null}function Ju(r){var i=ll.current;Te(ll),r._currentValue=i}function Xu(r,i,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===l)break;r=r.return}}function di(r,i){al=r,Qu=ci=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&i&&(ft=!0),r.firstContext=null)}function xt(r){var i=r._currentValue;if(Qu!==r)if(r={context:r,memoizedValue:i,next:null},ci===null){if(al===null)throw Error(n(308));ci=r,al.dependencies={lanes:0,firstContext:r}}else ci=ci.next=r;return i}var Sr=null;function Zu(r){Sr===null?Sr=[r]:Sr.push(r)}function Ap(r,i,l,u){var d=i.interleaved;return d===null?(l.next=l,Zu(i)):(l.next=d.next,d.next=l),i.interleaved=l,hn(r,u)}function hn(r,i){r.lanes|=i;var l=r.alternate;for(l!==null&&(l.lanes|=i),l=r,r=r.return;r!==null;)r.childLanes|=i,l=r.alternate,l!==null&&(l.childLanes|=i),l=r,r=r.return;return l.tag===3?l.stateNode:null}var Bn=!1;function ec(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Op(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function pn(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function $n(r,i,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,he&2){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,hn(r,l)}return d=u.interleaved,d===null?(i.next=i,Zu(u)):(i.next=d.next,d.next=i),u.interleaved=i,hn(r,l)}function ul(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194240)!==0)){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,pu(r,l)}}function Dp(r,i){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var d=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var g={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};p===null?d=p=g:p=p.next=g,l=l.next}while(l!==null);p===null?d=p=i:p=p.next=i}else d=p=i;l={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,effects:u.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}function cl(r,i,l,u){var d=r.updateQueue;Bn=!1;var p=d.firstBaseUpdate,g=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var E=w,P=E.next;E.next=null,g===null?p=P:g.next=P,g=E;var M=r.alternate;M!==null&&(M=M.updateQueue,w=M.lastBaseUpdate,w!==g&&(w===null?M.firstBaseUpdate=P:w.next=P,M.lastBaseUpdate=E))}if(p!==null){var F=d.baseState;g=0,M=P=E=null,w=p;do{var D=w.lane,H=w.eventTime;if((u&D)===D){M!==null&&(M=M.next={eventTime:H,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var K=r,q=w;switch(D=i,H=l,q.tag){case 1:if(K=q.payload,typeof K=="function"){F=K.call(H,F,D);break e}F=K;break e;case 3:K.flags=K.flags&-65537|128;case 0:if(K=q.payload,D=typeof K=="function"?K.call(H,F,D):K,D==null)break e;F=G({},F,D);break e;case 2:Bn=!0}}w.callback!==null&&w.lane!==0&&(r.flags|=64,D=d.effects,D===null?d.effects=[w]:D.push(w))}else H={eventTime:H,lane:D,tag:w.tag,payload:w.payload,callback:w.callback,next:null},M===null?(P=M=H,E=F):M=M.next=H,g|=D;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;D=w,w=D.next,D.next=null,d.lastBaseUpdate=D,d.shared.pending=null}}while(!0);if(M===null&&(E=F),d.baseState=E,d.firstBaseUpdate=P,d.lastBaseUpdate=M,i=d.shared.interleaved,i!==null){d=i;do g|=d.lane,d=d.next;while(d!==i)}else p===null&&(d.shared.lanes=0);kr|=g,r.lanes=g,r.memoizedState=F}}function Lp(r,i,l){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var u=r[i],d=u.callback;if(d!==null){if(u.callback=null,u=l,typeof d!="function")throw Error(n(191,d));d.call(u)}}}var ms={},en=zn(ms),gs=zn(ms),_s=zn(ms);function Cr(r){if(r===ms)throw Error(n(174));return r}function tc(r,i){switch(Ce(_s,i),Ce(gs,r),Ce(en,ms),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:nu(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=nu(i,r)}Te(en),Ce(en,i)}function fi(){Te(en),Te(gs),Te(_s)}function bp(r){Cr(_s.current);var i=Cr(en.current),l=nu(i,r.type);i!==l&&(Ce(gs,r),Ce(en,l))}function nc(r){gs.current===r&&(Te(en),Te(gs))}var Ae=zn(0);function dl(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var rc=[];function ic(){for(var r=0;r<rc.length;r++)rc[r]._workInProgressVersionPrimary=null;rc.length=0}var fl=B.ReactCurrentDispatcher,sc=B.ReactCurrentBatchConfig,Ir=0,Oe=null,je=null,He=null,hl=!1,ys=!1,vs=0,VE=0;function et(){throw Error(n(321))}function oc(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!Ft(r[l],i[l]))return!1;return!0}function lc(r,i,l,u,d,p){if(Ir=p,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,fl.current=r===null||r.memoizedState===null?QE:YE,r=l(u,d),ys){p=0;do{if(ys=!1,vs=0,25<=p)throw Error(n(301));p+=1,He=je=null,i.updateQueue=null,fl.current=JE,r=l(u,d)}while(ys)}if(fl.current=gl,i=je!==null&&je.next!==null,Ir=0,He=je=Oe=null,hl=!1,i)throw Error(n(300));return r}function ac(){var r=vs!==0;return vs=0,r}function tn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Oe.memoizedState=He=r:He=He.next=r,He}function At(){if(je===null){var r=Oe.alternate;r=r!==null?r.memoizedState:null}else r=je.next;var i=He===null?Oe.memoizedState:He.next;if(i!==null)He=i,je=r;else{if(r===null)throw Error(n(310));je=r,r={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},He===null?Oe.memoizedState=He=r:He=He.next=r}return He}function ws(r,i){return typeof i=="function"?i(r):i}function uc(r){var i=At(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var u=je,d=u.baseQueue,p=l.pending;if(p!==null){if(d!==null){var g=d.next;d.next=p.next,p.next=g}u.baseQueue=d=p,l.pending=null}if(d!==null){p=d.next,u=u.baseState;var w=g=null,E=null,P=p;do{var M=P.lane;if((Ir&M)===M)E!==null&&(E=E.next={lane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),u=P.hasEagerState?P.eagerState:r(u,P.action);else{var F={lane:M,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null};E===null?(w=E=F,g=u):E=E.next=F,Oe.lanes|=M,kr|=M}P=P.next}while(P!==null&&P!==p);E===null?g=u:E.next=w,Ft(u,i.memoizedState)||(ft=!0),i.memoizedState=u,i.baseState=g,i.baseQueue=E,l.lastRenderedState=u}if(r=l.interleaved,r!==null){d=r;do p=d.lane,Oe.lanes|=p,kr|=p,d=d.next;while(d!==r)}else d===null&&(l.lanes=0);return[i.memoizedState,l.dispatch]}function cc(r){var i=At(),l=i.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=r;var u=l.dispatch,d=l.pending,p=i.memoizedState;if(d!==null){l.pending=null;var g=d=d.next;do p=r(p,g.action),g=g.next;while(g!==d);Ft(p,i.memoizedState)||(ft=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),l.lastRenderedState=p}return[p,u]}function Mp(){}function Fp(r,i){var l=Oe,u=At(),d=i(),p=!Ft(u.memoizedState,d);if(p&&(u.memoizedState=d,ft=!0),u=u.queue,dc(jp.bind(null,l,u,r),[r]),u.getSnapshot!==i||p||He!==null&&He.memoizedState.tag&1){if(l.flags|=2048,Es(9,zp.bind(null,l,u,d,i),void 0,null),Ve===null)throw Error(n(349));Ir&30||Up(l,i,d)}return d}function Up(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Oe.updateQueue,i===null?(i={lastEffect:null,stores:null},Oe.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function zp(r,i,l,u){i.value=l,i.getSnapshot=u,Wp(i)&&Bp(r)}function jp(r,i,l){return l(function(){Wp(i)&&Bp(r)})}function Wp(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!Ft(r,l)}catch{return!0}}function Bp(r){var i=hn(r,1);i!==null&&Bt(i,r,1,-1)}function $p(r){var i=tn();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:r},i.queue=r,r=r.dispatch=qE.bind(null,Oe,r),[i.memoizedState,r]}function Es(r,i,l,u){return r={tag:r,create:i,destroy:l,deps:u,next:null},i=Oe.updateQueue,i===null?(i={lastEffect:null,stores:null},Oe.updateQueue=i,i.lastEffect=r.next=r):(l=i.lastEffect,l===null?i.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,i.lastEffect=r)),r}function Hp(){return At().memoizedState}function pl(r,i,l,u){var d=tn();Oe.flags|=r,d.memoizedState=Es(1|i,l,void 0,u===void 0?null:u)}function ml(r,i,l,u){var d=At();u=u===void 0?null:u;var p=void 0;if(je!==null){var g=je.memoizedState;if(p=g.destroy,u!==null&&oc(u,g.deps)){d.memoizedState=Es(i,l,p,u);return}}Oe.flags|=r,d.memoizedState=Es(1|i,l,p,u)}function Vp(r,i){return pl(8390656,8,r,i)}function dc(r,i){return ml(2048,8,r,i)}function Gp(r,i){return ml(4,2,r,i)}function Kp(r,i){return ml(4,4,r,i)}function qp(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Qp(r,i,l){return l=l!=null?l.concat([r]):null,ml(4,4,qp.bind(null,i,r),l)}function fc(){}function Yp(r,i){var l=At();i=i===void 0?null:i;var u=l.memoizedState;return u!==null&&i!==null&&oc(i,u[1])?u[0]:(l.memoizedState=[r,i],r)}function Jp(r,i){var l=At();i=i===void 0?null:i;var u=l.memoizedState;return u!==null&&i!==null&&oc(i,u[1])?u[0]:(r=r(),l.memoizedState=[r,i],r)}function Xp(r,i,l){return Ir&21?(Ft(l,i)||(l=Ph(),Oe.lanes|=l,kr|=l,r.baseState=!0),i):(r.baseState&&(r.baseState=!1,ft=!0),r.memoizedState=l)}function GE(r,i){var l=ve;ve=l!==0&&4>l?l:4,r(!0);var u=sc.transition;sc.transition={};try{r(!1),i()}finally{ve=l,sc.transition=u}}function Zp(){return At().memoizedState}function KE(r,i,l){var u=Kn(r);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},em(r))tm(i,l);else if(l=Ap(r,i,l,u),l!==null){var d=ot();Bt(l,r,u,d),nm(l,i,u)}}function qE(r,i,l){var u=Kn(r),d={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(em(r))tm(i,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var g=i.lastRenderedState,w=p(g,l);if(d.hasEagerState=!0,d.eagerState=w,Ft(w,g)){var E=i.interleaved;E===null?(d.next=d,Zu(i)):(d.next=E.next,E.next=d),i.interleaved=d;return}}catch{}finally{}l=Ap(r,i,d,u),l!==null&&(d=ot(),Bt(l,r,u,d),nm(l,i,u))}}function em(r){var i=r.alternate;return r===Oe||i!==null&&i===Oe}function tm(r,i){ys=hl=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function nm(r,i,l){if(l&4194240){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,pu(r,l)}}var gl={readContext:xt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},QE={readContext:xt,useCallback:function(r,i){return tn().memoizedState=[r,i===void 0?null:i],r},useContext:xt,useEffect:Vp,useImperativeHandle:function(r,i,l){return l=l!=null?l.concat([r]):null,pl(4194308,4,qp.bind(null,i,r),l)},useLayoutEffect:function(r,i){return pl(4194308,4,r,i)},useInsertionEffect:function(r,i){return pl(4,2,r,i)},useMemo:function(r,i){var l=tn();return i=i===void 0?null:i,r=r(),l.memoizedState=[r,i],r},useReducer:function(r,i,l){var u=tn();return i=l!==void 0?l(i):i,u.memoizedState=u.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},u.queue=r,r=r.dispatch=KE.bind(null,Oe,r),[u.memoizedState,r]},useRef:function(r){var i=tn();return r={current:r},i.memoizedState=r},useState:$p,useDebugValue:fc,useDeferredValue:function(r){return tn().memoizedState=r},useTransition:function(){var r=$p(!1),i=r[0];return r=GE.bind(null,r[1]),tn().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,l){var u=Oe,d=tn();if(Ne){if(l===void 0)throw Error(n(407));l=l()}else{if(l=i(),Ve===null)throw Error(n(349));Ir&30||Up(u,i,l)}d.memoizedState=l;var p={value:l,getSnapshot:i};return d.queue=p,Vp(jp.bind(null,u,p,r),[r]),u.flags|=2048,Es(9,zp.bind(null,u,p,l,i),void 0,null),l},useId:function(){var r=tn(),i=Ve.identifierPrefix;if(Ne){var l=fn,u=dn;l=(u&~(1<<32-Mt(u)-1)).toString(32)+l,i=":"+i+"R"+l,l=vs++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=VE++,i=":"+i+"r"+l.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},YE={readContext:xt,useCallback:Yp,useContext:xt,useEffect:dc,useImperativeHandle:Qp,useInsertionEffect:Gp,useLayoutEffect:Kp,useMemo:Jp,useReducer:uc,useRef:Hp,useState:function(){return uc(ws)},useDebugValue:fc,useDeferredValue:function(r){var i=At();return Xp(i,je.memoizedState,r)},useTransition:function(){var r=uc(ws)[0],i=At().memoizedState;return[r,i]},useMutableSource:Mp,useSyncExternalStore:Fp,useId:Zp,unstable_isNewReconciler:!1},JE={readContext:xt,useCallback:Yp,useContext:xt,useEffect:dc,useImperativeHandle:Qp,useInsertionEffect:Gp,useLayoutEffect:Kp,useMemo:Jp,useReducer:cc,useRef:Hp,useState:function(){return cc(ws)},useDebugValue:fc,useDeferredValue:function(r){var i=At();return je===null?i.memoizedState=r:Xp(i,je.memoizedState,r)},useTransition:function(){var r=cc(ws)[0],i=At().memoizedState;return[r,i]},useMutableSource:Mp,useSyncExternalStore:Fp,useId:Zp,unstable_isNewReconciler:!1};function zt(r,i){if(r&&r.defaultProps){i=G({},i),r=r.defaultProps;for(var l in r)i[l]===void 0&&(i[l]=r[l]);return i}return i}function hc(r,i,l,u){i=r.memoizedState,l=l(u,i),l=l==null?i:G({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var _l={isMounted:function(r){return(r=r._reactInternals)?_r(r)===r:!1},enqueueSetState:function(r,i,l){r=r._reactInternals;var u=ot(),d=Kn(r),p=pn(u,d);p.payload=i,l!=null&&(p.callback=l),i=$n(r,p,d),i!==null&&(Bt(i,r,d,u),ul(i,r,d))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var u=ot(),d=Kn(r),p=pn(u,d);p.tag=1,p.payload=i,l!=null&&(p.callback=l),i=$n(r,p,d),i!==null&&(Bt(i,r,d,u),ul(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=ot(),u=Kn(r),d=pn(l,u);d.tag=2,i!=null&&(d.callback=i),i=$n(r,d,u),i!==null&&(Bt(i,r,u,l),ul(i,r,u))}};function rm(r,i,l,u,d,p,g){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,g):i.prototype&&i.prototype.isPureReactComponent?!ls(l,u)||!ls(d,p):!0}function im(r,i,l){var u=!1,d=jn,p=i.contextType;return typeof p=="object"&&p!==null?p=xt(p):(d=dt(i)?vr:Ze.current,u=i.contextTypes,p=(u=u!=null)?si(r,d):jn),i=new i(l,p),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=_l,r.stateNode=i,i._reactInternals=r,u&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=p),i}function sm(r,i,l,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==r&&_l.enqueueReplaceState(i,i.state,null)}function pc(r,i,l,u){var d=r.stateNode;d.props=l,d.state=r.memoizedState,d.refs={},ec(r);var p=i.contextType;typeof p=="object"&&p!==null?d.context=xt(p):(p=dt(i)?vr:Ze.current,d.context=si(r,p)),d.state=r.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(hc(r,i,p,l),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&_l.enqueueReplaceState(d,d.state,null),cl(r,l,d,u),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function hi(r,i){try{var l="",u=i;do l+=pe(u),u=u.return;while(u);var d=l}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:i,stack:d,digest:null}}function mc(r,i,l){return{value:r,source:null,stack:l??null,digest:i??null}}function gc(r,i){try{console.error(i.value)}catch(l){setTimeout(function(){throw l})}}var XE=typeof WeakMap=="function"?WeakMap:Map;function om(r,i,l){l=pn(-1,l),l.tag=3,l.payload={element:null};var u=i.value;return l.callback=function(){Il||(Il=!0,Ac=u),gc(r,i)},l}function lm(r,i,l){l=pn(-1,l),l.tag=3;var u=r.type.getDerivedStateFromError;if(typeof u=="function"){var d=i.value;l.payload=function(){return u(d)},l.callback=function(){gc(r,i)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(l.callback=function(){gc(r,i),typeof u!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var g=i.stack;this.componentDidCatch(i.value,{componentStack:g!==null?g:""})}),l}function am(r,i,l){var u=r.pingCache;if(u===null){u=r.pingCache=new XE;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(l)||(d.add(l),r=fS.bind(null,r,i,l),i.then(r,r))}function um(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function cm(r,i,l,u,d){return r.mode&1?(r.flags|=65536,r.lanes=d,r):(r===i?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(i=pn(-1,1),i.tag=2,$n(l,i,1))),l.lanes|=1),r)}var ZE=B.ReactCurrentOwner,ft=!1;function st(r,i,l,u){i.child=r===null?xp(i,null,l,u):ui(i,r.child,l,u)}function dm(r,i,l,u,d){l=l.render;var p=i.ref;return di(i,d),u=lc(r,i,l,u,p,d),l=ac(),r!==null&&!ft?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,mn(r,i,d)):(Ne&&l&&Hu(i),i.flags|=1,st(r,i,u,d),i.child)}function fm(r,i,l,u,d){if(r===null){var p=l.type;return typeof p=="function"&&!Uc(p)&&p.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(i.tag=15,i.type=p,hm(r,i,p,u,d)):(r=xl(l.type,null,u,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,!(r.lanes&d)){var g=p.memoizedProps;if(l=l.compare,l=l!==null?l:ls,l(g,u)&&r.ref===i.ref)return mn(r,i,d)}return i.flags|=1,r=Qn(p,u),r.ref=i.ref,r.return=i,i.child=r}function hm(r,i,l,u,d){if(r!==null){var p=r.memoizedProps;if(ls(p,u)&&r.ref===i.ref)if(ft=!1,i.pendingProps=u=p,(r.lanes&d)!==0)r.flags&131072&&(ft=!0);else return i.lanes=r.lanes,mn(r,i,d)}return _c(r,i,l,u,d)}function pm(r,i,l){var u=i.pendingProps,d=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(mi,It),It|=l;else{if(!(l&1073741824))return r=p!==null?p.baseLanes|l:l,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Ce(mi,It),It|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:l,Ce(mi,It),It|=u}else p!==null?(u=p.baseLanes|l,i.memoizedState=null):u=l,Ce(mi,It),It|=u;return st(r,i,d,l),i.child}function mm(r,i){var l=i.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(i.flags|=512,i.flags|=2097152)}function _c(r,i,l,u,d){var p=dt(l)?vr:Ze.current;return p=si(i,p),di(i,d),l=lc(r,i,l,u,p,d),u=ac(),r!==null&&!ft?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,mn(r,i,d)):(Ne&&u&&Hu(i),i.flags|=1,st(r,i,l,d),i.child)}function gm(r,i,l,u,d){if(dt(l)){var p=!0;tl(i)}else p=!1;if(di(i,d),i.stateNode===null)vl(r,i),im(i,l,u),pc(i,l,u,d),u=!0;else if(r===null){var g=i.stateNode,w=i.memoizedProps;g.props=w;var E=g.context,P=l.contextType;typeof P=="object"&&P!==null?P=xt(P):(P=dt(l)?vr:Ze.current,P=si(i,P));var M=l.getDerivedStateFromProps,F=typeof M=="function"||typeof g.getSnapshotBeforeUpdate=="function";F||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==u||E!==P)&&sm(i,g,u,P),Bn=!1;var D=i.memoizedState;g.state=D,cl(i,u,g,d),E=i.memoizedState,w!==u||D!==E||ct.current||Bn?(typeof M=="function"&&(hc(i,l,M,u),E=i.memoizedState),(w=Bn||rm(i,l,w,u,D,E,P))?(F||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=E),g.props=u,g.state=E,g.context=P,u=w):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Op(r,i),w=i.memoizedProps,P=i.type===i.elementType?w:zt(i.type,w),g.props=P,F=i.pendingProps,D=g.context,E=l.contextType,typeof E=="object"&&E!==null?E=xt(E):(E=dt(l)?vr:Ze.current,E=si(i,E));var H=l.getDerivedStateFromProps;(M=typeof H=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==F||D!==E)&&sm(i,g,u,E),Bn=!1,D=i.memoizedState,g.state=D,cl(i,u,g,d);var K=i.memoizedState;w!==F||D!==K||ct.current||Bn?(typeof H=="function"&&(hc(i,l,H,u),K=i.memoizedState),(P=Bn||rm(i,l,P,u,D,K,E)||!1)?(M||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,K,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,K,E)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&D===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&D===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=K),g.props=u,g.state=K,g.context=E,u=P):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&D===r.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&D===r.memoizedState||(i.flags|=1024),u=!1)}return yc(r,i,l,u,p,d)}function yc(r,i,l,u,d,p){mm(r,i);var g=(i.flags&128)!==0;if(!u&&!g)return d&&Ep(i,l,!1),mn(r,i,p);u=i.stateNode,ZE.current=i;var w=g&&typeof l.getDerivedStateFromError!="function"?null:u.render();return i.flags|=1,r!==null&&g?(i.child=ui(i,r.child,null,p),i.child=ui(i,null,w,p)):st(r,i,w,p),i.memoizedState=u.state,d&&Ep(i,l,!0),i.child}function _m(r){var i=r.stateNode;i.pendingContext?vp(r,i.pendingContext,i.pendingContext!==i.context):i.context&&vp(r,i.context,!1),tc(r,i.containerInfo)}function ym(r,i,l,u,d){return ai(),qu(d),i.flags|=256,st(r,i,l,u),i.child}var vc={dehydrated:null,treeContext:null,retryLane:0};function wc(r){return{baseLanes:r,cachePool:null,transitions:null}}function vm(r,i,l){var u=i.pendingProps,d=Ae.current,p=!1,g=(i.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(d&2)!==0),w?(p=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),Ce(Ae,d&1),r===null)return Ku(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(i.mode&1?r.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(g=u.children,r=u.fallback,p?(u=i.mode,p=i.child,g={mode:"hidden",children:g},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=g):p=Al(g,u,0,null),r=Nr(r,u,l,null),p.return=i,r.return=i,p.sibling=r,i.child=p,i.child.memoizedState=wc(l),i.memoizedState=vc,r):Ec(i,g));if(d=r.memoizedState,d!==null&&(w=d.dehydrated,w!==null))return eS(r,i,g,u,w,d,l);if(p){p=u.fallback,g=i.mode,d=r.child,w=d.sibling;var E={mode:"hidden",children:u.children};return!(g&1)&&i.child!==d?(u=i.child,u.childLanes=0,u.pendingProps=E,i.deletions=null):(u=Qn(d,E),u.subtreeFlags=d.subtreeFlags&14680064),w!==null?p=Qn(w,p):(p=Nr(p,g,l,null),p.flags|=2),p.return=i,u.return=i,u.sibling=p,i.child=u,u=p,p=i.child,g=r.child.memoizedState,g=g===null?wc(l):{baseLanes:g.baseLanes|l,cachePool:null,transitions:g.transitions},p.memoizedState=g,p.childLanes=r.childLanes&~l,i.memoizedState=vc,u}return p=r.child,r=p.sibling,u=Qn(p,{mode:"visible",children:u.children}),!(i.mode&1)&&(u.lanes=l),u.return=i,u.sibling=null,r!==null&&(l=i.deletions,l===null?(i.deletions=[r],i.flags|=16):l.push(r)),i.child=u,i.memoizedState=null,u}function Ec(r,i){return i=Al({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function yl(r,i,l,u){return u!==null&&qu(u),ui(i,r.child,null,l),r=Ec(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function eS(r,i,l,u,d,p,g){if(l)return i.flags&256?(i.flags&=-257,u=mc(Error(n(422))),yl(r,i,g,u)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(p=u.fallback,d=i.mode,u=Al({mode:"visible",children:u.children},d,0,null),p=Nr(p,d,g,null),p.flags|=2,u.return=i,p.return=i,u.sibling=p,i.child=u,i.mode&1&&ui(i,r.child,null,g),i.child.memoizedState=wc(g),i.memoizedState=vc,p);if(!(i.mode&1))return yl(r,i,g,null);if(d.data==="$!"){if(u=d.nextSibling&&d.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(n(419)),u=mc(p,u,void 0),yl(r,i,g,u)}if(w=(g&r.childLanes)!==0,ft||w){if(u=Ve,u!==null){switch(g&-g){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(u.suspendedLanes|g)?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,hn(r,d),Bt(u,r,d,-1))}return Fc(),u=mc(Error(n(421))),yl(r,i,g,u)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=hS.bind(null,r),d._reactRetry=i,null):(r=p.treeContext,Ct=Un(d.nextSibling),St=i,Ne=!0,Ut=null,r!==null&&(Pt[Nt++]=dn,Pt[Nt++]=fn,Pt[Nt++]=wr,dn=r.id,fn=r.overflow,wr=i),i=Ec(i,u.children),i.flags|=4096,i)}function wm(r,i,l){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Xu(r.return,i,l)}function Sc(r,i,l,u,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:d}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=d)}function Em(r,i,l){var u=i.pendingProps,d=u.revealOrder,p=u.tail;if(st(r,i,u.children,l),u=Ae.current,u&2)u=u&1|2,i.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&wm(r,l,i);else if(r.tag===19)wm(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}if(Ce(Ae,u),!(i.mode&1))i.memoizedState=null;else switch(d){case"forwards":for(l=i.child,d=null;l!==null;)r=l.alternate,r!==null&&dl(r)===null&&(d=l),l=l.sibling;l=d,l===null?(d=i.child,i.child=null):(d=l.sibling,l.sibling=null),Sc(i,!1,d,l,p);break;case"backwards":for(l=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&dl(r)===null){i.child=d;break}r=d.sibling,d.sibling=l,l=d,d=r}Sc(i,!0,l,null,p);break;case"together":Sc(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function vl(r,i){!(i.mode&1)&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function mn(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),kr|=i.lanes,!(l&i.childLanes))return null;if(r!==null&&i.child!==r.child)throw Error(n(153));if(i.child!==null){for(r=i.child,l=Qn(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=Qn(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function tS(r,i,l){switch(i.tag){case 3:_m(i),ai();break;case 5:bp(i);break;case 1:dt(i.type)&&tl(i);break;case 4:tc(i,i.stateNode.containerInfo);break;case 10:var u=i.type._context,d=i.memoizedProps.value;Ce(ll,u._currentValue),u._currentValue=d;break;case 13:if(u=i.memoizedState,u!==null)return u.dehydrated!==null?(Ce(Ae,Ae.current&1),i.flags|=128,null):l&i.child.childLanes?vm(r,i,l):(Ce(Ae,Ae.current&1),r=mn(r,i,l),r!==null?r.sibling:null);Ce(Ae,Ae.current&1);break;case 19:if(u=(l&i.childLanes)!==0,r.flags&128){if(u)return Em(r,i,l);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ce(Ae,Ae.current),u)break;return null;case 22:case 23:return i.lanes=0,pm(r,i,l)}return mn(r,i,l)}var Sm,Cc,Cm,Im;Sm=function(r,i){for(var l=i.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Cc=function(){},Cm=function(r,i,l,u){var d=r.memoizedProps;if(d!==u){r=i.stateNode,Cr(en.current);var p=null;switch(l){case"input":d=Xa(r,d),u=Xa(r,u),p=[];break;case"select":d=G({},d,{value:void 0}),u=G({},u,{value:void 0}),p=[];break;case"textarea":d=tu(r,d),u=tu(r,u),p=[];break;default:typeof d.onClick!="function"&&typeof u.onClick=="function"&&(r.onclick=Xo)}ru(l,u);var g;l=null;for(P in d)if(!u.hasOwnProperty(P)&&d.hasOwnProperty(P)&&d[P]!=null)if(P==="style"){var w=d[P];for(g in w)w.hasOwnProperty(g)&&(l||(l={}),l[g]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(o.hasOwnProperty(P)?p||(p=[]):(p=p||[]).push(P,null));for(P in u){var E=u[P];if(w=d!=null?d[P]:void 0,u.hasOwnProperty(P)&&E!==w&&(E!=null||w!=null))if(P==="style")if(w){for(g in w)!w.hasOwnProperty(g)||E&&E.hasOwnProperty(g)||(l||(l={}),l[g]="");for(g in E)E.hasOwnProperty(g)&&w[g]!==E[g]&&(l||(l={}),l[g]=E[g])}else l||(p||(p=[]),p.push(P,l)),l=E;else P==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,w=w?w.__html:void 0,E!=null&&w!==E&&(p=p||[]).push(P,E)):P==="children"?typeof E!="string"&&typeof E!="number"||(p=p||[]).push(P,""+E):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(o.hasOwnProperty(P)?(E!=null&&P==="onScroll"&&ke("scroll",r),p||w===E||(p=[])):(p=p||[]).push(P,E))}l&&(p=p||[]).push("style",l);var P=p;(i.updateQueue=P)&&(i.flags|=4)}},Im=function(r,i,l,u){l!==u&&(i.flags|=4)};function Ss(r,i){if(!Ne)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function tt(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(i)for(var d=r.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags&14680064,u|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)l|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=l,i}function nS(r,i,l){var u=i.pendingProps;switch(Vu(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(i),null;case 1:return dt(i.type)&&el(),tt(i),null;case 3:return u=i.stateNode,fi(),Te(ct),Te(Ze),ic(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(sl(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Ut!==null&&(Lc(Ut),Ut=null))),Cc(r,i),tt(i),null;case 5:nc(i);var d=Cr(_s.current);if(l=i.type,r!==null&&i.stateNode!=null)Cm(r,i,l,u,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!u){if(i.stateNode===null)throw Error(n(166));return tt(i),null}if(r=Cr(en.current),sl(i)){u=i.stateNode,l=i.type;var p=i.memoizedProps;switch(u[Zt]=i,u[fs]=p,r=(i.mode&1)!==0,l){case"dialog":ke("cancel",u),ke("close",u);break;case"iframe":case"object":case"embed":ke("load",u);break;case"video":case"audio":for(d=0;d<us.length;d++)ke(us[d],u);break;case"source":ke("error",u);break;case"img":case"image":case"link":ke("error",u),ke("load",u);break;case"details":ke("toggle",u);break;case"input":ih(u,p),ke("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},ke("invalid",u);break;case"textarea":lh(u,p),ke("invalid",u)}ru(l,p),d=null;for(var g in p)if(p.hasOwnProperty(g)){var w=p[g];g==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&Jo(u.textContent,w,r),d=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&Jo(u.textContent,w,r),d=["children",""+w]):o.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&ke("scroll",u)}switch(l){case"input":Po(u),oh(u,p,!0);break;case"textarea":Po(u),uh(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Xo)}u=d,i.updateQueue=u,u!==null&&(i.flags|=4)}else{g=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ch(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=g.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof u.is=="string"?r=g.createElement(l,{is:u.is}):(r=g.createElement(l),l==="select"&&(g=r,u.multiple?g.multiple=!0:u.size&&(g.size=u.size))):r=g.createElementNS(r,l),r[Zt]=i,r[fs]=u,Sm(r,i,!1,!1),i.stateNode=r;e:{switch(g=iu(l,u),l){case"dialog":ke("cancel",r),ke("close",r),d=u;break;case"iframe":case"object":case"embed":ke("load",r),d=u;break;case"video":case"audio":for(d=0;d<us.length;d++)ke(us[d],r);d=u;break;case"source":ke("error",r),d=u;break;case"img":case"image":case"link":ke("error",r),ke("load",r),d=u;break;case"details":ke("toggle",r),d=u;break;case"input":ih(r,u),d=Xa(r,u),ke("invalid",r);break;case"option":d=u;break;case"select":r._wrapperState={wasMultiple:!!u.multiple},d=G({},u,{value:void 0}),ke("invalid",r);break;case"textarea":lh(r,u),d=tu(r,u),ke("invalid",r);break;default:d=u}ru(l,d),w=d;for(p in w)if(w.hasOwnProperty(p)){var E=w[p];p==="style"?hh(r,E):p==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&dh(r,E)):p==="children"?typeof E=="string"?(l!=="textarea"||E!=="")&&Hi(r,E):typeof E=="number"&&Hi(r,""+E):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?E!=null&&p==="onScroll"&&ke("scroll",r):E!=null&&L(r,p,E,g))}switch(l){case"input":Po(r),oh(r,u,!1);break;case"textarea":Po(r),uh(r);break;case"option":u.value!=null&&r.setAttribute("value",""+ye(u.value));break;case"select":r.multiple=!!u.multiple,p=u.value,p!=null?Kr(r,!!u.multiple,p,!1):u.defaultValue!=null&&Kr(r,!!u.multiple,u.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Xo)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return tt(i),null;case 6:if(r&&i.stateNode!=null)Im(r,i,r.memoizedProps,u);else{if(typeof u!="string"&&i.stateNode===null)throw Error(n(166));if(l=Cr(_s.current),Cr(en.current),sl(i)){if(u=i.stateNode,l=i.memoizedProps,u[Zt]=i,(p=u.nodeValue!==l)&&(r=St,r!==null))switch(r.tag){case 3:Jo(u.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Jo(u.nodeValue,l,(r.mode&1)!==0)}p&&(i.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[Zt]=i,i.stateNode=u}return tt(i),null;case 13:if(Te(Ae),u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Ne&&Ct!==null&&i.mode&1&&!(i.flags&128))Rp(),ai(),i.flags|=98560,p=!1;else if(p=sl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!p)throw Error(n(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Zt]=i}else ai(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;tt(i),p=!1}else Ut!==null&&(Lc(Ut),Ut=null),p=!0;if(!p)return i.flags&65536?i:null}return i.flags&128?(i.lanes=l,i):(u=u!==null,u!==(r!==null&&r.memoizedState!==null)&&u&&(i.child.flags|=8192,i.mode&1&&(r===null||Ae.current&1?We===0&&(We=3):Fc())),i.updateQueue!==null&&(i.flags|=4),tt(i),null);case 4:return fi(),Cc(r,i),r===null&&cs(i.stateNode.containerInfo),tt(i),null;case 10:return Ju(i.type._context),tt(i),null;case 17:return dt(i.type)&&el(),tt(i),null;case 19:if(Te(Ae),p=i.memoizedState,p===null)return tt(i),null;if(u=(i.flags&128)!==0,g=p.rendering,g===null)if(u)Ss(p,!1);else{if(We!==0||r!==null&&r.flags&128)for(r=i.child;r!==null;){if(g=dl(r),g!==null){for(i.flags|=128,Ss(p,!1),u=g.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),i.subtreeFlags=0,u=l,l=i.child;l!==null;)p=l,r=u,p.flags&=14680066,g=p.alternate,g===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=g.childLanes,p.lanes=g.lanes,p.child=g.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=g.memoizedProps,p.memoizedState=g.memoizedState,p.updateQueue=g.updateQueue,p.type=g.type,r=g.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return Ce(Ae,Ae.current&1|2),i.child}r=r.sibling}p.tail!==null&&Fe()>gi&&(i.flags|=128,u=!0,Ss(p,!1),i.lanes=4194304)}else{if(!u)if(r=dl(g),r!==null){if(i.flags|=128,u=!0,l=r.updateQueue,l!==null&&(i.updateQueue=l,i.flags|=4),Ss(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!Ne)return tt(i),null}else 2*Fe()-p.renderingStartTime>gi&&l!==1073741824&&(i.flags|=128,u=!0,Ss(p,!1),i.lanes=4194304);p.isBackwards?(g.sibling=i.child,i.child=g):(l=p.last,l!==null?l.sibling=g:i.child=g,p.last=g)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Fe(),i.sibling=null,l=Ae.current,Ce(Ae,u?l&1|2:l&1),i):(tt(i),null);case 22:case 23:return Mc(),u=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==u&&(i.flags|=8192),u&&i.mode&1?It&1073741824&&(tt(i),i.subtreeFlags&6&&(i.flags|=8192)):tt(i),null;case 24:return null;case 25:return null}throw Error(n(156,i.tag))}function rS(r,i){switch(Vu(i),i.tag){case 1:return dt(i.type)&&el(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return fi(),Te(ct),Te(Ze),ic(),r=i.flags,r&65536&&!(r&128)?(i.flags=r&-65537|128,i):null;case 5:return nc(i),null;case 13:if(Te(Ae),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(n(340));ai()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Te(Ae),null;case 4:return fi(),null;case 10:return Ju(i.type._context),null;case 22:case 23:return Mc(),null;case 24:return null;default:return null}}var wl=!1,nt=!1,iS=typeof WeakSet=="function"?WeakSet:Set,V=null;function pi(r,i){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){be(r,i,u)}else l.current=null}function Ic(r,i,l){try{l()}catch(u){be(r,i,u)}}var km=!1;function sS(r,i){if(Mu=jo,r=rp(),Pu(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch{l=null;break e}var g=0,w=-1,E=-1,P=0,M=0,F=r,D=null;t:for(;;){for(var H;F!==l||d!==0&&F.nodeType!==3||(w=g+d),F!==p||u!==0&&F.nodeType!==3||(E=g+u),F.nodeType===3&&(g+=F.nodeValue.length),(H=F.firstChild)!==null;)D=F,F=H;for(;;){if(F===r)break t;if(D===l&&++P===d&&(w=g),D===p&&++M===u&&(E=g),(H=F.nextSibling)!==null)break;F=D,D=F.parentNode}F=H}l=w===-1||E===-1?null:{start:w,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fu={focusedElem:r,selectionRange:l},jo=!1,V=i;V!==null;)if(i=V,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,V=r;else for(;V!==null;){i=V;try{var K=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(K!==null){var q=K.memoizedProps,Ue=K.memoizedState,T=i.stateNode,S=T.getSnapshotBeforeUpdate(i.elementType===i.type?q:zt(i.type,q),Ue);T.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var R=i.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(U){be(i,i.return,U)}if(r=i.sibling,r!==null){r.return=i.return,V=r;break}V=i.return}return K=km,km=!1,K}function Cs(r,i,l){var u=i.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var d=u=u.next;do{if((d.tag&r)===r){var p=d.destroy;d.destroy=void 0,p!==void 0&&Ic(i,l,p)}d=d.next}while(d!==u)}}function El(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&r)===r){var u=l.create;l.destroy=u()}l=l.next}while(l!==i)}}function kc(r){var i=r.ref;if(i!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof i=="function"?i(r):i.current=r}}function Tm(r){var i=r.alternate;i!==null&&(r.alternate=null,Tm(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Zt],delete i[fs],delete i[Wu],delete i[WE],delete i[BE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Rm(r){return r.tag===5||r.tag===3||r.tag===4}function Pm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Rm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Tc(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.nodeType===8?l.parentNode.insertBefore(r,i):l.insertBefore(r,i):(l.nodeType===8?(i=l.parentNode,i.insertBefore(r,l)):(i=l,i.appendChild(r)),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=Xo));else if(u!==4&&(r=r.child,r!==null))for(Tc(r,i,l),r=r.sibling;r!==null;)Tc(r,i,l),r=r.sibling}function Rc(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(u!==4&&(r=r.child,r!==null))for(Rc(r,i,l),r=r.sibling;r!==null;)Rc(r,i,l),r=r.sibling}var Ye=null,jt=!1;function Hn(r,i,l){for(l=l.child;l!==null;)Nm(r,i,l),l=l.sibling}function Nm(r,i,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Lo,l)}catch{}switch(l.tag){case 5:nt||pi(l,i);case 6:var u=Ye,d=jt;Ye=null,Hn(r,i,l),Ye=u,jt=d,Ye!==null&&(jt?(r=Ye,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Ye.removeChild(l.stateNode));break;case 18:Ye!==null&&(jt?(r=Ye,l=l.stateNode,r.nodeType===8?ju(r.parentNode,l):r.nodeType===1&&ju(r,l),ts(r)):ju(Ye,l.stateNode));break;case 4:u=Ye,d=jt,Ye=l.stateNode.containerInfo,jt=!0,Hn(r,i,l),Ye=u,jt=d;break;case 0:case 11:case 14:case 15:if(!nt&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){d=u=u.next;do{var p=d,g=p.destroy;p=p.tag,g!==void 0&&(p&2||p&4)&&Ic(l,i,g),d=d.next}while(d!==u)}Hn(r,i,l);break;case 1:if(!nt&&(pi(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(w){be(l,i,w)}Hn(r,i,l);break;case 21:Hn(r,i,l);break;case 22:l.mode&1?(nt=(u=nt)||l.memoizedState!==null,Hn(r,i,l),nt=u):Hn(r,i,l);break;default:Hn(r,i,l)}}function xm(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new iS),i.forEach(function(u){var d=pS.bind(null,r,u);l.has(u)||(l.add(u),u.then(d,d))})}}function Wt(r,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];try{var p=r,g=i,w=g;e:for(;w!==null;){switch(w.tag){case 5:Ye=w.stateNode,jt=!1;break e;case 3:Ye=w.stateNode.containerInfo,jt=!0;break e;case 4:Ye=w.stateNode.containerInfo,jt=!0;break e}w=w.return}if(Ye===null)throw Error(n(160));Nm(p,g,d),Ye=null,jt=!1;var E=d.alternate;E!==null&&(E.return=null),d.return=null}catch(P){be(d,i,P)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Am(i,r),i=i.sibling}function Am(r,i){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Wt(i,r),nn(r),u&4){try{Cs(3,r,r.return),El(3,r)}catch(q){be(r,r.return,q)}try{Cs(5,r,r.return)}catch(q){be(r,r.return,q)}}break;case 1:Wt(i,r),nn(r),u&512&&l!==null&&pi(l,l.return);break;case 5:if(Wt(i,r),nn(r),u&512&&l!==null&&pi(l,l.return),r.flags&32){var d=r.stateNode;try{Hi(d,"")}catch(q){be(r,r.return,q)}}if(u&4&&(d=r.stateNode,d!=null)){var p=r.memoizedProps,g=l!==null?l.memoizedProps:p,w=r.type,E=r.updateQueue;if(r.updateQueue=null,E!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&sh(d,p),iu(w,g);var P=iu(w,p);for(g=0;g<E.length;g+=2){var M=E[g],F=E[g+1];M==="style"?hh(d,F):M==="dangerouslySetInnerHTML"?dh(d,F):M==="children"?Hi(d,F):L(d,M,F,P)}switch(w){case"input":Za(d,p);break;case"textarea":ah(d,p);break;case"select":var D=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var H=p.value;H!=null?Kr(d,!!p.multiple,H,!1):D!==!!p.multiple&&(p.defaultValue!=null?Kr(d,!!p.multiple,p.defaultValue,!0):Kr(d,!!p.multiple,p.multiple?[]:"",!1))}d[fs]=p}catch(q){be(r,r.return,q)}}break;case 6:if(Wt(i,r),nn(r),u&4){if(r.stateNode===null)throw Error(n(162));d=r.stateNode,p=r.memoizedProps;try{d.nodeValue=p}catch(q){be(r,r.return,q)}}break;case 3:if(Wt(i,r),nn(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{ts(i.containerInfo)}catch(q){be(r,r.return,q)}break;case 4:Wt(i,r),nn(r);break;case 13:Wt(i,r),nn(r),d=r.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(xc=Fe())),u&4&&xm(r);break;case 22:if(M=l!==null&&l.memoizedState!==null,r.mode&1?(nt=(P=nt)||M,Wt(i,r),nt=P):Wt(i,r),nn(r),u&8192){if(P=r.memoizedState!==null,(r.stateNode.isHidden=P)&&!M&&r.mode&1)for(V=r,M=r.child;M!==null;){for(F=V=M;V!==null;){switch(D=V,H=D.child,D.tag){case 0:case 11:case 14:case 15:Cs(4,D,D.return);break;case 1:pi(D,D.return);var K=D.stateNode;if(typeof K.componentWillUnmount=="function"){u=D,l=D.return;try{i=u,K.props=i.memoizedProps,K.state=i.memoizedState,K.componentWillUnmount()}catch(q){be(u,l,q)}}break;case 5:pi(D,D.return);break;case 22:if(D.memoizedState!==null){Lm(F);continue}}H!==null?(H.return=D,V=H):Lm(F)}M=M.sibling}e:for(M=null,F=r;;){if(F.tag===5){if(M===null){M=F;try{d=F.stateNode,P?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=F.stateNode,E=F.memoizedProps.style,g=E!=null&&E.hasOwnProperty("display")?E.display:null,w.style.display=fh("display",g))}catch(q){be(r,r.return,q)}}}else if(F.tag===6){if(M===null)try{F.stateNode.nodeValue=P?"":F.memoizedProps}catch(q){be(r,r.return,q)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===r)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===r)break e;for(;F.sibling===null;){if(F.return===null||F.return===r)break e;M===F&&(M=null),F=F.return}M===F&&(M=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:Wt(i,r),nn(r),u&4&&xm(r);break;case 21:break;default:Wt(i,r),nn(r)}}function nn(r){var i=r.flags;if(i&2){try{e:{for(var l=r.return;l!==null;){if(Rm(l)){var u=l;break e}l=l.return}throw Error(n(160))}switch(u.tag){case 5:var d=u.stateNode;u.flags&32&&(Hi(d,""),u.flags&=-33);var p=Pm(r);Rc(r,p,d);break;case 3:case 4:var g=u.stateNode.containerInfo,w=Pm(r);Tc(r,w,g);break;default:throw Error(n(161))}}catch(E){be(r,r.return,E)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function oS(r,i,l){V=r,Om(r)}function Om(r,i,l){for(var u=(r.mode&1)!==0;V!==null;){var d=V,p=d.child;if(d.tag===22&&u){var g=d.memoizedState!==null||wl;if(!g){var w=d.alternate,E=w!==null&&w.memoizedState!==null||nt;w=wl;var P=nt;if(wl=g,(nt=E)&&!P)for(V=d;V!==null;)g=V,E=g.child,g.tag===22&&g.memoizedState!==null?bm(d):E!==null?(E.return=g,V=E):bm(d);for(;p!==null;)V=p,Om(p),p=p.sibling;V=d,wl=w,nt=P}Dm(r)}else d.subtreeFlags&8772&&p!==null?(p.return=d,V=p):Dm(r)}}function Dm(r){for(;V!==null;){var i=V;if(i.flags&8772){var l=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:nt||El(5,i);break;case 1:var u=i.stateNode;if(i.flags&4&&!nt)if(l===null)u.componentDidMount();else{var d=i.elementType===i.type?l.memoizedProps:zt(i.type,l.memoizedProps);u.componentDidUpdate(d,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&Lp(i,p,u);break;case 3:var g=i.updateQueue;if(g!==null){if(l=null,i.child!==null)switch(i.child.tag){case 5:l=i.child.stateNode;break;case 1:l=i.child.stateNode}Lp(i,g,l)}break;case 5:var w=i.stateNode;if(l===null&&i.flags&4){l=w;var E=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&l.focus();break;case"img":E.src&&(l.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var P=i.alternate;if(P!==null){var M=P.memoizedState;if(M!==null){var F=M.dehydrated;F!==null&&ts(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}nt||i.flags&512&&kc(i)}catch(D){be(i,i.return,D)}}if(i===r){V=null;break}if(l=i.sibling,l!==null){l.return=i.return,V=l;break}V=i.return}}function Lm(r){for(;V!==null;){var i=V;if(i===r){V=null;break}var l=i.sibling;if(l!==null){l.return=i.return,V=l;break}V=i.return}}function bm(r){for(;V!==null;){var i=V;try{switch(i.tag){case 0:case 11:case 15:var l=i.return;try{El(4,i)}catch(E){be(i,l,E)}break;case 1:var u=i.stateNode;if(typeof u.componentDidMount=="function"){var d=i.return;try{u.componentDidMount()}catch(E){be(i,d,E)}}var p=i.return;try{kc(i)}catch(E){be(i,p,E)}break;case 5:var g=i.return;try{kc(i)}catch(E){be(i,g,E)}}}catch(E){be(i,i.return,E)}if(i===r){V=null;break}var w=i.sibling;if(w!==null){w.return=i.return,V=w;break}V=i.return}}var lS=Math.ceil,Sl=B.ReactCurrentDispatcher,Pc=B.ReactCurrentOwner,Ot=B.ReactCurrentBatchConfig,he=0,Ve=null,ze=null,Je=0,It=0,mi=zn(0),We=0,Is=null,kr=0,Cl=0,Nc=0,ks=null,ht=null,xc=0,gi=1/0,gn=null,Il=!1,Ac=null,Vn=null,kl=!1,Gn=null,Tl=0,Ts=0,Oc=null,Rl=-1,Pl=0;function ot(){return he&6?Fe():Rl!==-1?Rl:Rl=Fe()}function Kn(r){return r.mode&1?he&2&&Je!==0?Je&-Je:HE.transition!==null?(Pl===0&&(Pl=Ph()),Pl):(r=ve,r!==0||(r=window.event,r=r===void 0?16:Fh(r.type)),r):1}function Bt(r,i,l,u){if(50<Ts)throw Ts=0,Oc=null,Error(n(185));Yi(r,l,u),(!(he&2)||r!==Ve)&&(r===Ve&&(!(he&2)&&(Cl|=l),We===4&&qn(r,Je)),pt(r,u),l===1&&he===0&&!(i.mode&1)&&(gi=Fe()+500,nl&&Wn()))}function pt(r,i){var l=r.callbackNode;Hw(r,i);var u=Fo(r,r===Ve?Je:0);if(u===0)l!==null&&kh(l),r.callbackNode=null,r.callbackPriority=0;else if(i=u&-u,r.callbackPriority!==i){if(l!=null&&kh(l),i===1)r.tag===0?$E(Fm.bind(null,r)):Sp(Fm.bind(null,r)),zE(function(){!(he&6)&&Wn()}),l=null;else{switch(Nh(u)){case 1:l=du;break;case 4:l=Th;break;case 16:l=Do;break;case 536870912:l=Rh;break;default:l=Do}l=Vm(l,Mm.bind(null,r))}r.callbackPriority=i,r.callbackNode=l}}function Mm(r,i){if(Rl=-1,Pl=0,he&6)throw Error(n(327));var l=r.callbackNode;if(_i()&&r.callbackNode!==l)return null;var u=Fo(r,r===Ve?Je:0);if(u===0)return null;if(u&30||u&r.expiredLanes||i)i=Nl(r,u);else{i=u;var d=he;he|=2;var p=zm();(Ve!==r||Je!==i)&&(gn=null,gi=Fe()+500,Rr(r,i));do try{cS();break}catch(w){Um(r,w)}while(!0);Yu(),Sl.current=p,he=d,ze!==null?i=0:(Ve=null,Je=0,i=We)}if(i!==0){if(i===2&&(d=fu(r),d!==0&&(u=d,i=Dc(r,d))),i===1)throw l=Is,Rr(r,0),qn(r,u),pt(r,Fe()),l;if(i===6)qn(r,u);else{if(d=r.current.alternate,!(u&30)&&!aS(d)&&(i=Nl(r,u),i===2&&(p=fu(r),p!==0&&(u=p,i=Dc(r,p))),i===1))throw l=Is,Rr(r,0),qn(r,u),pt(r,Fe()),l;switch(r.finishedWork=d,r.finishedLanes=u,i){case 0:case 1:throw Error(n(345));case 2:Pr(r,ht,gn);break;case 3:if(qn(r,u),(u&130023424)===u&&(i=xc+500-Fe(),10<i)){if(Fo(r,0)!==0)break;if(d=r.suspendedLanes,(d&u)!==u){ot(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=zu(Pr.bind(null,r,ht,gn),i);break}Pr(r,ht,gn);break;case 4:if(qn(r,u),(u&4194240)===u)break;for(i=r.eventTimes,d=-1;0<u;){var g=31-Mt(u);p=1<<g,g=i[g],g>d&&(d=g),u&=~p}if(u=d,u=Fe()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*lS(u/1960))-u,10<u){r.timeoutHandle=zu(Pr.bind(null,r,ht,gn),u);break}Pr(r,ht,gn);break;case 5:Pr(r,ht,gn);break;default:throw Error(n(329))}}}return pt(r,Fe()),r.callbackNode===l?Mm.bind(null,r):null}function Dc(r,i){var l=ks;return r.current.memoizedState.isDehydrated&&(Rr(r,i).flags|=256),r=Nl(r,i),r!==2&&(i=ht,ht=l,i!==null&&Lc(i)),r}function Lc(r){ht===null?ht=r:ht.push.apply(ht,r)}function aS(r){for(var i=r;;){if(i.flags&16384){var l=i.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var d=l[u],p=d.getSnapshot;d=d.value;try{if(!Ft(p(),d))return!1}catch{return!1}}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qn(r,i){for(i&=~Nc,i&=~Cl,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var l=31-Mt(i),u=1<<l;r[l]=-1,i&=~u}}function Fm(r){if(he&6)throw Error(n(327));_i();var i=Fo(r,0);if(!(i&1))return pt(r,Fe()),null;var l=Nl(r,i);if(r.tag!==0&&l===2){var u=fu(r);u!==0&&(i=u,l=Dc(r,u))}if(l===1)throw l=Is,Rr(r,0),qn(r,i),pt(r,Fe()),l;if(l===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Pr(r,ht,gn),pt(r,Fe()),null}function bc(r,i){var l=he;he|=1;try{return r(i)}finally{he=l,he===0&&(gi=Fe()+500,nl&&Wn())}}function Tr(r){Gn!==null&&Gn.tag===0&&!(he&6)&&_i();var i=he;he|=1;var l=Ot.transition,u=ve;try{if(Ot.transition=null,ve=1,r)return r()}finally{ve=u,Ot.transition=l,he=i,!(he&6)&&Wn()}}function Mc(){It=mi.current,Te(mi)}function Rr(r,i){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,UE(l)),ze!==null)for(l=ze.return;l!==null;){var u=l;switch(Vu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&el();break;case 3:fi(),Te(ct),Te(Ze),ic();break;case 5:nc(u);break;case 4:fi();break;case 13:Te(Ae);break;case 19:Te(Ae);break;case 10:Ju(u.type._context);break;case 22:case 23:Mc()}l=l.return}if(Ve=r,ze=r=Qn(r.current,null),Je=It=i,We=0,Is=null,Nc=Cl=kr=0,ht=ks=null,Sr!==null){for(i=0;i<Sr.length;i++)if(l=Sr[i],u=l.interleaved,u!==null){l.interleaved=null;var d=u.next,p=l.pending;if(p!==null){var g=p.next;p.next=d,u.next=g}l.pending=u}Sr=null}return r}function Um(r,i){do{var l=ze;try{if(Yu(),fl.current=gl,hl){for(var u=Oe.memoizedState;u!==null;){var d=u.queue;d!==null&&(d.pending=null),u=u.next}hl=!1}if(Ir=0,He=je=Oe=null,ys=!1,vs=0,Pc.current=null,l===null||l.return===null){We=1,Is=i,ze=null;break}e:{var p=r,g=l.return,w=l,E=i;if(i=Je,w.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var P=E,M=w,F=M.tag;if(!(M.mode&1)&&(F===0||F===11||F===15)){var D=M.alternate;D?(M.updateQueue=D.updateQueue,M.memoizedState=D.memoizedState,M.lanes=D.lanes):(M.updateQueue=null,M.memoizedState=null)}var H=um(g);if(H!==null){H.flags&=-257,cm(H,g,w,p,i),H.mode&1&&am(p,P,i),i=H,E=P;var K=i.updateQueue;if(K===null){var q=new Set;q.add(E),i.updateQueue=q}else K.add(E);break e}else{if(!(i&1)){am(p,P,i),Fc();break e}E=Error(n(426))}}else if(Ne&&w.mode&1){var Ue=um(g);if(Ue!==null){!(Ue.flags&65536)&&(Ue.flags|=256),cm(Ue,g,w,p,i),qu(hi(E,w));break e}}p=E=hi(E,w),We!==4&&(We=2),ks===null?ks=[p]:ks.push(p),p=g;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var T=om(p,E,i);Dp(p,T);break e;case 1:w=E;var S=p.type,R=p.stateNode;if(!(p.flags&128)&&(typeof S.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Vn===null||!Vn.has(R)))){p.flags|=65536,i&=-i,p.lanes|=i;var U=lm(p,w,i);Dp(p,U);break e}}p=p.return}while(p!==null)}Wm(l)}catch(Q){i=Q,ze===l&&l!==null&&(ze=l=l.return);continue}break}while(!0)}function zm(){var r=Sl.current;return Sl.current=gl,r===null?gl:r}function Fc(){(We===0||We===3||We===2)&&(We=4),Ve===null||!(kr&268435455)&&!(Cl&268435455)||qn(Ve,Je)}function Nl(r,i){var l=he;he|=2;var u=zm();(Ve!==r||Je!==i)&&(gn=null,Rr(r,i));do try{uS();break}catch(d){Um(r,d)}while(!0);if(Yu(),he=l,Sl.current=u,ze!==null)throw Error(n(261));return Ve=null,Je=0,We}function uS(){for(;ze!==null;)jm(ze)}function cS(){for(;ze!==null&&!bw();)jm(ze)}function jm(r){var i=Hm(r.alternate,r,It);r.memoizedProps=r.pendingProps,i===null?Wm(r):ze=i,Pc.current=null}function Wm(r){var i=r;do{var l=i.alternate;if(r=i.return,i.flags&32768){if(l=rS(l,i),l!==null){l.flags&=32767,ze=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{We=6,ze=null;return}}else if(l=nS(l,i,It),l!==null){ze=l;return}if(i=i.sibling,i!==null){ze=i;return}ze=i=r}while(i!==null);We===0&&(We=5)}function Pr(r,i,l){var u=ve,d=Ot.transition;try{Ot.transition=null,ve=1,dS(r,i,l,u)}finally{Ot.transition=d,ve=u}return null}function dS(r,i,l,u){do _i();while(Gn!==null);if(he&6)throw Error(n(327));l=r.finishedWork;var d=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var p=l.lanes|l.childLanes;if(Vw(r,p),r===Ve&&(ze=Ve=null,Je=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||kl||(kl=!0,Vm(Do,function(){return _i(),null})),p=(l.flags&15990)!==0,l.subtreeFlags&15990||p){p=Ot.transition,Ot.transition=null;var g=ve;ve=1;var w=he;he|=4,Pc.current=null,sS(r,l),Am(l,r),AE(Fu),jo=!!Mu,Fu=Mu=null,r.current=l,oS(l),Mw(),he=w,ve=g,Ot.transition=p}else r.current=l;if(kl&&(kl=!1,Gn=r,Tl=d),p=r.pendingLanes,p===0&&(Vn=null),zw(l.stateNode),pt(r,Fe()),i!==null)for(u=r.onRecoverableError,l=0;l<i.length;l++)d=i[l],u(d.value,{componentStack:d.stack,digest:d.digest});if(Il)throw Il=!1,r=Ac,Ac=null,r;return Tl&1&&r.tag!==0&&_i(),p=r.pendingLanes,p&1?r===Oc?Ts++:(Ts=0,Oc=r):Ts=0,Wn(),null}function _i(){if(Gn!==null){var r=Nh(Tl),i=Ot.transition,l=ve;try{if(Ot.transition=null,ve=16>r?16:r,Gn===null)var u=!1;else{if(r=Gn,Gn=null,Tl=0,he&6)throw Error(n(331));var d=he;for(he|=4,V=r.current;V!==null;){var p=V,g=p.child;if(V.flags&16){var w=p.deletions;if(w!==null){for(var E=0;E<w.length;E++){var P=w[E];for(V=P;V!==null;){var M=V;switch(M.tag){case 0:case 11:case 15:Cs(8,M,p)}var F=M.child;if(F!==null)F.return=M,V=F;else for(;V!==null;){M=V;var D=M.sibling,H=M.return;if(Tm(M),M===P){V=null;break}if(D!==null){D.return=H,V=D;break}V=H}}}var K=p.alternate;if(K!==null){var q=K.child;if(q!==null){K.child=null;do{var Ue=q.sibling;q.sibling=null,q=Ue}while(q!==null)}}V=p}}if(p.subtreeFlags&2064&&g!==null)g.return=p,V=g;else e:for(;V!==null;){if(p=V,p.flags&2048)switch(p.tag){case 0:case 11:case 15:Cs(9,p,p.return)}var T=p.sibling;if(T!==null){T.return=p.return,V=T;break e}V=p.return}}var S=r.current;for(V=S;V!==null;){g=V;var R=g.child;if(g.subtreeFlags&2064&&R!==null)R.return=g,V=R;else e:for(g=S;V!==null;){if(w=V,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:El(9,w)}}catch(Q){be(w,w.return,Q)}if(w===g){V=null;break e}var U=w.sibling;if(U!==null){U.return=w.return,V=U;break e}V=w.return}}if(he=d,Wn(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Lo,r)}catch{}u=!0}return u}finally{ve=l,Ot.transition=i}}return!1}function Bm(r,i,l){i=hi(l,i),i=om(r,i,1),r=$n(r,i,1),i=ot(),r!==null&&(Yi(r,1,i),pt(r,i))}function be(r,i,l){if(r.tag===3)Bm(r,r,l);else for(;i!==null;){if(i.tag===3){Bm(i,r,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vn===null||!Vn.has(u))){r=hi(l,r),r=lm(i,r,1),i=$n(i,r,1),r=ot(),i!==null&&(Yi(i,1,r),pt(i,r));break}}i=i.return}}function fS(r,i,l){var u=r.pingCache;u!==null&&u.delete(i),i=ot(),r.pingedLanes|=r.suspendedLanes&l,Ve===r&&(Je&l)===l&&(We===4||We===3&&(Je&130023424)===Je&&500>Fe()-xc?Rr(r,0):Nc|=l),pt(r,i)}function $m(r,i){i===0&&(r.mode&1?(i=Mo,Mo<<=1,!(Mo&130023424)&&(Mo=4194304)):i=1);var l=ot();r=hn(r,i),r!==null&&(Yi(r,i,l),pt(r,l))}function hS(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),$m(r,l)}function pS(r,i){var l=0;switch(r.tag){case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(l=d.retryLane);break;case 19:u=r.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(i),$m(r,l)}var Hm;Hm=function(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps||ct.current)ft=!0;else{if(!(r.lanes&l)&&!(i.flags&128))return ft=!1,tS(r,i,l);ft=!!(r.flags&131072)}else ft=!1,Ne&&i.flags&1048576&&Cp(i,il,i.index);switch(i.lanes=0,i.tag){case 2:var u=i.type;vl(r,i),r=i.pendingProps;var d=si(i,Ze.current);di(i,l),d=lc(null,i,u,r,d,l);var p=ac();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,dt(u)?(p=!0,tl(i)):p=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ec(i),d.updater=_l,i.stateNode=d,d._reactInternals=i,pc(i,u,r,l),i=yc(null,i,u,!0,p,l)):(i.tag=0,Ne&&p&&Hu(i),st(null,i,d,l),i=i.child),i;case 16:u=i.elementType;e:{switch(vl(r,i),r=i.pendingProps,d=u._init,u=d(u._payload),i.type=u,d=i.tag=gS(u),r=zt(u,r),d){case 0:i=_c(null,i,u,r,l);break e;case 1:i=gm(null,i,u,r,l);break e;case 11:i=dm(null,i,u,r,l);break e;case 14:i=fm(null,i,u,zt(u.type,r),l);break e}throw Error(n(306,u,""))}return i;case 0:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),_c(r,i,u,d,l);case 1:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),gm(r,i,u,d,l);case 3:e:{if(_m(i),r===null)throw Error(n(387));u=i.pendingProps,p=i.memoizedState,d=p.element,Op(r,i),cl(i,u,null,l);var g=i.memoizedState;if(u=g.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){d=hi(Error(n(423)),i),i=ym(r,i,u,l,d);break e}else if(u!==d){d=hi(Error(n(424)),i),i=ym(r,i,u,l,d);break e}else for(Ct=Un(i.stateNode.containerInfo.firstChild),St=i,Ne=!0,Ut=null,l=xp(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ai(),u===d){i=mn(r,i,l);break e}st(r,i,u,l)}i=i.child}return i;case 5:return bp(i),r===null&&Ku(i),u=i.type,d=i.pendingProps,p=r!==null?r.memoizedProps:null,g=d.children,Uu(u,d)?g=null:p!==null&&Uu(u,p)&&(i.flags|=32),mm(r,i),st(r,i,g,l),i.child;case 6:return r===null&&Ku(i),null;case 13:return vm(r,i,l);case 4:return tc(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=ui(i,null,u,l):st(r,i,u,l),i.child;case 11:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),dm(r,i,u,d,l);case 7:return st(r,i,i.pendingProps,l),i.child;case 8:return st(r,i,i.pendingProps.children,l),i.child;case 12:return st(r,i,i.pendingProps.children,l),i.child;case 10:e:{if(u=i.type._context,d=i.pendingProps,p=i.memoizedProps,g=d.value,Ce(ll,u._currentValue),u._currentValue=g,p!==null)if(Ft(p.value,g)){if(p.children===d.children&&!ct.current){i=mn(r,i,l);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var w=p.dependencies;if(w!==null){g=p.child;for(var E=w.firstContext;E!==null;){if(E.context===u){if(p.tag===1){E=pn(-1,l&-l),E.tag=2;var P=p.updateQueue;if(P!==null){P=P.shared;var M=P.pending;M===null?E.next=E:(E.next=M.next,M.next=E),P.pending=E}}p.lanes|=l,E=p.alternate,E!==null&&(E.lanes|=l),Xu(p.return,l,i),w.lanes|=l;break}E=E.next}}else if(p.tag===10)g=p.type===i.type?null:p.child;else if(p.tag===18){if(g=p.return,g===null)throw Error(n(341));g.lanes|=l,w=g.alternate,w!==null&&(w.lanes|=l),Xu(g,l,i),g=p.sibling}else g=p.child;if(g!==null)g.return=p;else for(g=p;g!==null;){if(g===i){g=null;break}if(p=g.sibling,p!==null){p.return=g.return,g=p;break}g=g.return}p=g}st(r,i,d.children,l),i=i.child}return i;case 9:return d=i.type,u=i.pendingProps.children,di(i,l),d=xt(d),u=u(d),i.flags|=1,st(r,i,u,l),i.child;case 14:return u=i.type,d=zt(u,i.pendingProps),d=zt(u.type,d),fm(r,i,u,d,l);case 15:return hm(r,i,i.type,i.pendingProps,l);case 17:return u=i.type,d=i.pendingProps,d=i.elementType===u?d:zt(u,d),vl(r,i),i.tag=1,dt(u)?(r=!0,tl(i)):r=!1,di(i,l),im(i,u,d),pc(i,u,d,l),yc(null,i,u,!0,r,l);case 19:return Em(r,i,l);case 22:return pm(r,i,l)}throw Error(n(156,i.tag))};function Vm(r,i){return Ih(r,i)}function mS(r,i,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(r,i,l,u){return new mS(r,i,l,u)}function Uc(r){return r=r.prototype,!(!r||!r.isReactComponent)}function gS(r){if(typeof r=="function")return Uc(r)?1:0;if(r!=null){if(r=r.$$typeof,r===Yt)return 11;if(r===Jt)return 14}return 2}function Qn(r,i){var l=r.alternate;return l===null?(l=Dt(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function xl(r,i,l,u,d,p){var g=2;if(u=r,typeof r=="function")Uc(r)&&(g=1);else if(typeof r=="string")g=5;else e:switch(r){case se:return Nr(l.children,d,p,i);case ee:g=8,d|=8;break;case fe:return r=Dt(12,l,i,d|2),r.elementType=fe,r.lanes=p,r;case vt:return r=Dt(13,l,i,d),r.elementType=vt,r.lanes=p,r;case bt:return r=Dt(19,l,i,d),r.elementType=bt,r.lanes=p,r;case Le:return Al(l,d,p,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case De:g=10;break e;case Rt:g=9;break e;case Yt:g=11;break e;case Jt:g=14;break e;case ut:g=16,u=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return i=Dt(g,l,i,d),i.elementType=r,i.type=u,i.lanes=p,i}function Nr(r,i,l,u){return r=Dt(7,r,u,i),r.lanes=l,r}function Al(r,i,l,u){return r=Dt(22,r,u,i),r.elementType=Le,r.lanes=l,r.stateNode={isHidden:!1},r}function zc(r,i,l){return r=Dt(6,r,null,i),r.lanes=l,r}function jc(r,i,l){return i=Dt(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function _S(r,i,l,u,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=u,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Wc(r,i,l,u,d,p,g,w,E){return r=new _S(r,i,l,w,E),i===1?(i=1,p===!0&&(i|=8)):i=0,p=Dt(3,null,null,i),r.current=p,p.stateNode=r,p.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},ec(p),r}function yS(r,i,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:u==null?null:""+u,children:r,containerInfo:i,implementation:l}}function Gm(r){if(!r)return jn;r=r._reactInternals;e:{if(_r(r)!==r||r.tag!==1)throw Error(n(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(dt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(n(171))}if(r.tag===1){var l=r.type;if(dt(l))return wp(r,l,i)}return i}function Km(r,i,l,u,d,p,g,w,E){return r=Wc(l,u,!0,r,d,p,g,w,E),r.context=Gm(null),l=r.current,u=ot(),d=Kn(l),p=pn(u,d),p.callback=i??null,$n(l,p,d),r.current.lanes=d,Yi(r,d,u),pt(r,u),r}function Ol(r,i,l,u){var d=i.current,p=ot(),g=Kn(d);return l=Gm(l),i.context===null?i.context=l:i.pendingContext=l,i=pn(p,g),i.payload={element:r},u=u===void 0?null:u,u!==null&&(i.callback=u),r=$n(d,i,g),r!==null&&(Bt(r,d,g,p),ul(r,d,g)),g}function Dl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function qm(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function Bc(r,i){qm(r,i),(r=r.alternate)&&qm(r,i)}var Qm=typeof reportError=="function"?reportError:function(r){console.error(r)};function $c(r){this._internalRoot=r}Ll.prototype.render=$c.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(n(409));Ol(r,i,null,null)},Ll.prototype.unmount=$c.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Tr(function(){Ol(null,r,null,null)}),i[un]=null}};function Ll(r){this._internalRoot=r}Ll.prototype.unstable_scheduleHydration=function(r){if(r){var i=Oh();r={blockedOn:null,target:r,priority:i};for(var l=0;l<bn.length&&i!==0&&i<bn[l].priority;l++);bn.splice(l,0,r),l===0&&bh(r)}};function Hc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function bl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ym(){}function vS(r,i,l,u,d){if(d){if(typeof u=="function"){var p=u;u=function(){var P=Dl(g);p.call(P)}}var g=Km(i,u,r,0,null,!1,!1,"",Ym);return r._reactRootContainer=g,r[un]=g.current,cs(r.nodeType===8?r.parentNode:r),Tr(),g}for(;d=r.lastChild;)r.removeChild(d);if(typeof u=="function"){var w=u;u=function(){var P=Dl(E);w.call(P)}}var E=Wc(r,0,!1,null,null,!1,!1,"",Ym);return r._reactRootContainer=E,r[un]=E.current,cs(r.nodeType===8?r.parentNode:r),Tr(function(){Ol(i,E,l,u)}),E}function Ml(r,i,l,u,d){var p=l._reactRootContainer;if(p){var g=p;if(typeof d=="function"){var w=d;d=function(){var E=Dl(g);w.call(E)}}Ol(i,g,r,d)}else g=vS(l,i,r,d,u);return Dl(g)}xh=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var l=Qi(i.pendingLanes);l!==0&&(pu(i,l|1),pt(i,Fe()),!(he&6)&&(gi=Fe()+500,Wn()))}break;case 13:Tr(function(){var u=hn(r,1);if(u!==null){var d=ot();Bt(u,r,1,d)}}),Bc(r,1)}},mu=function(r){if(r.tag===13){var i=hn(r,134217728);if(i!==null){var l=ot();Bt(i,r,134217728,l)}Bc(r,134217728)}},Ah=function(r){if(r.tag===13){var i=Kn(r),l=hn(r,i);if(l!==null){var u=ot();Bt(l,r,i,u)}Bc(r,i)}},Oh=function(){return ve},Dh=function(r,i){var l=ve;try{return ve=r,i()}finally{ve=l}},lu=function(r,i,l){switch(i){case"input":if(Za(r,l),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==r&&u.form===r.form){var d=Zo(u);if(!d)throw Error(n(90));rh(u),Za(u,d)}}}break;case"textarea":ah(r,l);break;case"select":i=l.value,i!=null&&Kr(r,!!l.multiple,i,!1)}},_h=bc,yh=Tr;var wS={usingClientEntryPoint:!1,Events:[hs,ri,Zo,mh,gh,bc]},Rs={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Sh(r),r===null?null:r.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{Lo=Fl.inject(ES),Xt=Fl}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS,mt.createPortal=function(r,i){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hc(i))throw Error(n(200));return yS(r,i,null,l)},mt.createRoot=function(r,i){if(!Hc(r))throw Error(n(299));var l=!1,u="",d=Qm;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=Wc(r,1,!1,null,null,l,!1,u,d),r[un]=i.current,cs(r.nodeType===8?r.parentNode:r),new $c(i)},mt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Sh(i),r=r===null?null:r.stateNode,r},mt.flushSync=function(r){return Tr(r)},mt.hydrate=function(r,i,l){if(!bl(i))throw Error(n(200));return Ml(null,r,i,!0,l)},mt.hydrateRoot=function(r,i,l){if(!Hc(r))throw Error(n(405));var u=l!=null&&l.hydratedSources||null,d=!1,p="",g=Qm;if(l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onRecoverableError!==void 0&&(g=l.onRecoverableError)),i=Km(i,null,r,1,l??null,d,!1,p,g),r[un]=i.current,cs(r),u)for(r=0;r<u.length;r++)l=u[r],d=l._getVersion,d=d(l._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[l,d]:i.mutableSourceEagerHydrationData.push(l,d);return new Ll(i)},mt.render=function(r,i,l){if(!bl(i))throw Error(n(200));return Ml(null,r,i,!1,l)},mt.unmountComponentAtNode=function(r){if(!bl(r))throw Error(n(40));return r._reactRootContainer?(Tr(function(){Ml(null,null,r,!1,function(){r._reactRootContainer=null,r[un]=null})}),!0):!1},mt.unstable_batchedUpdates=bc,mt.unstable_renderSubtreeIntoContainer=function(r,i,l,u){if(!bl(l))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Ml(r,i,l,!1,u)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var ig;function OS(){if(ig)return Kc.exports;ig=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kc.exports=AS(),Kc.exports}var sg;function DS(){if(sg)return Ul;sg=1;var t=OS();return Ul.createRoot=t.createRoot,Ul.hydrateRoot=t.hydrateRoot,Ul}var LS=DS(),Ns={},og;function bS(){if(og)return Ns;og=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.parse=c,Ns.serialize=m;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function c(v,C){const I=new a,A=v.length;if(A<2)return I;const x=(C==null?void 0:C.decode)||_;let O=0;do{const W=v.indexOf("=",O);if(W===-1)break;const L=v.indexOf(";",O),B=L===-1?A:L;if(W>B){O=v.lastIndexOf(";",W-1)+1;continue}const Y=f(v,O,W),J=h(v,W,Y),se=v.slice(Y,J);if(I[se]===void 0){let ee=f(v,W+1,B),fe=h(v,B,ee);const De=x(v.slice(ee,fe));I[se]=De}O=B+1}while(O<A);return I}function f(v,C,I){do{const A=v.charCodeAt(C);if(A!==32&&A!==9)return C}while(++C<I);return I}function h(v,C,I){for(;C>I;){const A=v.charCodeAt(--C);if(A!==32&&A!==9)return C+1}return I}function m(v,C,I){const A=(I==null?void 0:I.encode)||encodeURIComponent;if(!t.test(v))throw new TypeError(`argument name is invalid: ${v}`);const x=A(C);if(!e.test(x))throw new TypeError(`argument val is invalid: ${C}`);let O=v+"="+x;if(!I)return O;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);O+="; Max-Age="+I.maxAge}if(I.domain){if(!n.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);O+="; Domain="+I.domain}if(I.path){if(!s.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);O+="; Path="+I.path}if(I.expires){if(!y(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);O+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(O+="; HttpOnly"),I.secure&&(O+="; Secure"),I.partitioned&&(O+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return O}function _(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function y(v){return o.call(v)==="[object Date]"}return Ns}bS();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lg="popstate";function MS(t={}){function e(s,o){let{pathname:a,search:c,hash:f}=s.location;return Ed("",{pathname:a,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:qs(o)}return US(e,n,null,t)}function xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FS(){return Math.random().toString(36).substring(2,10)}function ag(t,e){return{usr:t.state,key:t.key,idx:e}}function Ed(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Di(e):e,state:n,key:e&&e.key||s||FS()}}function qs({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Di(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function US(t,e,n,s={}){let{window:o=document.defaultView,v5Compat:a=!1}=s,c=o.history,f="POP",h=null,m=_();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function _(){return(c.state||{idx:null}).idx}function y(){f="POP";let x=_(),O=x==null?null:x-m;m=x,h&&h({action:f,location:A.location,delta:O})}function v(x,O){f="PUSH";let W=Ed(A.location,x,O);m=_()+1;let L=ag(W,m),B=A.createHref(W);try{c.pushState(L,"",B)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;o.location.assign(B)}a&&h&&h({action:f,location:A.location,delta:1})}function C(x,O){f="REPLACE";let W=Ed(A.location,x,O);m=_();let L=ag(W,m),B=A.createHref(W);c.replaceState(L,"",B),a&&h&&h({action:f,location:A.location,delta:0})}function I(x){let O=o.location.origin!=="null"?o.location.origin:o.location.href,W=typeof x=="string"?x:qs(x);return W=W.replace(/ $/,"%20"),xe(O,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,O)}let A={get action(){return f},get location(){return t(o,c)},listen(x){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(lg,y),h=x,()=>{o.removeEventListener(lg,y),h=null}},createHref(x){return e(o,x)},createURL:I,encodeLocation(x){let O=I(x);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:v,replace:C,go(x){return c.go(x)}};return A}function U_(t,e,n="/"){return zS(t,e,n,!1)}function zS(t,e,n,s){let o=typeof e=="string"?Di(e):e,a=ar(o.pathname||"/",n);if(a==null)return null;let c=z_(t);jS(c);let f=null;for(let h=0;f==null&&h<c.length;++h){let m=JS(a);f=QS(c[h],m,s)}return f}function z_(t,e=[],n=[],s=""){let o=(a,c,f)=>{let h={relativePath:f===void 0?a.path||"":f,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};h.relativePath.startsWith("/")&&(xe(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let m=Sn([s,h.relativePath]),_=n.concat(h);a.children&&a.children.length>0&&(xe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),z_(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:KS(m,a.index),routesMeta:_})};return t.forEach((a,c)=>{var f;if(a.path===""||!((f=a.path)!=null&&f.includes("?")))o(a,c);else for(let h of j_(a.path))o(a,c,h)}),e}function j_(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return o?[a,""]:[a];let c=j_(s.join("/")),f=[];return f.push(...c.map(h=>h===""?a:[a,h].join("/"))),o&&f.push(...c),f.map(h=>t.startsWith("/")&&h===""?"/":h)}function jS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var WS=/^:[\w-]+$/,BS=3,$S=2,HS=1,VS=10,GS=-2,ug=t=>t==="*";function KS(t,e){let n=t.split("/"),s=n.length;return n.some(ug)&&(s+=GS),e&&(s+=$S),n.filter(o=>!ug(o)).reduce((o,a)=>o+(WS.test(a)?BS:a===""?HS:VS),s)}function qS(t,e){return t.length===e.length&&t.slice(0,-1).every((s,o)=>s===e[o])?t[t.length-1]-e[e.length-1]:0}function QS(t,e,n=!1){let{routesMeta:s}=t,o={},a="/",c=[];for(let f=0;f<s.length;++f){let h=s[f],m=f===s.length-1,_=a==="/"?e:e.slice(a.length)||"/",y=Zl({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},_),v=h.route;if(!y&&m&&n&&!s[s.length-1].route.index&&(y=Zl({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},_)),!y)return null;Object.assign(o,y.params),c.push({params:o,pathname:Sn([a,y.pathname]),pathnameBase:tC(Sn([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=Sn([a,y.pathnameBase]))}return c}function Zl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=YS(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((m,{paramName:_,isOptional:y},v)=>{if(_==="*"){let I=f[v]||"";c=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const C=f[v];return y&&!C?m[_]=void 0:m[_]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:c,pattern:t}}function YS(t,e=!1,n=!0){Kt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,h)=>(s.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function JS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ar(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function XS(t,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof t=="string"?Di(t):t;return{pathname:n?n.startsWith("/")?n:ZS(n,e):e,search:nC(s),hash:rC(o)}}function ZS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Yc(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jd(t){let e=eC(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Xd(t,e,n,s=!1){let o;typeof t=="string"?o=Di(t):(o={...t},xe(!o.pathname||!o.pathname.includes("?"),Yc("?","pathname","search",o)),xe(!o.pathname||!o.pathname.includes("#"),Yc("#","pathname","hash",o)),xe(!o.search||!o.search.includes("#"),Yc("#","search","hash",o)));let a=t===""||o.pathname==="",c=a?"/":o.pathname,f;if(c==null)f=n;else{let y=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;o.pathname=v.join("/")}f=y>=0?e[y]:"/"}let h=XS(o,f),m=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(m||_)&&(h.pathname+="/"),h}var Sn=t=>t.join("/").replace(/\/\/+/g,"/"),tC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var W_=["POST","PUT","PATCH","DELETE"];new Set(W_);var sC=["GET",...W_];new Set(sC);var Li=N.createContext(null);Li.displayName="DataRouter";var Na=N.createContext(null);Na.displayName="DataRouterState";var B_=N.createContext({isTransitioning:!1});B_.displayName="ViewTransition";var oC=N.createContext(new Map);oC.displayName="Fetchers";var lC=N.createContext(null);lC.displayName="Await";var Qt=N.createContext(null);Qt.displayName="Navigation";var fo=N.createContext(null);fo.displayName="Location";var an=N.createContext({outlet:null,matches:[],isDataRoute:!1});an.displayName="Route";var Zd=N.createContext(null);Zd.displayName="RouteError";function aC(t,{relative:e}={}){xe(bi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=N.useContext(Qt),{hash:o,pathname:a,search:c}=po(t,{relative:e}),f=a;return n!=="/"&&(f=a==="/"?n:Sn([n,a])),s.createHref({pathname:f,search:c,hash:o})}function bi(){return N.useContext(fo)!=null}function hr(){return xe(bi(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(fo).location}var $_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function H_(t){N.useContext(Qt).static||N.useLayoutEffect(t)}function ho(){let{isDataRoute:t}=N.useContext(an);return t?EC():uC()}function uC(){xe(bi(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Li),{basename:e,navigator:n}=N.useContext(Qt),{matches:s}=N.useContext(an),{pathname:o}=hr(),a=JSON.stringify(Jd(s)),c=N.useRef(!1);return H_(()=>{c.current=!0}),N.useCallback((h,m={})=>{if(Kt(c.current,$_),!c.current)return;if(typeof h=="number"){n.go(h);return}let _=Xd(h,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Sn([e,_.pathname])),(m.replace?n.replace:n.push)(_,m.state,m)},[e,n,a,o,t])}N.createContext(null);function po(t,{relative:e}={}){let{matches:n}=N.useContext(an),{pathname:s}=hr(),o=JSON.stringify(Jd(n));return N.useMemo(()=>Xd(t,JSON.parse(o),s,e==="path"),[t,o,s,e])}function cC(t,e){return V_(t,e)}function V_(t,e,n,s){var W;xe(bi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:a}=N.useContext(Qt),{matches:c}=N.useContext(an),f=c[c.length-1],h=f?f.params:{},m=f?f.pathname:"/",_=f?f.pathnameBase:"/",y=f&&f.route;{let L=y&&y.path||"";G_(m,!y||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let v=hr(),C;if(e){let L=typeof e=="string"?Di(e):e;xe(_==="/"||((W=L.pathname)==null?void 0:W.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${L.pathname}" was given in the \`location\` prop.`),C=L}else C=v;let I=C.pathname||"/",A=I;if(_!=="/"){let L=_.replace(/^\//,"").split("/");A="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let x=!a&&n&&n.matches&&n.matches.length>0?n.matches:U_(t,{pathname:A});Kt(y||x!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Kt(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=mC(x&&x.map(L=>Object.assign({},L,{params:Object.assign({},h,L.params),pathname:Sn([_,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?_:Sn([_,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),c,n,s);return e&&O?N.createElement(fo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},O):O}function dC(){let t=wC(),e=iC(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:a},"ErrorBoundary")," or"," ",N.createElement("code",{style:a},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:o},n):null,c)}var fC=N.createElement(dC,null),hC=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(an.Provider,{value:this.props.routeContext},N.createElement(Zd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pC({routeContext:t,match:e,children:n}){let s=N.useContext(Li);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(an.Provider,{value:t},n)}function mC(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=n==null?void 0:n.errors;if(a!=null){let h=o.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);xe(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,f=-1;if(n)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=h),m.route.id){let{loaderData:_,errors:y}=n,v=m.route.loader&&!_.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||v){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,m,_)=>{let y,v=!1,C=null,I=null;n&&(y=a&&m.route.id?a[m.route.id]:void 0,C=m.route.errorElement||fC,c&&(f<0&&_===0?(G_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,I=null):f===_&&(v=!0,I=m.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,_+1)),x=()=>{let O;return y?O=C:v?O=I:m.route.Component?O=N.createElement(m.route.Component,null):m.route.element?O=m.route.element:O=h,N.createElement(pC,{match:m,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:O})};return n&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?N.createElement(hC,{location:n.location,revalidation:n.revalidation,component:C,error:y,children:x(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):x()},null)}function ef(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gC(t){let e=N.useContext(Li);return xe(e,ef(t)),e}function _C(t){let e=N.useContext(Na);return xe(e,ef(t)),e}function yC(t){let e=N.useContext(an);return xe(e,ef(t)),e}function tf(t){let e=yC(t),n=e.matches[e.matches.length-1];return xe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function vC(){return tf("useRouteId")}function wC(){var s;let t=N.useContext(Zd),e=_C("useRouteError"),n=tf("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function EC(){let{router:t}=gC("useNavigate"),e=tf("useNavigate"),n=N.useRef(!1);return H_(()=>{n.current=!0}),N.useCallback(async(o,a={})=>{Kt(n.current,$_),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...a}))},[t,e])}var cg={};function G_(t,e,n){!e&&!cg[t]&&(cg[t]=!0,Kt(!1,n))}N.memo(SC);function SC({routes:t,future:e,state:n}){return V_(t,void 0,n,e)}function K_({to:t,replace:e,state:n,relative:s}){xe(bi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(Qt);Kt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=N.useContext(an),{pathname:c}=hr(),f=ho(),h=Xd(t,Jd(a),c,s==="path"),m=JSON.stringify(h);return N.useEffect(()=>{f(JSON.parse(m),{replace:e,state:n,relative:s})},[f,m,s,e,n]),null}function xr(t){xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CC({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:a=!1}){xe(!bi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:c,navigator:o,static:a,future:{}}),[c,o,a]);typeof n=="string"&&(n=Di(n));let{pathname:h="/",search:m="",hash:_="",state:y=null,key:v="default"}=n,C=N.useMemo(()=>{let I=ar(h,c);return I==null?null:{location:{pathname:I,search:m,hash:_,state:y,key:v},navigationType:s}},[c,h,m,_,y,v,s]);return Kt(C!=null,`<Router basename="${c}"> is not able to match the URL "${h}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:N.createElement(Qt.Provider,{value:f},N.createElement(fo.Provider,{children:e,value:C}))}function IC({children:t,location:e}){return cC(Sd(t),e)}function Sd(t,e=[]){let n=[];return N.Children.forEach(t,(s,o)=>{if(!N.isValidElement(s))return;let a=[...e,o];if(s.type===N.Fragment){n.push.apply(n,Sd(s.props.children,a));return}xe(s.type===xr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Sd(s.props.children,a)),n.push(c)}),n}var Hl="get",Vl="application/x-www-form-urlencoded";function xa(t){return t!=null&&typeof t.tagName=="string"}function kC(t){return xa(t)&&t.tagName.toLowerCase()==="button"}function TC(t){return xa(t)&&t.tagName.toLowerCase()==="form"}function RC(t){return xa(t)&&t.tagName.toLowerCase()==="input"}function PC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NC(t,e){return t.button===0&&(!e||e==="_self")&&!PC(t)}var zl=null;function xC(){if(zl===null)try{new FormData(document.createElement("form"),0),zl=!1}catch{zl=!0}return zl}var AC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jc(t){return t!=null&&!AC.has(t)?(Kt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vl}"`),null):t}function OC(t,e){let n,s,o,a,c;if(TC(t)){let f=t.getAttribute("action");s=f?ar(f,e):null,n=t.getAttribute("method")||Hl,o=Jc(t.getAttribute("enctype"))||Vl,a=new FormData(t)}else if(kC(t)||RC(t)&&(t.type==="submit"||t.type==="image")){let f=t.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||f.getAttribute("action");if(s=h?ar(h,e):null,n=t.getAttribute("formmethod")||f.getAttribute("method")||Hl,o=Jc(t.getAttribute("formenctype"))||Jc(f.getAttribute("enctype"))||Vl,a=new FormData(f,t),!xC()){let{name:m,type:_,value:y}=t;if(_==="image"){let v=m?`${m}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else m&&a.append(m,y)}}else{if(xa(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Hl,s=null,o=Vl,c=t}return a&&o==="text/plain"&&(c=a,a=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:a,body:c}}function nf(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function DC(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function bC(t,e,n){let s=await Promise.all(t.map(async o=>{let a=e.routes[o.route.id];if(a){let c=await DC(a,n);return c.links?c.links():[]}return[]}));return zC(s.flat(1).filter(LC).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function dg(t,e,n,s,o,a){let c=(h,m)=>n[m]?h.route.id!==n[m].route.id:!0,f=(h,m)=>{var _;return n[m].pathname!==h.pathname||((_=n[m].route.path)==null?void 0:_.endsWith("*"))&&n[m].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,m)=>c(h,m)||f(h,m)):a==="data"?e.filter((h,m)=>{var y;let _=s.routes[h.route.id];if(!_||!_.hasLoader)return!1;if(c(h,m)||f(h,m))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function MC(t,e){return FC(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function FC(t){return[...new Set(t)]}function UC(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function zC(t,e){let n=new Set;return new Set(e),t.reduce((s,o)=>{let a=JSON.stringify(UC(o));return n.has(a)||(n.add(a),s.push({key:a,link:o})),s},[])}function jC(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function WC(){let t=N.useContext(Li);return nf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function BC(){let t=N.useContext(Na);return nf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var rf=N.createContext(void 0);rf.displayName="FrameworkContext";function q_(){let t=N.useContext(rf);return nf(t,"You must render this element inside a <HydratedRouter> element"),t}function $C(t,e){let n=N.useContext(rf),[s,o]=N.useState(!1),[a,c]=N.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:m,onMouseLeave:_,onTouchStart:y}=e,v=N.useRef(null);N.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let A=O=>{O.forEach(W=>{c(W.isIntersecting)})},x=new IntersectionObserver(A,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[t]),N.useEffect(()=>{if(s){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[s]);let C=()=>{o(!0)},I=()=>{o(!1),c(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:xs(f,C),onBlur:xs(h,I),onMouseEnter:xs(m,C),onMouseLeave:xs(_,I),onTouchStart:xs(y,C)}]:[!1,v,{}]}function xs(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function HC({page:t,...e}){let{router:n}=WC(),s=N.useMemo(()=>U_(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?N.createElement(GC,{page:t,matches:s,...e}):null}function VC(t){let{manifest:e,routeModules:n}=q_(),[s,o]=N.useState([]);return N.useEffect(()=>{let a=!1;return bC(t,e,n).then(c=>{a||o(c)}),()=>{a=!0}},[t,e,n]),s}function GC({page:t,matches:e,...n}){let s=hr(),{manifest:o,routeModules:a}=q_(),{loaderData:c,matches:f}=BC(),h=N.useMemo(()=>dg(t,e,f,o,s,"data"),[t,e,f,o,s]),m=N.useMemo(()=>dg(t,e,f,o,s,"assets"),[t,e,f,o,s]),_=N.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let C=new Set,I=!1;if(e.forEach(x=>{var W;let O=o.routes[x.route.id];!O||!O.hasLoader||(!h.some(L=>L.route.id===x.route.id)&&x.route.id in c&&((W=a[x.route.id])!=null&&W.shouldRevalidate)||O.hasClientLoader?I=!0:C.add(x.route.id))}),C.size===0)return[];let A=jC(t);return I&&C.size>0&&A.searchParams.set("_routes",e.filter(x=>C.has(x.route.id)).map(x=>x.route.id).join(",")),[A.pathname+A.search]},[c,s,o,h,e,t,a]),y=N.useMemo(()=>MC(m,o),[m,o]),v=VC(m);return N.createElement(N.Fragment,null,_.map(C=>N.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),y.map(C=>N.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),v.map(({key:C,link:I})=>N.createElement("link",{key:C,...I})))}function KC(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Q_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Q_&&(window.__reactRouterVersion="7.1.5")}catch{}function qC({basename:t,children:e,window:n}){let s=N.useRef();s.current==null&&(s.current=MS({window:n,v5Compat:!0}));let o=s.current,[a,c]=N.useState({action:o.action,location:o.location}),f=N.useCallback(h=>{N.startTransition(()=>c(h))},[c]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.createElement(CC,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:o})}var Y_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lr=N.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:a,replace:c,state:f,target:h,to:m,preventScrollReset:_,viewTransition:y,...v},C){let{basename:I}=N.useContext(Qt),A=typeof m=="string"&&Y_.test(m),x,O=!1;if(typeof m=="string"&&A&&(x=m,Q_))try{let fe=new URL(window.location.href),De=m.startsWith("//")?new URL(fe.protocol+m):new URL(m),Rt=ar(De.pathname,I);De.origin===fe.origin&&Rt!=null?m=Rt+De.search+De.hash:O=!0}catch{Kt(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=aC(m,{relative:o}),[L,B,Y]=$C(s,v),J=XC(m,{replace:c,state:f,target:h,preventScrollReset:_,relative:o,viewTransition:y});function se(fe){e&&e(fe),fe.defaultPrevented||J(fe)}let ee=N.createElement("a",{...v,...Y,href:x||W,onClick:O||a?e:se,ref:KC(C,B),target:h,"data-discover":!A&&n==="render"?"true":void 0});return L&&!A?N.createElement(N.Fragment,null,ee,N.createElement(HC,{page:W})):ee});Lr.displayName="Link";var QC=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:a,to:c,viewTransition:f,children:h,...m},_){let y=po(c,{relative:m.relative}),v=hr(),C=N.useContext(Na),{navigator:I,basename:A}=N.useContext(Qt),x=C!=null&&rI(y)&&f===!0,O=I.encodeLocation?I.encodeLocation(y).pathname:y.pathname,W=v.pathname,L=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(W=W.toLowerCase(),L=L?L.toLowerCase():null,O=O.toLowerCase()),L&&A&&(L=ar(L,A)||L);const B=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let Y=W===O||!o&&W.startsWith(O)&&W.charAt(B)==="/",J=L!=null&&(L===O||!o&&L.startsWith(O)&&L.charAt(O.length)==="/"),se={isActive:Y,isPending:J,isTransitioning:x},ee=Y?e:void 0,fe;typeof s=="function"?fe=s(se):fe=[s,Y?"active":null,J?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let De=typeof a=="function"?a(se):a;return N.createElement(Lr,{...m,"aria-current":ee,className:fe,ref:_,style:De,to:c,viewTransition:f},typeof h=="function"?h(se):h)});QC.displayName="NavLink";var YC=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:a,method:c=Hl,action:f,onSubmit:h,relative:m,preventScrollReset:_,viewTransition:y,...v},C)=>{let I=tI(),A=nI(f,{relative:m}),x=c.toLowerCase()==="get"?"get":"post",O=typeof f=="string"&&Y_.test(f),W=L=>{if(h&&h(L),L.defaultPrevented)return;L.preventDefault();let B=L.nativeEvent.submitter,Y=(B==null?void 0:B.getAttribute("formmethod"))||c;I(B||L.currentTarget,{fetcherKey:e,method:Y,navigate:n,replace:o,state:a,relative:m,preventScrollReset:_,viewTransition:y})};return N.createElement("form",{ref:C,method:x,action:A,onSubmit:s?h:W,...v,"data-discover":!O&&t==="render"?"true":void 0})});YC.displayName="Form";function JC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J_(t){let e=N.useContext(Li);return xe(e,JC(t)),e}function XC(t,{target:e,replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:c}={}){let f=ho(),h=hr(),m=po(t,{relative:a});return N.useCallback(_=>{if(NC(_,e)){_.preventDefault();let y=n!==void 0?n:qs(h)===qs(m);f(t,{replace:y,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[h,f,m,n,s,e,t,o,a,c])}var ZC=0,eI=()=>`__${String(++ZC)}__`;function tI(){let{router:t}=J_("useSubmit"),{basename:e}=N.useContext(Qt),n=vC();return N.useCallback(async(s,o={})=>{let{action:a,method:c,encType:f,formData:h,body:m}=OC(s,e);if(o.navigate===!1){let _=o.fetcherKey||eI();await t.fetch(_,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||f,flushSync:o.flushSync})}else await t.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function nI(t,{relative:e}={}){let{basename:n}=N.useContext(Qt),s=N.useContext(an);xe(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),a={...po(t||".",{relative:e})},c=hr();if(t==null){a.search=c.search;let f=new URLSearchParams(a.search),h=f.getAll("index");if(h.some(_=>_==="")){f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let _=f.toString();a.search=_?`?${_}`:""}}return(!t||t===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Sn([n,a.pathname])),qs(a)}function rI(t,e={}){let n=N.useContext(B_);xe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=J_("useViewTransitionState"),o=po(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=ar(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=ar(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Zl(o.pathname,c)!=null||Zl(o.pathname,a)!=null}new TextEncoder;var _n=(t=>(t.ADMIN="ADMIN",t.USER="USER",t))(_n||{}),fg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw Mi(e)},Mi=function(t){return new Error("Firebase Database ("+X_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},iI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const o=t[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const a=t[n++];e[s++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=t[n++],c=t[n++],f=t[n++],h=((o&7)<<18|(a&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(h>>10)),e[s++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],c=t[n++];e[s++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},sf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<t.length;o+=3){const a=t[o],c=o+1<t.length,f=c?t[o+1]:0,h=o+2<t.length,m=h?t[o+2]:0,_=a>>2,y=(a&3)<<4|f>>4;let v=(f&15)<<2|m>>6,C=m&63;h||(C=64,c||(v=64)),s.push(n[_],n[y],n[v],n[C])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Z_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<t.length;){const a=n[t.charAt(o++)],f=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const y=o<t.length?n[t.charAt(o)]:64;if(++o,a==null||f==null||m==null||y==null)throw new sI;const v=a<<2|f>>4;if(s.push(v),m!==64){const C=f<<4&240|m>>2;if(s.push(C),y!==64){const I=m<<6&192|y;s.push(I)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ey=function(t){const e=Z_(t);return sf.encodeByteArray(e,!0)},ea=function(t){return ey(t).replace(/\./g,"")},ta=function(t){try{return sf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){return ty(void 0,t)}function ty(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!lI(n)||(t[n]=ty(t[n],e[n]));return t}function lI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=()=>aI().__FIREBASE_DEFAULTS__,cI=()=>{if(typeof process>"u"||typeof fg>"u")return;const t=fg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ta(t[1]);return e&&JSON.parse(e)},of=()=>{try{return uI()||cI()||dI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ny=t=>{var e,n;return(n=(e=of())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fI=t=>{const e=ny(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ry=()=>{var t;return(t=of())===null||t===void 0?void 0:t.config},iy=t=>{var e;return(e=of())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ea(JSON.stringify(n)),ea(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function pI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gI(){const t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _I(){return X_.NODE_ADMIN===!0}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function vI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="FirebaseError";class pr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=wI,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?EI(a,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new pr(o,f,s)}}function EI(t,e){return t.replace(SI,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const SI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){return JSON.parse(t)}function Be(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=function(t){let e={},n={},s={},o="";try{const a=t.split(".");e=Qs(ta(a[0])||""),n=Qs(ta(a[1])||""),o=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},CI=function(t){const e=oy(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},II=function(t){const e=oy(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ri(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Cd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function na(t,e,n){const s={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(s[o]=e.call(n,t[o],o,t));return s}function ra(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const a=t[o],c=e[o];if(hg(a)&&hg(c)){if(!ra(a,c))return!1}else if(a!==c)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function hg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Fs(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,a]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Us(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)s[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)s[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const v=s[y-3]^s[y-8]^s[y-14]^s[y-16];s[y]=(v<<1|v>>>31)&4294967295}let o=this.chain_[0],a=this.chain_[1],c=this.chain_[2],f=this.chain_[3],h=this.chain_[4],m,_;for(let y=0;y<80;y++){y<40?y<20?(m=f^a&(c^f),_=1518500249):(m=a^c^f,_=1859775393):y<60?(m=a&c|f&(a|c),_=2400959708):(m=a^c^f,_=3395469782);const v=(o<<5|o>>>27)+m+h+_+s[y]&4294967295;h=f,f=c,c=(a<<30|a>>>2)&4294967295,a=o,o=v}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const a=this.buf_;let c=this.inbuf_;for(;o<n;){if(c===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(a[c]=e.charCodeAt(o),++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}else for(;o<n;)if(a[c]=e[o],++c,++o,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[o]>>a&255,++s;return e}}function TI(t,e){const n=new RI(t,e);return n.subscribe.bind(n)}class RI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");PI(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Xc),o.error===void 0&&(o.error=Xc),o.complete===void 0&&(o.complete=Xc);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xc(){}function af(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let o=t.charCodeAt(s);if(o>=55296&&o<=56319){const a=o-55296;s++,z(s<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(s)-56320;o=65536+(a<<10)+c}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Oa=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xI=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Aa;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OI(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:o});s.resolve(a)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);s===f&&c.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),a=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AI(t){return t===Ar?void 0:t}function OI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const LI={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},bI=we.INFO,MI={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},FI=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),o=MI[e];if(o)console[o](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uf=class{constructor(e){this.name=e,this._logLevel=bI,this._logHandler=FI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}};const UI=(t,e)=>e.some(n=>t instanceof n);let pg,mg;function zI(){return pg||(pg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jI(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ly=new WeakMap,Id=new WeakMap,ay=new WeakMap,Zc=new WeakMap,cf=new WeakMap;function WI(t){const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(nr(t.result)),o()},c=()=>{s(t.error),o()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&ly.set(n,t)}).catch(()=>{}),cf.set(e,t),e}function BI(t){if(Id.has(t))return;const e=new Promise((n,s)=>{const o=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),o()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Id.set(t,e)}let kd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Id.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ay.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $I(t){kd=t(kd)}function HI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(ed(this),e,...n);return ay.set(s,e.sort?e.sort():[e]),nr(s)}:jI().includes(t)?function(...e){return t.apply(ed(this),e),nr(ly.get(this))}:function(...e){return nr(t.apply(ed(this),e))}}function VI(t){return typeof t=="function"?HI(t):(t instanceof IDBTransaction&&BI(t),UI(t,zI())?new Proxy(t,kd):t)}function nr(t){if(t instanceof IDBRequest)return WI(t);if(Zc.has(t))return Zc.get(t);const e=VI(t);return e!==t&&(Zc.set(t,e),cf.set(e,t)),e}const ed=t=>cf.get(t);function GI(t,e,{blocked:n,upgrade:s,blocking:o,terminated:a}={}){const c=indexedDB.open(t,e),f=nr(c);return s&&c.addEventListener("upgradeneeded",h=>{s(nr(c.result),h.oldVersion,h.newVersion,nr(c.transaction),h)}),n&&c.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),f.then(h=>{a&&h.addEventListener("close",()=>a()),o&&h.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const KI=["get","getKey","getAll","getAllKeys","count"],qI=["put","add","delete","clear"],td=new Map;function gg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(td.get(e))return td.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=qI.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||KI.includes(n)))return;const a=async function(c,...f){const h=this.transaction(c,o?"readwrite":"readonly");let m=h.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[n](...f),o&&h.done]))[0]};return td.set(e,a),a}$I(t=>({...t,get:(e,n,s)=>gg(e,n)||t.get(e,n,s),has:(e,n)=>!!gg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YI(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function YI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Td="@firebase/app",_g="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new uf("@firebase/app"),JI="@firebase/app-compat",XI="@firebase/analytics-compat",ZI="@firebase/analytics",ek="@firebase/app-check-compat",tk="@firebase/app-check",nk="@firebase/auth",rk="@firebase/auth-compat",ik="@firebase/database",sk="@firebase/data-connect",ok="@firebase/database-compat",lk="@firebase/functions",ak="@firebase/functions-compat",uk="@firebase/installations",ck="@firebase/installations-compat",dk="@firebase/messaging",fk="@firebase/messaging-compat",hk="@firebase/performance",pk="@firebase/performance-compat",mk="@firebase/remote-config",gk="@firebase/remote-config-compat",_k="@firebase/storage",yk="@firebase/storage-compat",vk="@firebase/firestore",wk="@firebase/vertexai",Ek="@firebase/firestore-compat",Sk="firebase",Ck="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",Ik={[Td]:"fire-core",[JI]:"fire-core-compat",[ZI]:"fire-analytics",[XI]:"fire-analytics-compat",[tk]:"fire-app-check",[ek]:"fire-app-check-compat",[nk]:"fire-auth",[rk]:"fire-auth-compat",[ik]:"fire-rtdb",[sk]:"fire-data-connect",[ok]:"fire-rtdb-compat",[lk]:"fire-fn",[ak]:"fire-fn-compat",[uk]:"fire-iid",[ck]:"fire-iid-compat",[dk]:"fire-fcm",[fk]:"fire-fcm-compat",[hk]:"fire-perf",[pk]:"fire-perf-compat",[mk]:"fire-rc",[gk]:"fire-rc-compat",[_k]:"fire-gcs",[yk]:"fire-gcs-compat",[vk]:"fire-fst",[Ek]:"fire-fst-compat",[wk]:"fire-vertex","fire-js":"fire-js",[Sk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new Map,kk=new Map,Pd=new Map;function yg(t,e){try{t.container.addComponent(e)}catch(n){Tn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pi(t){const e=t.name;if(Pd.has(e))return Tn.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,t);for(const n of ia.values())yg(n,t);for(const n of kk.values())yg(n,t);return!0}function df(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rr=new mo("app","Firebase",Tk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=Ck;function uy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Rd,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw rr.create("bad-app-name",{appName:String(o)});if(n||(n=ry()),!n)throw rr.create("no-options");const a=ia.get(o);if(a){if(ra(n,a.options)&&ra(s,a.config))return a;throw rr.create("duplicate-app",{appName:o})}const c=new DI(o);for(const h of Pd.values())c.addComponent(h);const f=new Rk(n,s,c);return ia.set(o,f),f}function cy(t=Rd){const e=ia.get(t);if(!e&&t===Rd&&ry())return uy();if(!e)throw rr.create("no-app",{appName:t});return e}function ir(t,e,n){var s;let o=(s=Ik[t])!==null&&s!==void 0?s:t;n&&(o+=`-${n}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tn.warn(f.join(" "));return}Pi(new Fr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="firebase-heartbeat-database",Nk=1,Ys="firebase-heartbeat-store";let nd=null;function dy(){return nd||(nd=GI(Pk,Nk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ys)}catch(n){console.warn(n)}}}}).catch(t=>{throw rr.create("idb-open",{originalErrorMessage:t.message})})),nd}async function xk(t){try{const n=(await dy()).transaction(Ys),s=await n.objectStore(Ys).get(fy(t));return await n.done,s}catch(e){if(e instanceof pr)Tn.warn(e.message);else{const n=rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tn.warn(n.message)}}}async function vg(t,e){try{const s=(await dy()).transaction(Ys,"readwrite");await s.objectStore(Ys).put(e,fy(t)),await s.done}catch(n){if(n instanceof pr)Tn.warn(n.message);else{const s=rr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tn.warn(s.message)}}}function fy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=1024,Ok=30;class Dk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bk(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=wg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>Ok){const c=Mk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Tn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wg(),{heartbeatsToSend:s,unsentEntries:o}=Lk(this._heartbeatsCache.heartbeats),a=ea(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Tn.warn(n),""}}}function wg(){return new Date().toISOString().substring(0,10)}function Lk(t,e=Ak){const n=[];let s=t.slice();for(const o of t){const a=n.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Eg(n)>e){a.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Eg(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?vI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return vg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return vg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Eg(t){return ea(JSON.stringify({version:2,heartbeats:t})).length}function Mk(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){Pi(new Fr("platform-logger",e=>new QI(e),"PRIVATE")),Pi(new Fr("heartbeat",e=>new Dk(e),"PRIVATE")),ir(Td,_g,t),ir(Td,_g,"esm2017"),ir("fire-js","")}Fk("");function ff(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n}function hy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Uk=hy,py=new mo("auth","Firebase",hy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new uf("@firebase/auth");function zk(t,...e){sa.logLevel<=we.WARN&&sa.warn(`Auth (${Ui}): ${t}`,...e)}function Gl(t,...e){sa.logLevel<=we.ERROR&&sa.error(`Auth (${Ui}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,...e){throw hf(t,...e)}function sn(t,...e){return hf(t,...e)}function my(t,e,n){const s=Object.assign(Object.assign({},Uk()),{[e]:n});return new mo("auth","Firebase",s).create(e,{appName:t.name})}function Cn(t){return my(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hf(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return py.create(t,...e)}function re(t,e,...n){if(!t)throw hf(e,...n)}function yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gl(e),new Error(e)}function Rn(t,e){t||yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jk(){return Sg()==="http:"||Sg()==="https:"}function Sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jk()||mI()||"connection"in navigator)?navigator.onLine:!0}function Bk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.shortDelay=e,this.longDelay=n,Rn(n>e,"Short delay should be less than long delay!"),this.isMobile=lf()||sy()}get(){return Wk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(t,e){Rn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new go(3e4,6e4);function mr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gr(t,e,n,s,o={}){return _y(t,o,async()=>{let a={},c={};s&&(e==="GET"?c=s:a={body:JSON.stringify(s)});const f=Fi(Object.assign({key:t.config.apiKey},c)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:h},a);return pI()||(m.referrerPolicy="no-referrer"),gy.fetch()(yy(t,t.config.apiHost,n,f),m)})}async function _y(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},$k),e);try{const o=new Gk(t),a=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw jl(t,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const f=a.ok?c.errorMessage:c.error.message,[h,m]=f.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw jl(t,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw jl(t,"email-already-in-use",c);if(h==="USER_DISABLED")throw jl(t,"user-disabled",c);const _=s[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw my(t,_,m);qt(t,_)}}catch(o){if(o instanceof pr)throw o;qt(t,"network-request-failed",{message:String(o)})}}async function _o(t,e,n,s,o={}){const a=await gr(t,e,n,s,o);return"mfaPendingCredential"in a&&qt(t,"multi-factor-auth-required",{_serverResponse:a}),a}function yy(t,e,n,s){const o=`${e}${n}?${s}`;return t.config.emulator?pf(t.config,o):`${t.config.apiScheme}://${o}`}function Vk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(sn(this.auth,"network-request-failed")),Hk.get())})}}function jl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=sn(t,e,s);return o.customData._tokenResponse=n,o}function Cg(t){return t!==void 0&&t.enterprise!==void 0}class Kk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Vk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function qk(t,e){return gr(t,"GET","/v2/recaptchaConfig",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(t,e){return gr(t,"POST","/v1/accounts:delete",e)}async function vy(t,e){return gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Yk(t,e=!1){const n=it(t),s=await n.getIdToken(e),o=mf(s);re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a==null?void 0:a.sign_in_provider;return{claims:o,token:s,authTime:js(rd(o.auth_time)),issuedAtTime:js(rd(o.iat)),expirationTime:js(rd(o.exp)),signInProvider:c||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function rd(t){return Number(t)*1e3}function mf(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const o=ta(n);return o?JSON.parse(o):(Gl("Failed to decode base64 JWT payload"),null)}catch(o){return Gl("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Ig(t){const e=mf(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof pr&&Jk(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function Jk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=js(this.lastLoginAt),this.creationTime=js(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oa(t){var e;const n=t.auth,s=await t.getIdToken(),o=await Js(t,vy(n,{idToken:s}));re(o==null?void 0:o.users.length,n,"internal-error");const a=o.users[0];t._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?wy(a.providerUserInfo):[],f=eT(t.providerData,c),h=t.isAnonymous,m=!(t.email&&a.passwordHash)&&!(f!=null&&f.length),_=h?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:f,metadata:new xd(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(t,y)}async function Zk(t){const e=it(t);await oa(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eT(t,e){return[...t.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function wy(t){return t.map(e=>{var{providerId:n}=e,s=ff(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(t,e){const n=await _y(t,{},async()=>{const s=Fi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=t.config,c=yy(t,o,"/v1/token",`key=${a}`),f=await t._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",gy.fetch()(c,{method:"POST",headers:f,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nT(t,e){return gr(t,"POST","/v2/accounts:revokeToken",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ig(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=Ig(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:a}=await tT(e,n);this.updateTokensAndExpiration(s,o,Number(a))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:a}=n,c=new Ei;return s&&(re(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(re(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(re(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,a=ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new xd(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Js(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Yk(this,e)}reload(){return Zk(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await oa(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(Cn(this.auth));const e=await this.getIdToken();return await Js(this,Qk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,a,c,f,h,m,_;const y=(s=n.displayName)!==null&&s!==void 0?s:void 0,v=(o=n.email)!==null&&o!==void 0?o:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,I=(c=n.photoURL)!==null&&c!==void 0?c:void 0,A=(f=n.tenantId)!==null&&f!==void 0?f:void 0,x=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,O=(m=n.createdAt)!==null&&m!==void 0?m:void 0,W=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:L,emailVerified:B,isAnonymous:Y,providerData:J,stsTokenManager:se}=n;re(L&&se,e,"internal-error");const ee=Ei.fromJSON(this.name,se);re(typeof L=="string",e,"internal-error"),Jn(y,e.name),Jn(v,e.name),re(typeof B=="boolean",e,"internal-error"),re(typeof Y=="boolean",e,"internal-error"),Jn(C,e.name),Jn(I,e.name),Jn(A,e.name),Jn(x,e.name),Jn(O,e.name),Jn(W,e.name);const fe=new vn({uid:L,auth:e,email:v,emailVerified:B,displayName:y,isAnonymous:Y,photoURL:I,phoneNumber:C,tenantId:A,stsTokenManager:ee,createdAt:O,lastLoginAt:W});return J&&Array.isArray(J)&&(fe.providerData=J.map(De=>Object.assign({},De))),x&&(fe._redirectEventId=x),fe}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ei;o.updateFromServerResponse(n);const a=new vn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await oa(a),a}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];re(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?wy(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Ei;f.updateFromIdToken(s);const h=new vn({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=new Map;function wn(t){Rn(t instanceof Function,"Expected a class definition");let e=kg.get(t);return e?(Rn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ey.type="NONE";const Tg=Ey;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kl(t,e,n){return`firebase:${t}:${e}:${n}`}class Si{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:a}=this.auth;this.fullUserKey=Kl(this.userKey,o.apiKey,a),this.fullPersistenceKey=Kl("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Si(wn(Tg),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=o[0]||wn(Tg);const c=Kl(s,e.config.apiKey,e.name);let f=null;for(const m of n)try{const _=await m._get(c);if(_){const y=vn._fromJSON(e,_);m!==a&&(f=y),a=m;break}}catch{}const h=o.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Si(a,e,s):(a=h[0],f&&await a._set(c,f.toJSON()),await Promise.all(n.map(async m=>{if(m!==a)try{await m._remove(c)}catch{}})),new Si(a,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ky(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ry(e))return"Blackberry";if(Py(e))return"Webos";if(Cy(e))return"Safari";if((e.includes("chrome/")||Iy(e))&&!e.includes("edge/"))return"Chrome";if(Ty(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Sy(t=at()){return/firefox\//i.test(t)}function Cy(t=at()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iy(t=at()){return/crios\//i.test(t)}function ky(t=at()){return/iemobile/i.test(t)}function Ty(t=at()){return/android/i.test(t)}function Ry(t=at()){return/blackberry/i.test(t)}function Py(t=at()){return/webos/i.test(t)}function gf(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rT(t=at()){var e;return gf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iT(){return gI()&&document.documentMode===10}function Ny(t=at()){return gf(t)||Ty(t)||Py(t)||Ry(t)||/windows phone/i.test(t)||ky(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t,e=[]){let n;switch(t){case"Browser":n=Rg(at());break;case"Worker":n=`${Rg(at())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ui}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=a=>new Promise((c,f)=>{try{const h=e(a);c(h)}catch(h){f(h)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(t,e={}){return gr(t,"GET","/v2/passwordPolicy",mr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=6;class aT{constructor(e){var n,s,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:lT,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,a,c,f;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(s=h.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(o=h.containsLowercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(a=h.containsUppercaseLetter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(f=h.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),h}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pg(this),this.idTokenSubscription=new Pg(this),this.beforeStateQueue=new sT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=py,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wn(n)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await Si.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vy(this,{idToken:e}),s=await vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Lt(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=o==null?void 0:o._redirectEventId,h=await this.tryRedirectSignIn(e);(!c||c===f)&&(h!=null&&h.user)&&(o=h.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oa(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(Cn(this));const n=e?it(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(Cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(Cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oT(this),n=new aT(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await nT(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wn(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Si.create(this,[wn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(f,this,"internal-error"),f.then(()=>{c||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,s,o);return()=>{c=!0,h()}}else{const h=e.addObserver(n);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vr(t){return it(t)}class Pg{constructor(e){this.auth=e,this.observer=null,this.addObserver=TI(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Da={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cT(t){Da=t}function Ay(t){return Da.loadJS(t)}function dT(){return Da.recaptchaEnterpriseScript}function fT(){return Da.gapiScript}function hT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pT{constructor(){this.enterprise=new mT}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class mT{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const gT="recaptcha-enterprise",Oy="NO_RECAPTCHA";class _T{constructor(e){this.type=gT,this.auth=Vr(e)}async verify(e="verify",n=!1){async function s(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,f)=>{qk(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new Kk(h);return a.tenantId==null?a._agentRecaptchaConfig=m:a._tenantRecaptchaConfigs[a.tenantId]=m,c(m.siteKey)}}).catch(h=>{f(h)})})}function o(a,c,f){const h=window.grecaptcha;Cg(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(m=>{c(m)}).catch(()=>{c(Oy)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pT().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{s(this.auth).then(f=>{if(!n&&Cg(window.grecaptcha))o(f,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=dT();h.length!==0&&(h+=f),Ay(h).then(()=>{o(f,a,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function Ng(t,e,n,s=!1,o=!1){const a=new _T(t);let c;if(o)c=Oy;else try{c=await a.verify(n)}catch{c=await a.verify(n,!0)}const f=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const h=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const h=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ad(t,e,n,s,o){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ng(t,e,n,n==="getOobCode");return s(t,c)}else return s(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ng(t,e,n,n==="getOobCode");return s(t,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){const n=df(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),a=n.getOptions();if(ra(a,e??{}))return o;qt(o,"already-initialized")}return n.initialize({options:e})}function vT(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(wn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function wT(t,e,n){const s=Vr(t);re(s._canInitEmulator,s,"emulator-config-failed"),re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,a=Dy(e),{host:c,port:f}=ET(e),h=f===null?"":`:${f}`;s.config.emulator={url:`${a}//${c}${h}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:c,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),ST()}function Dy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ET(t){const e=Dy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const a=o[1];return{host:a,port:xg(s.substr(a.length+1))}}else{const[a,c]=s.split(":");return{host:a,port:xg(c)}}}function xg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ST(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yn("not implemented")}_getIdTokenResponse(e){return yn("not implemented")}_linkToIdToken(e,n){return yn("not implemented")}_getReauthenticationResolver(e){return yn("not implemented")}}async function CT(t,e){return gr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(t,e){return _o(t,"POST","/v1/accounts:signInWithPassword",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(t,e){return _o(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}async function TT(t,e){return _o(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends _f{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Xs(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Xs(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ad(e,n,"signInWithPassword",IT);case"emailLink":return kT(e,{email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ad(e,s,"signUpPassword",CT);case"emailLink":return TT(e,{idToken:n,email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ci(t,e){return _o(t,"POST","/v1/accounts:signInWithIdp",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="http://localhost";class Ur extends _f{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,a=ff(n,["providerId","signInMethod"]);if(!s||!o)return null;const c=new Ur(s,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const n=this.buildRequest();return Ci(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ci(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ci(e,n)}buildRequest(){const e={requestUri:RT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NT(t){const e=Fs(Us(t)).link,n=e?Fs(Us(e)).deep_link_id:null,s=Fs(Us(t)).deep_link_id;return(s?Fs(Us(s)).link:null)||s||n||e||t}class yf{constructor(e){var n,s,o,a,c,f;const h=Fs(Us(e)),m=(n=h.apiKey)!==null&&n!==void 0?n:null,_=(s=h.oobCode)!==null&&s!==void 0?s:null,y=PT((o=h.mode)!==null&&o!==void 0?o:null);re(m&&_&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=_,this.continueUrl=(a=h.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=h.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(f=h.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const n=NT(e);try{return new yf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(){this.providerId=zi.PROVIDER_ID}static credential(e,n){return Xs._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=yf.parseLink(n);return re(s,"argument-error"),Xs._fromEmailAndCode(e,s.code,s.tenantId)}}zi.PROVIDER_ID="password";zi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Ly{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends yo{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xn.credential(e.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Zn.credential(n,s)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends yo{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends yo{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return tr.credential(n,s)}catch{return null}}}tr.TWITTER_SIGN_IN_METHOD="twitter.com";tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,e){return _o(t,"POST","/v1/accounts:signUp",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const a=await vn._fromIdTokenResponse(e,s,o),c=Ag(s);return new zr({user:a,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Ag(s);return new zr({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Ag(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends pr{constructor(e,n,s,o){var a;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,la.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new la(e,n,s,o)}}function by(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?la._fromErrorAndOperation(t,a,e,s):a})}async function AT(t,e,n=!1){const s=await Js(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zr._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(t,e,n=!1){const{auth:s}=t;if(Lt(s.app))return Promise.reject(Cn(s));const o="reauthenticate";try{const a=await Js(t,by(s,o,e,t),n);re(a.idToken,s,"internal-error");const c=mf(a.idToken);re(c,s,"internal-error");const{sub:f}=c;return re(t.uid===f,s,"user-mismatch"),zr._forOperation(t,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&qt(s,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function My(t,e,n=!1){if(Lt(t.app))return Promise.reject(Cn(t));const s="signIn",o=await by(t,s,e),a=await zr._fromIdTokenResponse(t,s,o);return n||await t._updateCurrentUser(a.user),a}async function DT(t,e){return My(Vr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fy(t){const e=Vr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LT(t,e,n){if(Lt(t.app))return Promise.reject(Cn(t));const s=Vr(t),c=await Ad(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xT).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Fy(t),h}),f=await zr._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function bT(t,e,n){return Lt(t.app)?Promise.reject(Cn(t)):DT(it(t),zi.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Fy(t),s})}function MT(t,e,n,s){return it(t).onIdTokenChanged(e,n,s)}function FT(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function UT(t,e,n,s){return it(t).onAuthStateChanged(e,n,s)}function zT(t){return it(t).signOut()}const aa="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(aa,"1"),this.storage.removeItem(aa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=1e3,WT=10;class zy extends Uy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ny(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,f,h)=>{this.notifyListeners(c,h)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},a=this.storage.getItem(s);iT()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WT):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},jT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zy.type="LOCAL";const BT=zy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends Uy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}jy.type="SESSION";const Wy=jy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new La(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:a}=n.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async m=>m(n.origin,a)),h=await $T(f);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}La.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((f,h)=>{const m=vf("",20);o.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(y){const v=y;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(v.data.response);break;default:clearTimeout(_),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return window}function VT(t){on().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}async function GT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qT(){return By()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y="firebaseLocalStorageDb",QT=1,ua="firebaseLocalStorage",Hy="fbase_key";class vo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ba(t,e){return t.transaction([ua],e?"readwrite":"readonly").objectStore(ua)}function YT(){const t=indexedDB.deleteDatabase($y);return new vo(t).toPromise()}function Od(){const t=indexedDB.open($y,QT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ua,{keyPath:Hy})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ua)?e(s):(s.close(),await YT(),e(await Od()))})})}async function Og(t,e,n){const s=ba(t,!0).put({[Hy]:e,value:n});return new vo(s).toPromise()}async function JT(t,e){const n=ba(t,!1).get(e),s=await new vo(n).toPromise();return s===void 0?null:s.value}function Dg(t,e){const n=ba(t,!0).delete(e);return new vo(n).toPromise()}const XT=800,ZT=3;class Vy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Od(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ZT)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return By()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=La._getInstance(qT()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GT(),!this.activeServiceWorker)return;this.sender=new HT(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Od();return await Og(e,aa,"1"),await Dg(e,aa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Og(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>JT(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ba(o,!1).getAll();return new vo(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vy.type="LOCAL";const e0=Vy;new go(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(t,e){return e?wn(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends _f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ci(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ci(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ci(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function n0(t){return My(t.auth,new wf(t),t.bypassAuthState)}function r0(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),OT(n,new wf(t),t.bypassAuthState)}async function i0(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),AT(n,new wf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n,s,o,a=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:a,error:c,type:f}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:n,sessionId:s,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n0;case"linkViaPopup":case"linkViaRedirect":return i0;case"reauthViaPopup":case"reauthViaRedirect":return r0;default:qt(this.auth,"internal-error")}}resolve(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new go(2e3,1e4);class vi extends Gy{constructor(e,n,s,o,a){super(e,n,o,a),this.provider=s,this.authWindow=null,this.pollId=null,vi.currentPopupAction&&vi.currentPopupAction.cancel(),vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Rn(this.filter.length===1,"Popup operations only handle one event");const e=vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,s0.get())};e()}}vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="pendingRedirect",ql=new Map;class l0 extends Gy{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=ql.get(this.auth._key());if(!e){try{const s=await a0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}ql.set(this.auth._key(),e)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a0(t,e){const n=d0(e),s=c0(t);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function u0(t,e){ql.set(t._key(),e)}function c0(t){return wn(t._redirectPersistence)}function d0(t){return Kl(o0,t.config.apiKey,t.name)}async function f0(t,e,n=!1){if(Lt(t.app))return Promise.reject(Cn(t));const s=Vr(t),o=t0(s,e),c=await new l0(s,o,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=10*60*1e3;class p0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!m0(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Ky(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(sn(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=h0&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lg(e))}saveEventToCache(e){this.cachedEventUids.add(Lg(e)),this.lastProcessedEventTime=Date.now()}}function Lg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ky({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function m0(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ky(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(t,e={}){return gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,y0=/^https?/;async function v0(t){if(t.config.emulator)return;const{authorizedDomains:e}=await g0(t);for(const n of e)try{if(w0(n))return}catch{}qt(t,"unauthorized-domain")}function w0(t){const e=Nd(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!y0.test(n))return!1;if(_0.test(t))return s===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new go(3e4,6e4);function bg(){const t=on().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function S0(t){return new Promise((e,n)=>{var s,o,a;function c(){bg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bg(),n(sn(t,"network-request-failed"))},timeout:E0.get()})}if(!((o=(s=on().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=on().gapi)===null||a===void 0)&&a.load)c();else{const f=hT("iframefcb");return on()[f]=()=>{gapi.load?c():n(sn(t,"network-request-failed"))},Ay(`${fT()}?onload=${f}`).catch(h=>n(h))}}).catch(e=>{throw Ql=null,e})}let Ql=null;function C0(t){return Ql=Ql||S0(t),Ql}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new go(5e3,15e3),k0="__/auth/iframe",T0="emulator/auth/iframe",R0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N0(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pf(e,T0):`https://${t.config.authDomain}/${k0}`,s={apiKey:e.apiKey,appName:t.name,v:Ui},o=P0.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Fi(s).slice(1)}`}async function x0(t){const e=await C0(t),n=on().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:N0(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R0,dontclear:!0},s=>new Promise(async(o,a)=>{await s.restyle({setHideOnLeave:!1});const c=sn(t,"network-request-failed"),f=on().setTimeout(()=>{a(c)},I0.get());function h(){on().clearTimeout(f),o(s)}s.ping(h).then(h,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O0=500,D0=600,L0="_blank",b0="http://localhost";class Mg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M0(t,e,n,s=O0,o=D0){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const h=Object.assign(Object.assign({},A0),{width:s.toString(),height:o.toString(),top:a,left:c}),m=at().toLowerCase();n&&(f=Iy(m)?L0:n),Sy(m)&&(e=e||b0,h.scrollbars="yes");const _=Object.entries(h).reduce((v,[C,I])=>`${v}${C}=${I},`,"");if(rT(m)&&f!=="_self")return F0(e||"",f),new Mg(null);const y=window.open(e||"",f,_);re(y,t,"popup-blocked");try{y.focus()}catch{}return new Mg(y)}function F0(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__/auth/handler",z0="emulator/auth/handler",j0=encodeURIComponent("fac");async function Fg(t,e,n,s,o,a){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Ui,eventId:o};if(e instanceof Ly){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",Cd(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,y]of Object.entries({}))c[_]=y}if(e instanceof yo){const _=e.getScopes().filter(y=>y!=="");_.length>0&&(c.scopes=_.join(","))}t.tenantId&&(c.tid=t.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const h=await t._getAppCheckToken(),m=h?`#${j0}=${encodeURIComponent(h)}`:"";return`${W0(t)}?${Fi(f).slice(1)}${m}`}function W0({config:t}){return t.emulator?pf(t,z0):`https://${t.authDomain}/${U0}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class B0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wy,this._completeRedirectFn=f0,this._overrideRedirectResult=u0}async _openPopup(e,n,s,o){var a;Rn((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Fg(e,n,s,Nd(),o);return M0(e,c,vf())}async _openRedirect(e,n,s,o){await this._originValidation(e);const a=await Fg(e,n,s,Nd(),o);return VT(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:a}=this.eventManagers[n];return o?Promise.resolve(o):(Rn(a,"If manager is not set, promise should be"),a)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await x0(e),s=new p0(e);return n.register("authEvent",o=>(re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},o=>{var a;const c=(a=o==null?void 0:o[0])===null||a===void 0?void 0:a[id];c!==void 0&&n(!!c),qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=v0(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ny()||Cy()||gf()}}const $0=B0;var Ug="@firebase/auth",zg="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G0(t){Pi(new Fr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;re(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const h={apiKey:c,authDomain:f,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xy(t)},m=new uT(s,o,a,h);return vT(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Pi(new Fr("auth-internal",e=>{const n=Vr(e.getProvider("auth").getImmediate());return(s=>new H0(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ir(Ug,zg,V0(t)),ir(Ug,zg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=5*60,q0=iy("authIdTokenMaxAge")||K0;let jg=null;const Q0=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>q0)return;const o=n==null?void 0:n.token;jg!==o&&(jg=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Y0(t=cy()){const e=df(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yT(t,{popupRedirectResolver:$0,persistence:[e0,BT,Wy]}),s=iy("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(s,location.origin);if(location.origin===a.origin){const c=Q0(a.toString());FT(n,c,()=>c(n.currentUser)),MT(n,f=>c(f))}}const o=ny("auth");return o&&wT(n,`http://${o}`),n}function J0(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cT({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=o=>{const a=sn("internal-error");a.customData=o,n(a)},s.type="text/javascript",s.charset="UTF-8",J0().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G0("Browser");var X0="firebase",Z0="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir(X0,Z0,"app");var Wg={};const Bg="@firebase/database",$g="1.0.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qy="";function eR(t){qy=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Be(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Qs(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return xn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new tR(e)}}catch{}return new nR},br=Qy("localStorage"),rR=Qy("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new uf("@firebase/database"),iR=function(){let t=1;return function(){return t++}}(),Yy=function(t){const e=NI(t),n=new kI;n.update(e);const s=n.digest();return sf.encodeByteArray(s)},wo=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=wo.apply(null,s):typeof s=="object"?e+=Be(s):e+=s,e+=" "}return e};let Ws=null,Hg=!0;const sR=function(t,e){z(!0,"Can't turn on custom loggers persistently."),Ii.logLevel=we.VERBOSE,Ws=Ii.log.bind(Ii)},rt=function(...t){if(Hg===!0&&(Hg=!1,Ws===null&&rR.get("logging_enabled")===!0&&sR()),Ws){const e=wo.apply(null,t);Ws(e)}},Eo=function(t){return function(...e){rt(t,...e)}},Dd=function(...t){const e="FIREBASE INTERNAL ERROR: "+wo(...t);Ii.error(e)},Pn=function(...t){const e=`FIREBASE FATAL ERROR: ${wo(...t)}`;throw Ii.error(e),new Error(e)},_t=function(...t){const e="FIREBASE WARNING: "+wo(...t);Ii.warn(e)},oR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&_t("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},lR=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ni="[MIN_NAME]",jr="[MAX_NAME]",ji=function(t,e){if(t===e)return 0;if(t===Ni||e===jr)return-1;if(e===Ni||t===jr)return 1;{const n=Vg(t),s=Vg(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},aR=function(t,e){return t===e?0:t<e?-1:1},As=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Be(e))},Ef=function(t){if(typeof t!="object"||t===null)return Be(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Be(e[s]),n+=":",n+=Ef(t[e[s]]);return n+="}",n},Xy=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(t.substring(o,n)):s.push(t.substring(o,o+e));return s};function yt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Zy=function(t){z(!Jy(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,a,c,f,h;t===0?(a=0,c=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(f=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=f+s,c=Math.round(t*Math.pow(2,n-f)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-s-n))));const m=[];for(h=n;h;h-=1)m.push(c%2?1:0),c=Math.floor(c/2);for(h=e;h;h-=1)m.push(a%2?1:0),a=Math.floor(a/2);m.push(o?1:0),m.reverse();const _=m.join("");let y="";for(h=0;h<64;h+=8){let v=parseInt(_.substr(h,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},uR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},cR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const fR=new RegExp("^-?(0*)\\d{1,10}$"),hR=-2147483648,pR=2147483647,Vg=function(t){if(fR.test(t)){const e=Number(t);if(e>=hR&&e<=pR)return e}return null},Wi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw _t("Exception was thrown by user callback.",n),e},Math.floor(0))}},mR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Bs=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Lt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){_t(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_t(e)}}class Yl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="5",ev="v",tv="s",nv="r",rv="f",iv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sv="ls",ov="p",Ld="ac",lv="websocket",av="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,s,o,a=!1,c="",f=!1,h=!1){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=f,this.isUsingEmulator=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=br.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&br.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function yR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cv(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let s;if(e===lv)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===av)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);yR(t)&&(n.ns=t.namespace);const o=[];return yt(n,(a,c)=>{o.push(a+"="+c)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.counters_={}}incrementCounter(e,n=1){xn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return oI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd={},od={};function Cf(t){const e=t.toString();return sd[e]||(sd[e]=new vR),sd[e]}function wR(t,e){const n=t.toString();return od[n]||(od[n]=e()),od[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Wi(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="start",SR="close",CR="pLPCommand",IR="pRTLPCB",dv="id",fv="pw",hv="ser",kR="cb",TR="seg",RR="ts",PR="d",NR="dframe",pv=1870,mv=30,xR=pv-mv,AR=25e3,OR=3e4;class wi{constructor(e,n,s,o,a,c,f){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.transportSessionId=c,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Eo(e),this.stats_=Cf(n),this.urlFn=h=>(this.appCheckToken&&(h[Ld]=this.appCheckToken),cv(n,av,h))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ER(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(OR)),lR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new If((...a)=>{const[c,f,h,m,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Gg)this.id=f,this.password=h;else if(c===SR)f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,f)},()=>{this.onClosed_()},this.urlFn);const s={};s[Gg]="t",s[hv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[kR]=this.scriptTagHolder.uniqueCallbackIdentifier),s[ev]=Sf,this.transportSessionId&&(s[tv]=this.transportSessionId),this.lastSessionId&&(s[sv]=this.lastSessionId),this.applicationId&&(s[ov]=this.applicationId),this.appCheckToken&&(s[Ld]=this.appCheckToken),typeof location<"u"&&location.hostname&&iv.test(location.hostname)&&(s[nv]=rv);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wi.forceAllow_=!0}static forceDisallow(){wi.forceDisallow_=!0}static isAvailable(){return wi.forceAllow_?!0:!wi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!uR()&&!cR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Be(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=ey(n),o=Xy(s,xR);for(let a=0;a<o.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[NR]="t",s[dv]=e,s[fv]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Be(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class If{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=iR(),window[CR+this.uniqueCallbackIdentifier]=e,window[IR+this.uniqueCallbackIdentifier]=n,this.myIFrame=If.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(f){rt("frame writing exception"),f.stack&&rt(f.stack),rt(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||rt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[dv]=this.myID,e[fv]=this.myPW,e[hv]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mv+s.length<=pv;){const c=this.pendingSegs.shift();s=s+"&"+TR+o+"="+c.seg+"&"+RR+o+"="+c.ts+"&"+PR+o+"="+c.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(AR)),a=()=>{clearTimeout(o),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{rt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=16384,LR=45e3;let ca=null;typeof MozWebSocket<"u"?ca=MozWebSocket:typeof WebSocket<"u"&&(ca=WebSocket);class rn{constructor(e,n,s,o,a,c,f){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Eo(this.connId),this.stats_=Cf(n),this.connURL=rn.connectionURL_(n,c,f,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,a){const c={};return c[ev]=Sf,typeof location<"u"&&location.hostname&&iv.test(location.hostname)&&(c[nv]=rv),n&&(c[tv]=n),s&&(c[sv]=s),o&&(c[Ld]=o),a&&(c[ov]=a),cv(e,lv,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,br.set("previous_websocket_failure",!0);try{let s;_I(),this.mySock=new ca(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){rn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&ca!==null&&!rn.forceDisallow_}static previouslyFailed(){return br.isInMemoryStorage||br.get("previous_websocket_failure")===!0}markConnectionHealthy(){br.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Qs(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Be(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Xy(n,DR);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(LR))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rn.responsesRequiredToBeHealthy=2;rn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static get ALL_TRANSPORTS(){return[wi,rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=rn.isAvailable();let s=n&&!rn.previouslyFailed();if(e.webSocketOnly&&(n||_t("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[rn];else{const o=this.transports_=[];for(const a of Zs.ALL_TRANSPORTS)a&&a.isAvailable()&&o.push(a);Zs.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Zs.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=6e4,MR=5e3,FR=10*1024,UR=100*1024,ld="t",Kg="d",zR="s",qg="r",jR="e",Qg="o",Yg="a",Jg="n",Xg="p",WR="h";class BR{constructor(e,n,s,o,a,c,f,h,m,_){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=a,this.onMessage_=c,this.onReady_=f,this.onDisconnect_=h,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Eo("c:"+this.id+":"),this.transportManager_=new Zs(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Bs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>UR?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>FR?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ld in e){const n=e[ld];n===Yg?this.upgradeIfSecondaryHealthy_():n===qg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=As("t",e),s=As("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Xg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Yg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Jg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=As("t",e),s=As("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=As(ld,e);if(Kg in e){const s=e[Kg];if(n===WR){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===Jg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===zR?this.onConnectionShutdown_(s):n===qg?this.onReset_(s):n===jR?Dd("Server Error: "+s):n===Qg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dd("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Sf!==s&&_t("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Bs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(bR))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(MR))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Xg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(br.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let a=0;a<o.length;a++)if(o[a].callback===n&&(!s||s===o[a].context)){o.splice(a,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends _v{static getInstance(){return new da}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=32,e_=768;class Ee{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function _e(){return new Ee("")}function ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ur(t){return t.pieces_.length-t.pieceNum_}function Ie(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Ee(t.pieces_,e)}function yv(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $R(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function vv(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function wv(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Ee(e,0)}function $e(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Ee)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new Ee(n,0)}function de(t){return t.pieceNum_>=t.pieces_.length}function lt(t,e){const n=ae(t),s=ae(e);if(n===null)return e;if(n===s)return lt(Ie(t),Ie(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kf(t,e){if(ur(t)!==ur(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Ht(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(ur(t)>ur(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class HR{constructor(e,n){this.errorPrefix_=n,this.parts_=vv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Oa(this.parts_[s]);Ev(this)}}function VR(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Oa(e),Ev(t)}function GR(t){const e=t.parts_.pop();t.byteLength_-=Oa(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ev(t){if(t.byteLength_>e_)throw new Error(t.errorPrefix_+"has a key path longer than "+e_+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zg+") or object contains a cycle "+Or(t))}function Or(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends _v{static getInstance(){return new Tf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=1e3,KR=60*5*1e3,t_=30*1e3,qR=1.3,QR=3e4,YR="server_kill",n_=3;class In extends gv{constructor(e,n,s,o,a,c,f,h){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=f,this.authOverride_=h,this.id=In.nextPersistentConnectionId_++,this.log_=Eo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Os,this.maxReconnectDelay_=KR,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&da.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,a={r:o,a:e,b:n};this.log_(Be(a)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new Aa,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const f=c.d;c.s==="ok"?n.resolve(f):n.reject(f)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,o){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const f={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(c).set(a,f),this.connected_&&this.sendListen_(f)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const a={p:s},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,f=>{const h=f.d,m=f.s;In.warnOnListenWarnings_(h,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",f),m!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(m,h))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&xn(e,"w")){const s=Ri(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();_t(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||II(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=t_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=CI(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const a=o.s,c=o.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";o&&(a.q=s,a.t=o),this.sendRequest(c,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{o&&setTimeout(()=>{o(c.s,c.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,a){this.initConnection_();const c={p:n,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:o}),this.outstandingPutCount_++;const f=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(f):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Be(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Dd("Unrecognized action received from server: "+Be(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Os,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Os,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>QR&&(this.reconnectDelay_=Os),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qR)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+In.nextConnectionId_++,a=this.lastSessionId;let c=!1,f=null;const h=function(){f?f.close():(c=!0,s())},m=function(y){z(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(y)};this.realtime_={close:h,sendRequest:m};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,f=new BR(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,C=>{_t(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(YR)},a))}catch(y){this.log_("Failed to get token: "+y),c||(this.repoInfo_.nodeAdmin&&_t(y),h())}}}interrupt(e){rt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){rt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Cd(this.interruptReasons_)&&(this.reconnectDelay_=Os,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>Ef(a)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new Ee(e).toString();let o;if(this.listens.has(s)){const a=this.listens.get(s);o=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){rt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=n_&&(this.reconnectDelay_=t_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){rt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=n_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+qy.replace(/\./g,"-")]=1,lf()?e["framework.cordova"]=1:sy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=da.getInstance().currentlyOnline();return Cd(this.interruptReasons_)&&e}}In.nextPersistentConnectionId_=0;In.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new ue(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new ue(Ni,e),o=new ue(Ni,n);return this.compare(s,o)!==0}minPost(){return ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;class Sv extends Ma{static get __EMPTY_NODE(){return Wl}static set __EMPTY_NODE(e){Wl=e}compare(e,n){return ji(e.name,n.name)}isDefinedOn(e){throw Mi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ue.MIN}maxPost(){return new ue(jr,Wl)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new ue(e,Wl)}toString(){return".key"}}const ki=new Sv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n,s,o,a=null){this.isReverse_=o,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?s(e.key,n):1,o&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class qe{constructor(e,n,s,o,a){this.key=e,this.value=n,this.color=s??qe.RED,this.left=o??gt.EMPTY_NODE,this.right=a??gt.EMPTY_NODE}copy(e,n,s,o,a){return new qe(e??this.key,n??this.value,s??this.color,o??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const a=s(e,o.key);return a<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):a===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return gt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}qe.RED=!0;qe.BLACK=!1;class JR{copy(e,n,s,o,a){return this}insert(e,n,s){return new qe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class gt{constructor(e,n=gt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new gt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,qe.BLACK,null,null))}remove(e){return new gt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qe.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Bl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Bl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Bl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Bl(this.root_,null,this.comparator_,!0,e)}}gt.EMPTY_NODE=new JR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e){return ji(t.name,e.name)}function Rf(t,e){return ji(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd;function ZR(t){bd=t}const Cv=function(t){return typeof t=="number"?"number:"+Zy(t):"string:"+t},Iv=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xn(e,".sv"),"Priority must be a string or number.")}else z(t===bd||t.isEmpty(),"priority of unexpected type.");z(t===bd||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r_;class Ke{static set __childrenNodeConstructor(e){r_=e}static get __childrenNodeConstructor(){return r_}constructor(e,n=Ke.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Iv(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ke(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ke.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return de(e)?this:ae(e)===".priority"?this.priorityNode_:Ke.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ke.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ae(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(z(s!==".priority"||ur(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Ke.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ie(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Cv(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Zy(this.value_):e+=this.value_,this.lazyHash_=Yy(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ke.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ke.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=Ke.VALUE_TYPE_ORDER.indexOf(n),a=Ke.VALUE_TYPE_ORDER.indexOf(s);return z(o>=0,"Unknown leaf type: "+n),z(a>=0,"Unknown leaf type: "+s),o===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ke.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kv,Tv;function eP(t){kv=t}function tP(t){Tv=t}class nP extends Ma{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),a=s.compareTo(o);return a===0?ji(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ue.MIN}maxPost(){return new ue(jr,new Ke("[PRIORITY-POST]",Tv))}makePost(e,n){const s=kv(e);return new ue(n,new Ke("[PRIORITY-POST]",s))}toString(){return".priority"}}const Me=new nP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=Math.log(2);class iP{constructor(e){const n=a=>parseInt(Math.log(a)/rP,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fa=function(t,e,n,s){t.sort(e);const o=function(h,m){const _=m-h;let y,v;if(_===0)return null;if(_===1)return y=t[h],v=n?n(y):y,new qe(v,y.node,qe.BLACK,null,null);{const C=parseInt(_/2,10)+h,I=o(h,C),A=o(C+1,m);return y=t[C],v=n?n(y):y,new qe(v,y.node,qe.BLACK,I,A)}},a=function(h){let m=null,_=null,y=t.length;const v=function(I,A){const x=y-I,O=y;y-=I;const W=o(x+1,O),L=t[x],B=n?n(L):L;C(new qe(B,L.node,A,null,W))},C=function(I){m?(m.left=I,m=I):(_=I,m=I)};for(let I=0;I<h.count;++I){const A=h.nextBitIsOne(),x=Math.pow(2,h.count-(I+1));A?v(x,qe.BLACK):(v(x,qe.BLACK),v(x,qe.RED))}return _},c=new iP(t.length),f=a(c);return new gt(s||e,f)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad;const Ds={};class En{static get Default(){return z(Me,"ChildrenNode.ts has not been loaded"),ad=ad||new En({".priority":Ds},{".priority":Me}),ad}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Ri(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gt?n:null}hasIndex(e){return xn(this.indexSet_,e.toString())}addIndex(e,n){z(e!==ki,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const a=n.getIterator(ue.Wrap);let c=a.getNext();for(;c;)o=o||e.isDefinedOn(c.node),s.push(c),c=a.getNext();let f;o?f=fa(s,e.getCompare()):f=Ds;const h=e.toString(),m=Object.assign({},this.indexSet_);m[h]=e;const _=Object.assign({},this.indexes_);return _[h]=f,new En(_,m)}addToIndexes(e,n){const s=na(this.indexes_,(o,a)=>{const c=Ri(this.indexSet_,a);if(z(c,"Missing index implementation for "+a),o===Ds)if(c.isDefinedOn(e.node)){const f=[],h=n.getIterator(ue.Wrap);let m=h.getNext();for(;m;)m.name!==e.name&&f.push(m),m=h.getNext();return f.push(e),fa(f,c.getCompare())}else return Ds;else{const f=n.get(e.name);let h=o;return f&&(h=h.remove(new ue(e.name,f))),h.insert(e,e.node)}});return new En(s,this.indexSet_)}removeFromIndexes(e,n){const s=na(this.indexes_,o=>{if(o===Ds)return o;{const a=n.get(e.name);return a?o.remove(new ue(e.name,a)):o}});return new En(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ls;class ne{static get EMPTY_NODE(){return Ls||(Ls=new ne(new gt(Rf),null,En.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Iv(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ls}updatePriority(e){return this.children_.isEmpty()?this:new ne(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Ls:n}}getChild(e){const n=ae(e);return n===null?this:this.getImmediateChild(n).getChild(Ie(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new ue(e,n);let o,a;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const c=o.isEmpty()?Ls:this.priorityNode_;return new ne(o,c,a)}}updateChild(e,n){const s=ae(e);if(s===null)return n;{z(ae(e)!==".priority"||ur(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(Ie(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,a=!0;if(this.forEachChild(Me,(c,f)=>{n[c]=f.val(e),s++,a&&ne.INTEGER_REGEXP_.test(c)?o=Math.max(o,Number(c)):a=!1}),!e&&a&&o<2*s){const c=[];for(const f in n)c[f]=n[f];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Cv(this.getPriority().val())+":"),this.forEachChild(Me,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Yy(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const a=o.getPredecessorKey(new ue(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new ue(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new ue(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,ue.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)<0;)o.getNext(),a=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,ue.Wrap);let a=o.peek();for(;a!=null&&n.compare(a,e)>0;)o.getNext(),a=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===So?-1:0}withIndex(e){if(e===ki||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ne(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ki||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(Me),o=n.getIterator(Me);let a=s.getNext(),c=o.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=o.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===ki?null:this.indexMap_.get(e.toString())}}ne.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class sP extends ne{constructor(){super(new gt(Rf),ne.EMPTY_NODE,En.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ne.EMPTY_NODE}isEmpty(){return!1}}const So=new sP;Object.defineProperties(ue,{MIN:{value:new ue(Ni,ne.EMPTY_NODE)},MAX:{value:new ue(jr,So)}});Sv.__EMPTY_NODE=ne.EMPTY_NODE;Ke.__childrenNodeConstructor=ne;ZR(So);tP(So);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=!0;function Qe(t,e=null){if(t===null)return ne.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ke(n,Qe(e))}if(!(t instanceof Array)&&oP){const n=[];let s=!1;if(yt(t,(c,f)=>{if(c.substring(0,1)!=="."){const h=Qe(f);h.isEmpty()||(s=s||!h.getPriority().isEmpty(),n.push(new ue(c,h)))}}),n.length===0)return ne.EMPTY_NODE;const a=fa(n,XR,c=>c.name,Rf);if(s){const c=fa(n,Me.getCompare());return new ne(a,Qe(e),new En({".priority":c},{".priority":Me}))}else return new ne(a,Qe(e),En.Default)}else{let n=ne.EMPTY_NODE;return yt(t,(s,o)=>{if(xn(t,s)&&s.substring(0,1)!=="."){const a=Qe(o);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(Qe(e))}}eP(Qe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP extends Ma{constructor(e){super(),this.indexPath_=e,z(!de(e)&&ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),a=s.compareTo(o);return a===0?ji(e.name,n.name):a}makePost(e,n){const s=Qe(e),o=ne.EMPTY_NODE.updateChild(this.indexPath_,s);return new ue(n,o)}maxPost(){const e=ne.EMPTY_NODE.updateChild(this.indexPath_,So);return new ue(jr,e)}toString(){return vv(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP extends Ma{compare(e,n){const s=e.node.compareTo(n.node);return s===0?ji(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ue.MIN}maxPost(){return ue.MAX}makePost(e,n){const s=Qe(e);return new ue(n,s)}toString(){return".value"}}const uP=new aP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(t){return{type:"value",snapshotNode:t}}function xi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function eo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function to(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function cP(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.index_=e}updateChild(e,n,s,o,a,c){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(n);return f.getChild(o).equals(s.getChild(o))&&f.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(n)?c.trackChildChange(eo(n,f)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?c.trackChildChange(xi(n,s)):c.trackChildChange(to(n,s,f))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(Me,(o,a)=>{n.hasChild(o)||s.trackChildChange(eo(o,a))}),n.isLeafNode()||n.forEachChild(Me,(o,a)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(a)||s.trackChildChange(to(o,a,c))}else s.trackChildChange(xi(o,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ne.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.indexedFilter_=new Pf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=no.getStartPost_(e),this.endPost_=no.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,a,c){return this.matches(new ue(n,s))||(s=ne.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,a,c)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ne.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ne.EMPTY_NODE);const a=this;return n.forEachChild(Me,(c,f)=>{a.matches(new ue(c,f))||(o=o.updateImmediateChild(c,ne.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new no(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,a,c){return this.rangedFilter_.matches(new ue(n,s))||(s=ne.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,a,c):this.fullLimitUpdateChild_(e,n,s,a,c)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=ne.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ne.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f))if(this.withinDirectionalEnd(f))o=o.updateImmediateChild(f.name,f.node),c++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ne.EMPTY_NODE);let a;this.reverse_?a=o.getReverseIterator(this.index_):a=o.getIterator(this.index_);let c=0;for(;a.hasNext();){const f=a.getNext();c<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?c++:o=o.updateImmediateChild(f.name,ne.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,a){let c;if(this.reverse_){const y=this.index_.getCompare();c=(v,C)=>y(C,v)}else c=this.index_.getCompare();const f=e;z(f.numChildren()===this.limit_,"");const h=new ue(n,s),m=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),_=this.rangedFilter_.matches(h);if(f.hasChild(n)){const y=f.getImmediateChild(n);let v=o.getChildAfterChild(this.index_,m,this.reverse_);for(;v!=null&&(v.name===n||f.hasChild(v.name));)v=o.getChildAfterChild(this.index_,v,this.reverse_);const C=v==null?1:c(v,h);if(_&&!s.isEmpty()&&C>=0)return a!=null&&a.trackChildChange(to(n,s,y)),f.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(eo(n,y));const A=f.updateImmediateChild(n,ne.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a!=null&&a.trackChildChange(xi(v.name,v.node)),A.updateImmediateChild(v.name,v.node)):A}}else return s.isEmpty()?e:_&&c(m,h)>=0?(a!=null&&(a.trackChildChange(eo(m.name,m.node)),a.trackChildChange(xi(n,s))),f.updateImmediateChild(n,s).updateImmediateChild(m.name,ne.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Me}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ni}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Me}copy(){const e=new Nf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function fP(t){return t.loadsAllData()?new Pf(t.getIndex()):t.hasLimit()?new dP(t):new no(t)}function i_(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Me?n="$priority":t.index_===uP?n="$value":t.index_===ki?n="$key":(z(t.index_ instanceof lP,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Be(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Be(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Be(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Be(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Be(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function s_(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Me&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends gv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=Eo("p:rest:"),this.listens_={}}listen(e,n,s,o){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=ha.getListenId_(e,s),f={};this.listens_[c]=f;const h=i_(e._queryParams);this.restRequest_(a+".json",h,(m,_)=>{let y=_;if(m===404&&(y=null,m=null),m===null&&this.onDataUpdate_(a,y,!1,s),Ri(this.listens_,c)===f){let v;m?m===401?v="permission_denied":v="rest_error:"+m:v="ok",o(v,null)}})}unlisten(e,n){const s=ha.getListenId_(e,n);delete this.listens_[s]}get(e){const n=i_(e._queryParams),s=e._path.toString(),o=new Aa;return this.restRequest_(s+".json",n,(a,c)=>{let f=c;a===404&&(f=null,a=null),a===null?(this.onDataUpdate_(s,f,!1,null),o.resolve(f)):o.reject(new Error(f))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,a])=>{o&&o.accessToken&&(n.auth=o.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fi(n);this.log_("Sending REST request for "+c);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(s&&f.readyState===4){this.log_("REST Response for "+c+" received. status:",f.status,"response:",f.responseText);let h=null;if(f.status>=200&&f.status<300){try{h=Qs(f.responseText)}catch{_t("Failed to parse JSON response for "+c+": "+f.responseText)}s(null,h)}else f.status!==401&&f.status!==404&&_t("Got unsuccessful REST response for "+c+" Status: "+f.status),s(f.status);s=null}},f.open("GET",c,!0),f.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.rootNode_=ne.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(){return{value:null,children:new Map}}function Pv(t,e,n){if(de(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=ae(e);t.children.has(s)||t.children.set(s,pa());const o=t.children.get(s);e=Ie(e),Pv(o,e,n)}}function Md(t,e,n){t.value!==null?n(e,t.value):pP(t,(s,o)=>{const a=new Ee(e.toString()+"/"+s);Md(o,a,n)})}function pP(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&yt(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=10*1e3,gP=30*1e3,_P=5*60*1e3;class yP{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mP(e);const s=o_+(gP-o_)*Math.random();Bs(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;yt(e,(o,a)=>{a>0&&xn(this.statsToReport_,o)&&(n[o]=a,s=!0)}),s&&this.server_.reportStats(n),Bs(this.reportStats_.bind(this),Math.floor(Math.random()*2*_P))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vt||(Vt={}));function Nv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function xf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Af(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Vt.ACK_USER_WRITE,this.source=Nv()}operationForChild(e){if(de(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Ee(e));return new ma(_e(),n,this.revert)}}else return z(ae(this.path)===e,"operationForChild called for unrelated child."),new ma(Ie(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.source=e,this.path=n,this.type=Vt.LISTEN_COMPLETE}operationForChild(e){return de(this.path)?new ro(this.source,_e()):new ro(this.source,Ie(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Vt.OVERWRITE}operationForChild(e){return de(this.path)?new Wr(this.source,_e(),this.snap.getImmediateChild(e)):new Wr(this.source,Ie(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Vt.MERGE}operationForChild(e){if(de(this.path)){const n=this.children.subtree(new Ee(e));return n.isEmpty()?null:n.value?new Wr(this.source,_e(),n.value):new io(this.source,_e(),n)}else return z(ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new io(this.source,Ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(de(e))return this.isFullyInitialized()&&!this.filtered_;const n=ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function wP(t,e,n,s){const o=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(cP(c.childName,c.snapshotNode))}),bs(t,o,"child_removed",e,s,n),bs(t,o,"child_added",e,s,n),bs(t,o,"child_moved",a,s,n),bs(t,o,"child_changed",e,s,n),bs(t,o,"value",e,s,n),o}function bs(t,e,n,s,o,a){const c=s.filter(f=>f.type===n);c.sort((f,h)=>SP(t,f,h)),c.forEach(f=>{const h=EP(t,f,a);o.forEach(m=>{m.respondsTo(f.type)&&e.push(m.createEvent(h,t.query_))})})}function EP(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function SP(t,e,n){if(e.childName==null||n.childName==null)throw Mi("Should only compare child_ events.");const s=new ue(e.childName,e.snapshotNode),o=new ue(n.childName,n.snapshotNode);return t.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t,e){return{eventCache:t,serverCache:e}}function $s(t,e,n,s){return Fa(new cr(e,n,s),t.serverCache)}function xv(t,e,n,s){return Fa(t.eventCache,new cr(e,n,s))}function ga(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Br(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud;const CP=()=>(ud||(ud=new gt(aR)),ud);class Re{static fromObject(e){let n=new Re(null);return yt(e,(s,o)=>{n=n.set(new Ee(s),o)}),n}constructor(e,n=CP()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:_e(),value:this.value};if(de(e))return null;{const s=ae(e),o=this.children.get(s);if(o!==null){const a=o.findRootMostMatchingPathAndValue(Ie(e),n);return a!=null?{path:$e(new Ee(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(de(e))return this;{const n=ae(e),s=this.children.get(n);return s!==null?s.subtree(Ie(e)):new Re(null)}}set(e,n){if(de(e))return new Re(n,this.children);{const s=ae(e),a=(this.children.get(s)||new Re(null)).set(Ie(e),n),c=this.children.insert(s,a);return new Re(this.value,c)}}remove(e){if(de(e))return this.children.isEmpty()?new Re(null):new Re(null,this.children);{const n=ae(e),s=this.children.get(n);if(s){const o=s.remove(Ie(e));let a;return o.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,o),this.value===null&&a.isEmpty()?new Re(null):new Re(this.value,a)}else return this}}get(e){if(de(e))return this.value;{const n=ae(e),s=this.children.get(n);return s?s.get(Ie(e)):null}}setTree(e,n){if(de(e))return n;{const s=ae(e),a=(this.children.get(s)||new Re(null)).setTree(Ie(e),n);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new Re(this.value,c)}}fold(e){return this.fold_(_e(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,a)=>{s[o]=a.fold_($e(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,_e(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(de(e))return null;{const a=ae(e),c=this.children.get(a);return c?c.findOnPath_(Ie(e),$e(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,_e(),n)}foreachOnPath_(e,n,s){if(de(e))return this;{this.value&&s(n,this.value);const o=ae(e),a=this.children.get(o);return a?a.foreachOnPath_(Ie(e),$e(n,o),s):new Re(null)}}foreach(e){this.foreach_(_e(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_($e(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.writeTree_=e}static empty(){return new Gt(new Re(null))}}function Hs(t,e,n){if(de(e))return new Gt(new Re(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let a=s.value;const c=lt(o,e);return a=a.updateChild(c,n),new Gt(t.writeTree_.set(o,a))}else{const o=new Re(n),a=t.writeTree_.setTree(e,o);return new Gt(a)}}}function l_(t,e,n){let s=t;return yt(n,(o,a)=>{s=Hs(s,$e(e,o),a)}),s}function a_(t,e){if(de(e))return Gt.empty();{const n=t.writeTree_.setTree(e,new Re(null));return new Gt(n)}}function Fd(t,e){return Gr(t,e)!=null}function Gr(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(lt(n.path,e)):null}function u_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Me,(s,o)=>{e.push(new ue(s,o))}):t.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new ue(s,o.value))}),e}function sr(t,e){if(de(e))return t;{const n=Gr(t,e);return n!=null?new Gt(new Re(n)):new Gt(t.writeTree_.subtree(e))}}function Ud(t){return t.writeTree_.isEmpty()}function Ai(t,e){return Av(_e(),t.writeTree_,e)}function Av(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((o,a)=>{o===".priority"?(z(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=Av($e(t,o),a,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild($e(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e){return bv(e,t)}function IP(t,e,n,s,o){z(s>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(t.visibleWrites=Hs(t.visibleWrites,e,n)),t.lastWriteId=s}function kP(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function TP(t,e){const n=t.allWrites.findIndex(f=>f.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let o=s.visible,a=!1,c=t.allWrites.length-1;for(;o&&c>=0;){const f=t.allWrites[c];f.visible&&(c>=n&&RP(f,s.path)?o=!1:Ht(s.path,f.path)&&(a=!0)),c--}if(o){if(a)return PP(t),!0;if(s.snap)t.visibleWrites=a_(t.visibleWrites,s.path);else{const f=s.children;yt(f,h=>{t.visibleWrites=a_(t.visibleWrites,$e(s.path,h))})}return!0}else return!1}function RP(t,e){if(t.snap)return Ht(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ht($e(t.path,n),e))return!0;return!1}function PP(t){t.visibleWrites=Ov(t.allWrites,NP,_e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function NP(t){return t.visible}function Ov(t,e,n){let s=Gt.empty();for(let o=0;o<t.length;++o){const a=t[o];if(e(a)){const c=a.path;let f;if(a.snap)Ht(n,c)?(f=lt(n,c),s=Hs(s,f,a.snap)):Ht(c,n)&&(f=lt(c,n),s=Hs(s,_e(),a.snap.getChild(f)));else if(a.children){if(Ht(n,c))f=lt(n,c),s=l_(s,f,a.children);else if(Ht(c,n))if(f=lt(c,n),de(f))s=l_(s,_e(),a.children);else{const h=Ri(a.children,ae(f));if(h){const m=h.getChild(Ie(f));s=Hs(s,_e(),m)}}}else throw Mi("WriteRecord should have .snap or .children")}}return s}function Dv(t,e,n,s,o){if(!s&&!o){const a=Gr(t.visibleWrites,e);if(a!=null)return a;{const c=sr(t.visibleWrites,e);if(Ud(c))return n;if(n==null&&!Fd(c,_e()))return null;{const f=n||ne.EMPTY_NODE;return Ai(c,f)}}}else{const a=sr(t.visibleWrites,e);if(!o&&Ud(a))return n;if(!o&&n==null&&!Fd(a,_e()))return null;{const c=function(m){return(m.visible||o)&&(!s||!~s.indexOf(m.writeId))&&(Ht(m.path,e)||Ht(e,m.path))},f=Ov(t.allWrites,c,e),h=n||ne.EMPTY_NODE;return Ai(f,h)}}}function xP(t,e,n){let s=ne.EMPTY_NODE;const o=Gr(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Me,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(n){const a=sr(t.visibleWrites,e);return n.forEachChild(Me,(c,f)=>{const h=Ai(sr(a,new Ee(c)),f);s=s.updateImmediateChild(c,h)}),u_(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=sr(t.visibleWrites,e);return u_(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function AP(t,e,n,s,o){z(s||o,"Either existingEventSnap or existingServerSnap must exist");const a=$e(e,n);if(Fd(t.visibleWrites,a))return null;{const c=sr(t.visibleWrites,a);return Ud(c)?o.getChild(n):Ai(c,o.getChild(n))}}function OP(t,e,n,s){const o=$e(e,n),a=Gr(t.visibleWrites,o);if(a!=null)return a;if(s.isCompleteForChild(n)){const c=sr(t.visibleWrites,o);return Ai(c,s.getNode().getImmediateChild(n))}else return null}function DP(t,e){return Gr(t.visibleWrites,e)}function LP(t,e,n,s,o,a,c){let f;const h=sr(t.visibleWrites,e),m=Gr(h,_e());if(m!=null)f=m;else if(n!=null)f=Ai(h,n);else return[];if(f=f.withIndex(c),!f.isEmpty()&&!f.isLeafNode()){const _=[],y=c.getCompare(),v=a?f.getReverseIteratorFrom(s,c):f.getIteratorFrom(s,c);let C=v.getNext();for(;C&&_.length<o;)y(C,s)!==0&&_.push(C),C=v.getNext();return _}else return[]}function bP(){return{visibleWrites:Gt.empty(),allWrites:[],lastWriteId:-1}}function _a(t,e,n,s){return Dv(t.writeTree,t.treePath,e,n,s)}function Of(t,e){return xP(t.writeTree,t.treePath,e)}function c_(t,e,n,s){return AP(t.writeTree,t.treePath,e,n,s)}function ya(t,e){return DP(t.writeTree,$e(t.treePath,e))}function MP(t,e,n,s,o,a){return LP(t.writeTree,t.treePath,e,n,s,o,a)}function Df(t,e,n){return OP(t.writeTree,t.treePath,e,n)}function Lv(t,e){return bv($e(t.treePath,e),t.writeTree)}function bv(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const a=o.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,to(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,eo(s,o.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,xi(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,to(s,e.snapshotNode,o.oldSnap));else throw Mi("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Mv=new UP;class Lf{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new cr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Df(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Br(this.viewCache_),a=MP(this.writes_,o,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){return{filter:t}}function jP(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function WP(t,e,n,s,o){const a=new FP;let c,f;if(n.type===Vt.OVERWRITE){const m=n;m.source.fromUser?c=zd(t,e,m.path,m.snap,s,o,a):(z(m.source.fromServer,"Unknown source."),f=m.source.tagged||e.serverCache.isFiltered()&&!de(m.path),c=va(t,e,m.path,m.snap,s,o,f,a))}else if(n.type===Vt.MERGE){const m=n;m.source.fromUser?c=$P(t,e,m.path,m.children,s,o,a):(z(m.source.fromServer,"Unknown source."),f=m.source.tagged||e.serverCache.isFiltered(),c=jd(t,e,m.path,m.children,s,o,f,a))}else if(n.type===Vt.ACK_USER_WRITE){const m=n;m.revert?c=GP(t,e,m.path,s,o,a):c=HP(t,e,m.path,m.affectedTree,s,o,a)}else if(n.type===Vt.LISTEN_COMPLETE)c=VP(t,e,n.path,s,a);else throw Mi("Unknown operation type: "+n.type);const h=a.getChanges();return BP(e,c,h),{viewCache:c,changes:h}}function BP(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=ga(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(Rv(ga(e)))}}function Fv(t,e,n,s,o,a){const c=e.eventCache;if(ya(s,n)!=null)return e;{let f,h;if(de(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Br(e),_=m instanceof ne?m:ne.EMPTY_NODE,y=Of(s,_);f=t.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const m=_a(s,Br(e));f=t.filter.updateFullNode(e.eventCache.getNode(),m,a)}else{const m=ae(n);if(m===".priority"){z(ur(n)===1,"Can't have a priority with additional path components");const _=c.getNode();h=e.serverCache.getNode();const y=c_(s,n,_,h);y!=null?f=t.filter.updatePriority(_,y):f=c.getNode()}else{const _=Ie(n);let y;if(c.isCompleteForChild(m)){h=e.serverCache.getNode();const v=c_(s,n,c.getNode(),h);v!=null?y=c.getNode().getImmediateChild(m).updateChild(_,v):y=c.getNode().getImmediateChild(m)}else y=Df(s,m,e.serverCache);y!=null?f=t.filter.updateChild(c.getNode(),m,y,_,o,a):f=c.getNode()}}return $s(e,f,c.isFullyInitialized()||de(n),t.filter.filtersNodes())}}function va(t,e,n,s,o,a,c,f){const h=e.serverCache;let m;const _=c?t.filter:t.filter.getIndexedFilter();if(de(n))m=_.updateFullNode(h.getNode(),s,null);else if(_.filtersNodes()&&!h.isFiltered()){const C=h.getNode().updateChild(n,s);m=_.updateFullNode(h.getNode(),C,null)}else{const C=ae(n);if(!h.isCompleteForPath(n)&&ur(n)>1)return e;const I=Ie(n),x=h.getNode().getImmediateChild(C).updateChild(I,s);C===".priority"?m=_.updatePriority(h.getNode(),x):m=_.updateChild(h.getNode(),C,x,I,Mv,null)}const y=xv(e,m,h.isFullyInitialized()||de(n),_.filtersNodes()),v=new Lf(o,y,a);return Fv(t,y,n,o,v,f)}function zd(t,e,n,s,o,a,c){const f=e.eventCache;let h,m;const _=new Lf(o,e,a);if(de(n))m=t.filter.updateFullNode(e.eventCache.getNode(),s,c),h=$s(e,m,!0,t.filter.filtersNodes());else{const y=ae(n);if(y===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),s),h=$s(e,m,f.isFullyInitialized(),f.isFiltered());else{const v=Ie(n),C=f.getNode().getImmediateChild(y);let I;if(de(v))I=s;else{const A=_.getCompleteChild(y);A!=null?yv(v)===".priority"&&A.getChild(wv(v)).isEmpty()?I=A:I=A.updateChild(v,s):I=ne.EMPTY_NODE}if(C.equals(I))h=e;else{const A=t.filter.updateChild(f.getNode(),y,I,v,_,c);h=$s(e,A,f.isFullyInitialized(),t.filter.filtersNodes())}}}return h}function d_(t,e){return t.eventCache.isCompleteForChild(e)}function $P(t,e,n,s,o,a,c){let f=e;return s.foreach((h,m)=>{const _=$e(n,h);d_(e,ae(_))&&(f=zd(t,f,_,m,o,a,c))}),s.foreach((h,m)=>{const _=$e(n,h);d_(e,ae(_))||(f=zd(t,f,_,m,o,a,c))}),f}function f_(t,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function jd(t,e,n,s,o,a,c,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h=e,m;de(n)?m=s:m=new Re(null).setTree(n,s);const _=e.serverCache.getNode();return m.children.inorderTraversal((y,v)=>{if(_.hasChild(y)){const C=e.serverCache.getNode().getImmediateChild(y),I=f_(t,C,v);h=va(t,h,new Ee(y),I,o,a,c,f)}}),m.children.inorderTraversal((y,v)=>{const C=!e.serverCache.isCompleteForChild(y)&&v.value===null;if(!_.hasChild(y)&&!C){const I=e.serverCache.getNode().getImmediateChild(y),A=f_(t,I,v);h=va(t,h,new Ee(y),A,o,a,c,f)}}),h}function HP(t,e,n,s,o,a,c){if(ya(o,n)!=null)return e;const f=e.serverCache.isFiltered(),h=e.serverCache;if(s.value!=null){if(de(n)&&h.isFullyInitialized()||h.isCompleteForPath(n))return va(t,e,n,h.getNode().getChild(n),o,a,f,c);if(de(n)){let m=new Re(null);return h.getNode().forEachChild(ki,(_,y)=>{m=m.set(new Ee(_),y)}),jd(t,e,n,m,o,a,f,c)}else return e}else{let m=new Re(null);return s.foreach((_,y)=>{const v=$e(n,_);h.isCompleteForPath(v)&&(m=m.set(_,h.getNode().getChild(v)))}),jd(t,e,n,m,o,a,f,c)}}function VP(t,e,n,s,o){const a=e.serverCache,c=xv(e,a.getNode(),a.isFullyInitialized()||de(n),a.isFiltered());return Fv(t,c,n,s,Mv,o)}function GP(t,e,n,s,o,a){let c;if(ya(s,n)!=null)return e;{const f=new Lf(s,e,o),h=e.eventCache.getNode();let m;if(de(n)||ae(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=_a(s,Br(e));else{const y=e.serverCache.getNode();z(y instanceof ne,"serverChildren would be complete if leaf node"),_=Of(s,y)}_=_,m=t.filter.updateFullNode(h,_,a)}else{const _=ae(n);let y=Df(s,_,e.serverCache);y==null&&e.serverCache.isCompleteForChild(_)&&(y=h.getImmediateChild(_)),y!=null?m=t.filter.updateChild(h,_,y,Ie(n),f,a):e.eventCache.getNode().hasChild(_)?m=t.filter.updateChild(h,_,ne.EMPTY_NODE,Ie(n),f,a):m=h,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=_a(s,Br(e)),c.isLeafNode()&&(m=t.filter.updateFullNode(m,c,a)))}return c=e.serverCache.isFullyInitialized()||ya(s,_e())!=null,$s(e,m,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new Pf(s.getIndex()),a=fP(s);this.processor_=zP(a);const c=n.serverCache,f=n.eventCache,h=o.updateFullNode(ne.EMPTY_NODE,c.getNode(),null),m=a.updateFullNode(ne.EMPTY_NODE,f.getNode(),null),_=new cr(h,c.isFullyInitialized(),o.filtersNodes()),y=new cr(m,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Fa(y,_),this.eventGenerator_=new vP(this.query_)}get query(){return this.query_}}function qP(t){return t.viewCache_.serverCache.getNode()}function QP(t){return ga(t.viewCache_)}function YP(t,e){const n=Br(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!de(e)&&!n.getImmediateChild(ae(e)).isEmpty())?n.getChild(e):null}function h_(t){return t.eventRegistrations_.length===0}function JP(t,e){t.eventRegistrations_.push(e)}function p_(t,e,n){const s=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,o);c&&s.push(c)})}if(e){let o=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))o.push(c);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return s}function m_(t,e,n,s){e.type===Vt.MERGE&&e.source.queryId!==null&&(z(Br(t.viewCache_),"We should always have a full cache before handling merges"),z(ga(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,a=WP(t.processor_,o,e,n,s);return jP(t.processor_,a.viewCache),z(a.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,Uv(t,a.changes,a.viewCache.eventCache.getNode(),null)}function XP(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Me,(a,c)=>{s.push(xi(a,c))}),n.isFullyInitialized()&&s.push(Rv(n.getNode())),Uv(t,s,n.getNode(),e)}function Uv(t,e,n,s){const o=s?[s]:t.eventRegistrations_;return wP(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wa;class zv{constructor(){this.views=new Map}}function ZP(t){z(!wa,"__referenceConstructor has already been defined"),wa=t}function eN(){return z(wa,"Reference.ts has not been loaded"),wa}function tN(t){return t.views.size===0}function bf(t,e,n,s){const o=e.source.queryId;if(o!==null){const a=t.views.get(o);return z(a!=null,"SyncTree gave us an op for an invalid query."),m_(a,e,n,s)}else{let a=[];for(const c of t.views.values())a=a.concat(m_(c,e,n,s));return a}}function jv(t,e,n,s,o){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let f=_a(n,o?s:null),h=!1;f?h=!0:s instanceof ne?(f=Of(n,s),h=!1):(f=ne.EMPTY_NODE,h=!1);const m=Fa(new cr(f,h,!1),new cr(s,o,!1));return new KP(e,m)}return c}function nN(t,e,n,s,o,a){const c=jv(t,e,s,o,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),JP(c,n),XP(c,n)}function rN(t,e,n,s){const o=e._queryIdentifier,a=[];let c=[];const f=dr(t);if(o==="default")for(const[h,m]of t.views.entries())c=c.concat(p_(m,n,s)),h_(m)&&(t.views.delete(h),m.query._queryParams.loadsAllData()||a.push(m.query));else{const h=t.views.get(o);h&&(c=c.concat(p_(h,n,s)),h_(h)&&(t.views.delete(o),h.query._queryParams.loadsAllData()||a.push(h.query)))}return f&&!dr(t)&&a.push(new(eN())(e._repo,e._path)),{removed:a,events:c}}function Wv(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function or(t,e){let n=null;for(const s of t.views.values())n=n||YP(s,e);return n}function Bv(t,e){if(e._queryParams.loadsAllData())return za(t);{const s=e._queryIdentifier;return t.views.get(s)}}function $v(t,e){return Bv(t,e)!=null}function dr(t){return za(t)!=null}function za(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea;function iN(t){z(!Ea,"__referenceConstructor has already been defined"),Ea=t}function sN(){return z(Ea,"Reference.ts has not been loaded"),Ea}let oN=1;class g_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=bP(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hv(t,e,n,s,o){return IP(t.pendingWriteTree_,e,n,s,o),o?Io(t,new Wr(Nv(),e,n)):[]}function Mr(t,e,n=!1){const s=kP(t.pendingWriteTree_,e);if(TP(t.pendingWriteTree_,e)){let a=new Re(null);return s.snap!=null?a=a.set(_e(),!0):yt(s.children,c=>{a=a.set(new Ee(c),!0)}),Io(t,new ma(s.path,a,n))}else return[]}function Co(t,e,n){return Io(t,new Wr(xf(),e,n))}function lN(t,e,n){const s=Re.fromObject(n);return Io(t,new io(xf(),e,s))}function aN(t,e){return Io(t,new ro(xf(),e))}function uN(t,e,n){const s=Ff(t,n);if(s){const o=Uf(s),a=o.path,c=o.queryId,f=lt(a,e),h=new ro(Af(c),f);return zf(t,a,h)}else return[]}function Sa(t,e,n,s,o=!1){const a=e._path,c=t.syncPointTree_.get(a);let f=[];if(c&&(e._queryIdentifier==="default"||$v(c,e))){const h=rN(c,e,n,s);tN(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const m=h.removed;if(f=h.events,!o){const _=m.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=t.syncPointTree_.findOnPath(a,(v,C)=>dr(C));if(_&&!y){const v=t.syncPointTree_.subtree(a);if(!v.isEmpty()){const C=fN(v);for(let I=0;I<C.length;++I){const A=C[I],x=A.query,O=qv(t,A);t.listenProvider_.startListening(Vs(x),so(t,x),O.hashFn,O.onComplete)}}}!y&&m.length>0&&!s&&(_?t.listenProvider_.stopListening(Vs(e),null):m.forEach(v=>{const C=t.queryToTagMap.get(ja(v));t.listenProvider_.stopListening(Vs(v),C)}))}hN(t,m)}return f}function Vv(t,e,n,s){const o=Ff(t,s);if(o!=null){const a=Uf(o),c=a.path,f=a.queryId,h=lt(c,e),m=new Wr(Af(f),h,n);return zf(t,c,m)}else return[]}function cN(t,e,n,s){const o=Ff(t,s);if(o){const a=Uf(o),c=a.path,f=a.queryId,h=lt(c,e),m=Re.fromObject(n),_=new io(Af(f),h,m);return zf(t,c,_)}else return[]}function Wd(t,e,n,s=!1){const o=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(o,(v,C)=>{const I=lt(v,o);a=a||or(C,I),c=c||dr(C)});let f=t.syncPointTree_.get(o);f?(c=c||dr(f),a=a||or(f,_e())):(f=new zv,t.syncPointTree_=t.syncPointTree_.set(o,f));let h;a!=null?h=!0:(h=!1,a=ne.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((C,I)=>{const A=or(I,_e());A&&(a=a.updateImmediateChild(C,A))}));const m=$v(f,e);if(!m&&!e._queryParams.loadsAllData()){const v=ja(e);z(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const C=pN();t.queryToTagMap.set(v,C),t.tagToQueryMap.set(C,v)}const _=Ua(t.pendingWriteTree_,o);let y=nN(f,e,n,_,a,h);if(!m&&!c&&!s){const v=Bv(f,e);y=y.concat(mN(t,e,v))}return y}function Mf(t,e,n){const o=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,f)=>{const h=lt(c,e),m=or(f,h);if(m)return m});return Dv(o,e,a,n,!0)}function dN(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(m,_)=>{const y=lt(m,n);s=s||or(_,y)});let o=t.syncPointTree_.get(n);o?s=s||or(o,_e()):(o=new zv,t.syncPointTree_=t.syncPointTree_.set(n,o));const a=s!=null,c=a?new cr(s,!0,!1):null,f=Ua(t.pendingWriteTree_,e._path),h=jv(o,e,f,a?c.getNode():ne.EMPTY_NODE,a);return QP(h)}function Io(t,e){return Gv(e,t.syncPointTree_,null,Ua(t.pendingWriteTree_,_e()))}function Gv(t,e,n,s){if(de(t.path))return Kv(t,e,n,s);{const o=e.get(_e());n==null&&o!=null&&(n=or(o,_e()));let a=[];const c=ae(t.path),f=t.operationForChild(c),h=e.children.get(c);if(h&&f){const m=n?n.getImmediateChild(c):null,_=Lv(s,c);a=a.concat(Gv(f,h,m,_))}return o&&(a=a.concat(bf(o,t,s,n))),a}}function Kv(t,e,n,s){const o=e.get(_e());n==null&&o!=null&&(n=or(o,_e()));let a=[];return e.children.inorderTraversal((c,f)=>{const h=n?n.getImmediateChild(c):null,m=Lv(s,c),_=t.operationForChild(c);_&&(a=a.concat(Kv(_,f,h,m)))}),o&&(a=a.concat(bf(o,t,s,n))),a}function qv(t,e){const n=e.query,s=so(t,n);return{hashFn:()=>(qP(e)||ne.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?uN(t,n._path,s):aN(t,n._path);{const a=dR(o,n);return Sa(t,n,null,a)}}}}function so(t,e){const n=ja(e);return t.queryToTagMap.get(n)}function ja(t){return t._path.toString()+"$"+t._queryIdentifier}function Ff(t,e){return t.tagToQueryMap.get(e)}function Uf(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Ee(t.substr(0,e))}}function zf(t,e,n){const s=t.syncPointTree_.get(e);z(s,"Missing sync point for query tag that we're tracking");const o=Ua(t.pendingWriteTree_,e);return bf(s,n,o,null)}function fN(t){return t.fold((e,n,s)=>{if(n&&dr(n))return[za(n)];{let o=[];return n&&(o=Wv(n)),yt(s,(a,c)=>{o=o.concat(c)}),o}})}function Vs(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(sN())(t._repo,t._path):t}function hN(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=ja(s),a=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(a)}}}function pN(){return oN++}function mN(t,e,n){const s=e._path,o=so(t,e),a=qv(t,n),c=t.listenProvider_.startListening(Vs(e),o,a.hashFn,a.onComplete),f=t.syncPointTree_.subtree(s);if(o)z(!dr(f.value),"If we're adding a query, it shouldn't be shadowed");else{const h=f.fold((m,_,y)=>{if(!de(m)&&_&&dr(_))return[za(_).query];{let v=[];return _&&(v=v.concat(Wv(_).map(C=>C.query))),yt(y,(C,I)=>{v=v.concat(I)}),v}});for(let m=0;m<h.length;++m){const _=h[m];t.listenProvider_.stopListening(Vs(_),so(t,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new jf(n)}node(){return this.node_}}class Wf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$e(this.path_,e);return new Wf(this.syncTree_,n)}node(){return Mf(this.syncTree_,this.path_)}}const gN=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},__=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _N(t[".sv"],e,n);if(typeof t[".sv"]=="object")return yN(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_N=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},yN=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&z(!1,"Unexpected increment value: "+s);const o=e.node();if(z(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const c=o.getValue();return typeof c!="number"?s:c+s},vN=function(t,e,n,s){return Bf(e,new Wf(n,t),s)},Qv=function(t,e,n){return Bf(t,new jf(e),n)};function Bf(t,e,n){const s=t.getPriority().val(),o=__(s,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,f=__(c.getValue(),e,n);return f!==c.getValue()||o!==c.getPriority().val()?new Ke(f,Qe(o)):t}else{const c=t;return a=c,o!==c.getPriority().val()&&(a=a.updatePriority(new Ke(o))),c.forEachChild(Me,(f,h)=>{const m=Bf(h,e.getImmediateChild(f),n);m!==h&&(a=a.updateImmediateChild(f,m))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Hf(t,e){let n=e instanceof Ee?e:new Ee(e),s=t,o=ae(n);for(;o!==null;){const a=Ri(s.node.children,o)||{children:{},childCount:0};s=new $f(o,s,a),n=Ie(n),o=ae(n)}return s}function Bi(t){return t.node.value}function Yv(t,e){t.node.value=e,Bd(t)}function Jv(t){return t.node.childCount>0}function wN(t){return Bi(t)===void 0&&!Jv(t)}function Wa(t,e){yt(t.node.children,(n,s)=>{e(new $f(n,t,s))})}function Xv(t,e,n,s){n&&e(t),Wa(t,o=>{Xv(o,e,!0)})}function EN(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function ko(t){return new Ee(t.parent===null?t.name:ko(t.parent)+"/"+t.name)}function Bd(t){t.parent!==null&&SN(t.parent,t.name,t)}function SN(t,e,n){const s=wN(n),o=xn(t.node.children,e);s&&o?(delete t.node.children[e],t.node.childCount--,Bd(t)):!s&&!o&&(t.node.children[e]=n.node,t.node.childCount++,Bd(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=/[\[\].#$\/\u0000-\u001F\u007F]/,IN=/[\[\].#$\u0000-\u001F\u007F]/,cd=10*1024*1024,Zv=function(t){return typeof t=="string"&&t.length!==0&&!CN.test(t)},ew=function(t){return typeof t=="string"&&t.length!==0&&!IN.test(t)},kN=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ew(t)},tw=function(t,e,n,s){s&&e===void 0||Vf(af(t,"value"),e,n)},Vf=function(t,e,n){const s=n instanceof Ee?new HR(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Or(s));if(typeof e=="function")throw new Error(t+"contains a function "+Or(s)+" with contents = "+e.toString());if(Jy(e))throw new Error(t+"contains "+e.toString()+" "+Or(s));if(typeof e=="string"&&e.length>cd/3&&Oa(e)>cd)throw new Error(t+"contains a string greater than "+cd+" utf8 bytes "+Or(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,a=!1;if(yt(e,(c,f)=>{if(c===".value")o=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!Zv(c)))throw new Error(t+" contains an invalid key ("+c+") "+Or(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);VR(s,c),Vf(t,f,s),GR(s)}),o&&a)throw new Error(t+' contains ".value" child '+Or(s)+" in addition to actual children.")}},nw=function(t,e,n,s){if(!ew(n))throw new Error(af(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},TN=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nw(t,e,n)},Gf=function(t,e){if(ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},RN=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Zv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!kN(n))throw new Error(af(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Kf(t,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],a=o.getPath();n!==null&&!kf(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(o)}n&&t.eventLists_.push(n)}function rw(t,e,n){Kf(t,n),iw(t,s=>kf(s,e))}function ln(t,e,n){Kf(t,n),iw(t,s=>Ht(s,e)||Ht(e,s))}function iw(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const o=t.eventLists_[s];if(o){const a=o.path;e(a)?(NN(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function NN(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Ws&&rt("event: "+n.toString()),Wi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="repo_interrupt",AN=25;class ON{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pa(),this.transactionQueueTree_=new $f,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DN(t,e,n){if(t.stats_=Cf(t.repoInfo_),t.forceRestClient_||mR())t.server_=new ha(t.repoInfo_,(s,o,a,c)=>{y_(t,s,o,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>v_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Be(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new In(t.repoInfo_,e,(s,o,a,c)=>{y_(t,s,o,a,c)},s=>{v_(t,s)},s=>{LN(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=wR(t.repoInfo_,()=>new yP(t.stats_,t.server_)),t.infoData_=new hP,t.infoSyncTree_=new g_({startListening:(s,o,a,c)=>{let f=[];const h=t.infoData_.getNode(s._path);return h.isEmpty()||(f=Co(t.infoSyncTree_,s._path,h),setTimeout(()=>{c("ok")},0)),f},stopListening:()=>{}}),Qf(t,"connected",!1),t.serverSyncTree_=new g_({startListening:(s,o,a,c)=>(t.server_.listen(s,a,o,(f,h)=>{const m=c(f,h);ln(t.eventQueue_,s._path,m)}),[]),stopListening:(s,o)=>{t.server_.unlisten(s,o)}})}function sw(t){const n=t.infoData_.getNode(new Ee(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function qf(t){return gN({timestamp:sw(t)})}function y_(t,e,n,s,o){t.dataUpdateCount++;const a=new Ee(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(o)if(s){const h=na(n,m=>Qe(m));c=cN(t.serverSyncTree_,a,h,o)}else{const h=Qe(n);c=Vv(t.serverSyncTree_,a,h,o)}else if(s){const h=na(n,m=>Qe(m));c=lN(t.serverSyncTree_,a,h)}else{const h=Qe(n);c=Co(t.serverSyncTree_,a,h)}let f=a;c.length>0&&(f=$a(t,a)),ln(t.eventQueue_,f,c)}function v_(t,e){Qf(t,"connected",e),e===!1&&FN(t)}function LN(t,e){yt(e,(n,s)=>{Qf(t,n,s)})}function Qf(t,e,n){const s=new Ee("/.info/"+e),o=Qe(n);t.infoData_.updateSnapshot(s,o);const a=Co(t.infoSyncTree_,s,o);ln(t.eventQueue_,s,a)}function ow(t){return t.nextWriteId_++}function bN(t,e,n){const s=dN(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(o=>{const a=Qe(o).withIndex(e._queryParams.getIndex());Wd(t.serverSyncTree_,e,n,!0);let c;if(e._queryParams.loadsAllData())c=Co(t.serverSyncTree_,e._path,a);else{const f=so(t.serverSyncTree_,e);c=Vv(t.serverSyncTree_,e._path,a,f)}return ln(t.eventQueue_,e._path,c),Sa(t.serverSyncTree_,e,n,null,!0),a},o=>(Ba(t,"get for query "+Be(e)+" failed: "+o),Promise.reject(new Error(o))))}function MN(t,e,n,s,o){Ba(t,"set",{path:e.toString(),value:n,priority:s});const a=qf(t),c=Qe(n,s),f=Mf(t.serverSyncTree_,e),h=Qv(c,f,a),m=ow(t),_=Hv(t.serverSyncTree_,e,h,m,!0);Kf(t.eventQueue_,_),t.server_.put(e.toString(),c.val(!0),(v,C)=>{const I=v==="ok";I||_t("set at "+e+" failed: "+v);const A=Mr(t.serverSyncTree_,m,!I);ln(t.eventQueue_,e,A),WN(t,o,v,C)});const y=dw(t,e);$a(t,y),ln(t.eventQueue_,y,[])}function FN(t){Ba(t,"onDisconnectEvents");const e=qf(t),n=pa();Md(t.onDisconnect_,_e(),(o,a)=>{const c=vN(o,a,t.serverSyncTree_,e);Pv(n,o,c)});let s=[];Md(n,_e(),(o,a)=>{s=s.concat(Co(t.serverSyncTree_,o,a));const c=dw(t,o);$a(t,c)}),t.onDisconnect_=pa(),ln(t.eventQueue_,_e(),s)}function UN(t,e,n){let s;ae(e._path)===".info"?s=Wd(t.infoSyncTree_,e,n):s=Wd(t.serverSyncTree_,e,n),rw(t.eventQueue_,e._path,s)}function zN(t,e,n){let s;ae(e._path)===".info"?s=Sa(t.infoSyncTree_,e,n):s=Sa(t.serverSyncTree_,e,n),rw(t.eventQueue_,e._path,s)}function jN(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xN)}function Ba(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),rt(n,...e)}function WN(t,e,n,s){e&&Wi(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let a=o;s&&(a+=": "+s);const c=new Error(a);c.code=o,e(c)}})}function lw(t,e,n){return Mf(t.serverSyncTree_,e,n)||ne.EMPTY_NODE}function Yf(t,e=t.transactionQueueTree_){if(e||Ha(t,e),Bi(e)){const n=uw(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&BN(t,ko(e),n)}else Jv(e)&&Wa(e,n=>{Yf(t,n)})}function BN(t,e,n){const s=n.map(m=>m.currentWriteId),o=lw(t,e,s);let a=o;const c=o.hash();for(let m=0;m<n.length;m++){const _=n[m];z(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const y=lt(e,_.path);a=a.updateChild(y,_.currentOutputSnapshotRaw)}const f=a.val(!0),h=e;t.server_.put(h.toString(),f,m=>{Ba(t,"transaction put response",{path:h.toString(),status:m});let _=[];if(m==="ok"){const y=[];for(let v=0;v<n.length;v++)n[v].status=2,_=_.concat(Mr(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&y.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();Ha(t,Hf(t.transactionQueueTree_,e)),Yf(t,t.transactionQueueTree_),ln(t.eventQueue_,e,_);for(let v=0;v<y.length;v++)Wi(y[v])}else{if(m==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{_t("transaction at "+h.toString()+" failed: "+m);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=m}$a(t,e)}},c)}function $a(t,e){const n=aw(t,e),s=ko(n),o=uw(t,n);return $N(t,o,s),s}function $N(t,e,n){if(e.length===0)return;const s=[];let o=[];const c=e.filter(f=>f.status===0).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const h=e[f],m=lt(n,h.path);let _=!1,y;if(z(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===4)_=!0,y=h.abortReason,o=o.concat(Mr(t.serverSyncTree_,h.currentWriteId,!0));else if(h.status===0)if(h.retryCount>=AN)_=!0,y="maxretry",o=o.concat(Mr(t.serverSyncTree_,h.currentWriteId,!0));else{const v=lw(t,h.path,c);h.currentInputSnapshot=v;const C=e[f].update(v.val());if(C!==void 0){Vf("transaction failed: Data returned ",C,h.path);let I=Qe(C);typeof C=="object"&&C!=null&&xn(C,".priority")||(I=I.updatePriority(v.getPriority()));const x=h.currentWriteId,O=qf(t),W=Qv(I,v,O);h.currentOutputSnapshotRaw=I,h.currentOutputSnapshotResolved=W,h.currentWriteId=ow(t),c.splice(c.indexOf(x),1),o=o.concat(Hv(t.serverSyncTree_,h.path,W,h.currentWriteId,h.applyLocally)),o=o.concat(Mr(t.serverSyncTree_,x,!0))}else _=!0,y="nodata",o=o.concat(Mr(t.serverSyncTree_,h.currentWriteId,!0))}ln(t.eventQueue_,n,o),o=[],_&&(e[f].status=2,function(v){setTimeout(v,Math.floor(0))}(e[f].unwatcher),e[f].onComplete&&(y==="nodata"?s.push(()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot)):s.push(()=>e[f].onComplete(new Error(y),!1,null))))}Ha(t,t.transactionQueueTree_);for(let f=0;f<s.length;f++)Wi(s[f]);Yf(t,t.transactionQueueTree_)}function aw(t,e){let n,s=t.transactionQueueTree_;for(n=ae(e);n!==null&&Bi(s)===void 0;)s=Hf(s,n),e=Ie(e),n=ae(e);return s}function uw(t,e){const n=[];return cw(t,e,n),n.sort((s,o)=>s.order-o.order),n}function cw(t,e,n){const s=Bi(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);Wa(e,o=>{cw(t,o,n)})}function Ha(t,e){const n=Bi(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,Yv(e,n.length>0?n:void 0)}Wa(e,s=>{Ha(t,s)})}function dw(t,e){const n=ko(aw(t,e)),s=Hf(t.transactionQueueTree_,e);return EN(s,o=>{dd(t,o)}),dd(t,s),Xv(s,o=>{dd(t,o)}),n}function dd(t,e){const n=Bi(e);if(n){const s=[];let o=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(z(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(z(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),o=o.concat(Mr(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&s.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?Yv(e,void 0):n.length=a+1,ln(t.eventQueue_,ko(e),o);for(let c=0;c<s.length;c++)Wi(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function VN(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):_t(`Invalid query segment '${n}' in query '${t}'`)}return e}const w_=function(t,e){const n=GN(t),s=n.namespace;n.domain==="firebase.com"&&Pn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Pn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||oR();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new uv(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new Ee(n.pathString)}},GN=function(t){let e="",n="",s="",o="",a="",c=!0,f="https",h=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(f=t.substring(0,m-1),t=t.substring(m+2));let _=t.indexOf("/");_===-1&&(_=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(_,y)),_<y&&(o=HN(t.substring(_,y)));const v=VN(t.substring(Math.min(t.length,y)));m=e.indexOf(":"),m>=0?(c=f==="https"||f==="wss",h=parseInt(e.substring(m+1),10)):m=e.length;const C=e.slice(0,m);if(C.toLowerCase()==="localhost")n="localhost";else if(C.split(".").length<=2)n=C;else{const I=e.indexOf(".");s=e.substring(0,I).toLowerCase(),n=e.substring(I+1),a=s}"ns"in v&&(a=v.ns)}return{host:e,port:h,domain:n,subdomain:s,secure:c,scheme:f,pathString:o,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KN=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let o;const a=new Array(8);for(o=7;o>=0;o--)a[o]=E_.charAt(n%64),n=Math.floor(n/64);z(n===0,"Cannot push at time == 0");let c=a.join("");if(s){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)c+=E_.charAt(e[o]);return z(c.length===20,"nextPushId: Length should be 20."),c}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Be(this.snapshot.exportVal())}}class QN{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return de(this._path)?null:yv(this._path)}get ref(){return new An(this._repo,this._path)}get _queryIdentifier(){const e=s_(this._queryParams),n=Ef(e);return n==="{}"?"default":n}get _queryObject(){return s_(this._queryParams)}isEqual(e){if(e=it(e),!(e instanceof Jf))return!1;const n=this._repo===e._repo,s=kf(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+$R(this._path)}}class An extends Jf{constructor(e,n){super(e,n,new Nf,!1)}get parent(){const e=wv(this._path);return e===null?null:new An(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class oo{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Ee(e),s=lo(this.ref,e);return new oo(this._node.getChild(n),s,Me)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new oo(o,lo(this.ref,s),Me)))}hasChild(e){const n=new Ee(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function lr(t,e){return t=it(t),t._checkNotDeleted("ref"),e!==void 0?lo(t._root,e):t._root}function lo(t,e){return t=it(t),ae(t._path)===null?TN("child","path",e):nw("child","path",e),new An(t._repo,$e(t._path,e))}function YN(t,e){t=it(t),Gf("push",t._path),tw("push",e,t._path,!0);const n=sw(t._repo),s=KN(n),o=lo(t,s),a=lo(t,s);let c;return e!=null?c=Va(a,e).then(()=>a):c=Promise.resolve(a),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}function hw(t){return Gf("remove",t._path),Va(t,null)}function Va(t,e){t=it(t),Gf("set",t._path),tw("set",e,t._path,!1);const n=new Aa;return MN(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function S_(t){t=it(t);const e=new fw(()=>{}),n=new Ga(e);return bN(t._repo,t,n).then(s=>new oo(s,new An(t._repo,t._path),t._queryParams.getIndex()))}class Ga{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new qN("value",this,new oo(e.snapshotNode,new An(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new QN(this,e,n):null}matches(e){return e instanceof Ga?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function JN(t,e,n,s,o){const a=new fw(n,void 0),c=new Ga(a);return UN(t._repo,t,c),()=>zN(t._repo,t,c)}function XN(t,e,n,s){return JN(t,"value",e)}ZP(An);iN(An);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="FIREBASE_DATABASE_EMULATOR_HOST",$d={};let e1=!1;function t1(t,e,n,s){t.repoInfo_=new uv(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),s&&(t.authTokenProvider_=s)}function n1(t,e,n,s,o){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||Pn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=w_(a,o),f=c.repoInfo,h;typeof process<"u"&&Wg&&(h=Wg[ZN]),h?(a=`http://${h}?ns=${f.namespace}`,c=w_(a,o),f=c.repoInfo):c.repoInfo.secure;const m=new _R(t.name,t.options,e);RN("Invalid Firebase Database URL",c),de(c.path)||Pn("Database URL must point to the root of a Firebase Database (not including a child path).");const _=i1(f,t,m,new gR(t,n));return new s1(_,t)}function r1(t,e){const n=$d[e];(!n||n[t.key]!==t)&&Pn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),jN(t),delete n[t.key]}function i1(t,e,n,s){let o=$d[e.name];o||(o={},$d[e.name]=o);let a=o[t.toURLString()];return a&&Pn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new ON(t,e1,n,s),o[t.toURLString()]=a,a}class s1{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new An(this._repo,_e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(r1(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Pn("Cannot call "+e+" on a deleted database.")}}function Jl(t=cy(),e){const n=df(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=fI("database");s&&o1(n,...s)}return n}function o1(t,e,n,s={}){t=it(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Pn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let a;if(o.repoInfo_.nodeAdmin)s.mockUserToken&&Pn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Yl(Yl.OWNER);else if(s.mockUserToken){const c=typeof s.mockUserToken=="string"?s.mockUserToken:hI(s.mockUserToken,t.app.options.projectId);a=new Yl(c)}t1(o,e,n,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t){eR(Ui),Pi(new Fr("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return n1(s,o,a,n)},"PUBLIC").setMultipleInstances(!0)),ir(Bg,$g,t),ir(Bg,$g,"esm2017")}In.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};In.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};l1();const a1={apiKey:"AIzaSyBh8TVSo9aV1t6qdcxSF4O_6robg2mapRM",authDomain:"diri-react-1.firebaseapp.com",databaseURL:"https://diri-react-1-default-rtdb.europe-west1.firebasedatabase.app",projectId:"diri-react-1",storageBucket:"diri-react-1.firebasestorage.app",messagingSenderId:"623101212387",appId:"1:623101212387:web:f8a6a089193baea96277d6",measurementId:"G-MPXY4KEM80"},Gs=uy(a1),To=Jl(Gs);class Xf{async getUserRoles(e){const n=Jl(Gs),s=lr(n,`users/${e}/roles`),o=await S_(s);if(o.exists()){const a=o.val(),c=[];return a.admin===!0&&c.push(_n.ADMIN),c.length===0&&c.push(_n.USER),c}return[_n.USER]}async setUserRoles(e,n){const s=Jl(Gs),o=lr(s,`users/${e}/roles`),a={email:n.email,admin:n.roles.includes(_n.ADMIN)};return await Va(o,a),n.roles}async GetAllUsers(){const e=Jl(Gs),n=lr(e,"users"),s=await S_(n);if(s.exists()){const o=s.val();return o?Object.entries(o).map(([c,f])=>({id:c,...f})):[]}return[]}}const Ms=Y0(Gs);class u1{constructor(){yi(this,"databaseService");this.databaseService=new Xf}signIn(e,n){return bT(Ms,e,n)}signUp(e,n){return LT(Ms,e,n)}signOut(){return zT(Ms)}onAuthStateChanged(e){return UT(Ms,e)}getCurrentUser(){return Ms.currentUser}async getUserRoles(e){return e.email==="obrador.francesc@gmail.com"?[_n.ADMIN]:this.databaseService.getUserRoles(e.uid)}}const ao=new u1,Ka=N.createContext({user:null,roles:null}),c1=({children:t})=>{const[e,n]=N.useState(null),[s,o]=N.useState(null);return N.useEffect(()=>ao.onAuthStateChanged(async c=>{if(n(c),c)try{const f=await ao.getUserRoles(c);o(f)}catch(f){console.error("Error al obtener los roles:",f),o(null)}else o(null)}),[]),j.jsx(Ka.Provider,{value:{user:e,roles:s},children:t})},d1=()=>{const{user:t,roles:e}=N.useContext(Ka),n=ho(),s=async()=>{try{await ao.signOut(),n("/login")}catch(o){console.error("Error al cerrar sesin:",o)}};return j.jsx("nav",{className:"navbar",children:j.jsxs("ul",{className:"nav-menu",children:[j.jsx("li",{children:j.jsx(Lr,{to:"/",children:"Home"})}),t&&j.jsx("li",{children:j.jsx(Lr,{to:"/dashboard",children:"Dashboard"})}),t&&e&&e.includes(_n.ADMIN)&&j.jsx("li",{children:j.jsx(Lr,{to:"/admin",children:"Admin"})}),!t&&j.jsx("li",{children:j.jsx(Lr,{to:"/login",children:"Login"})}),!t&&j.jsx("li",{children:j.jsx(Lr,{to:"/register",children:"Registro"})}),t&&j.jsx("li",{children:j.jsx("button",{onClick:s,children:"Logout"})})]})})},f1="modulepreload",h1=function(t){return"https://francescobrador.github.io/tienda-comida-redux-auth/"+t},C_={},p1=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));o=Promise.allSettled(n.map(h=>{if(h=h1(h),h in C_)return;C_[h]=!0;const m=h.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":f1,m||(y.as="script"),y.crossOrigin="",y.href=h,f&&y.setAttribute("nonce",f),document.head.appendChild(y),m)return new Promise((v,C)=>{y.addEventListener("load",v),y.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};class m1{constructor(){yi(this,"levels");yi(this,"currentLevel");this.levels=["debug","info","warn","error"],this.currentLevel="debug"}setLevel(e){this.levels.includes(e)?this.currentLevel=e:console.error(`Nivel de log no vlido: ${e}`)}log(e,n){const s=this.levels.indexOf(e),o=this.levels.indexOf(this.currentLevel);if(s>=o){const a=new Date().toISOString();console[e](`[${e.toUpperCase()}] ${a}: ${n}`)}}debug(e){this.log("debug",e)}info(e){this.log("info",e)}warn(e){this.log("warn",e)}error(e){this.log("error",e)}}const Ti=new m1;class g1 extends Yd.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){Ti.warn("Error capturado por ErrorBoundary: "+e.message),Ti.debug("Detalles del error: "+n.componentStack)}render(){return this.state.hasError?this.props.fallback:this.props.children}}var fd={exports:{}},hd={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_;function _1(){if(I_)return hd;I_=1;var t=Pa();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var n=typeof Object.is=="function"?Object.is:e,s=t.useSyncExternalStore,o=t.useRef,a=t.useEffect,c=t.useMemo,f=t.useDebugValue;return hd.useSyncExternalStoreWithSelector=function(h,m,_,y,v){var C=o(null);if(C.current===null){var I={hasValue:!1,value:null};C.current=I}else I=C.current;C=c(function(){function x(Y){if(!O){if(O=!0,W=Y,Y=y(Y),v!==void 0&&I.hasValue){var J=I.value;if(v(J,Y))return L=J}return L=Y}if(J=L,n(W,Y))return J;var se=y(Y);return v!==void 0&&v(J,se)?(W=Y,J):(W=Y,L=se)}var O=!1,W,L,B=_===void 0?null:_;return[function(){return x(m())},B===null?void 0:function(){return x(B())}]},[m,_,y,v]);var A=s(h,C[0],C[1]);return a(function(){I.hasValue=!0,I.value=A},[A]),f(A),A},hd}var k_;function y1(){return k_||(k_=1,fd.exports=_1()),fd.exports}var v1=y1();function w1(t){t()}function E1(){let t=null,e=null;return{clear(){t=null,e=null},notify(){w1(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const o=e={callback:n,next:null,prev:e};return o.prev?o.prev.next=o:t=o,function(){!s||t===null||(s=!1,o.next?o.next.prev=o.prev:e=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}var T_={notify(){},get:()=>[]};function S1(t,e){let n,s=T_,o=0,a=!1;function c(A){_();const x=s.subscribe(A);let O=!1;return()=>{O||(O=!0,x(),y())}}function f(){s.notify()}function h(){I.onStateChange&&I.onStateChange()}function m(){return a}function _(){o++,n||(n=t.subscribe(h),s=E1())}function y(){o--,n&&o===0&&(n(),n=void 0,s.clear(),s=T_)}function v(){a||(a=!0,_())}function C(){a&&(a=!1,y())}const I={addNestedSub:c,notifyNestedSubs:f,handleChangeWrapper:h,isSubscribed:m,trySubscribe:v,tryUnsubscribe:C,getListeners:()=>s};return I}var C1=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I1=C1(),k1=()=>typeof navigator<"u"&&navigator.product==="ReactNative",T1=k1(),R1=()=>I1||T1?N.useLayoutEffect:N.useEffect,P1=R1(),pd=Symbol.for("react-redux-context"),md=typeof globalThis<"u"?globalThis:{};function N1(){if(!N.createContext)return{};const t=md[pd]??(md[pd]=new Map);let e=t.get(N.createContext);return e||(e=N.createContext(null),t.set(N.createContext,e)),e}var fr=N1();function x1(t){const{children:e,context:n,serverState:s,store:o}=t,a=N.useMemo(()=>{const h=S1(o);return{store:o,subscription:h,getServerState:s?()=>s:void 0}},[o,s]),c=N.useMemo(()=>o.getState(),[o]);P1(()=>{const{subscription:h}=a;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==o.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[a,c]);const f=n||fr;return N.createElement(f.Provider,{value:a},e)}var A1=x1;function Zf(t=fr){return function(){return N.useContext(t)}}var pw=Zf();function mw(t=fr){const e=t===fr?pw:Zf(t),n=()=>{const{store:s}=e();return s};return Object.assign(n,{withTypes:()=>n}),n}var O1=mw();function D1(t=fr){const e=t===fr?O1:mw(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var L1=D1(),b1=(t,e)=>t===e;function M1(t=fr){const e=t===fr?pw:Zf(t),n=(s,o={})=>{const{equalityFn:a=b1}=typeof o=="function"?{equalityFn:o}:o,c=e(),{store:f,subscription:h,getServerState:m}=c;N.useRef(!0);const _=N.useCallback({[s.name](v){return s(v)}}[s.name],[s]),y=v1.useSyncExternalStoreWithSelector(h.addNestedSub,f.getState,m||f.getState,_,a);return N.useDebugValue(y),y};return Object.assign(n,{withTypes:()=>n}),n}var F1=M1();function Xe(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var U1=typeof Symbol=="function"&&Symbol.observable||"@@observable",R_=U1,gd=()=>Math.random().toString(36).substring(7).split("").join("."),z1={INIT:`@@redux/INIT${gd()}`,REPLACE:`@@redux/REPLACE${gd()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gd()}`},Ca=z1;function eh(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function gw(t,e,n){if(typeof t!="function")throw new Error(Xe(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Xe(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Xe(1));return n(gw)(t,e)}let s=t,o=e,a=new Map,c=a,f=0,h=!1;function m(){c===a&&(c=new Map,a.forEach((x,O)=>{c.set(O,x)}))}function _(){if(h)throw new Error(Xe(3));return o}function y(x){if(typeof x!="function")throw new Error(Xe(4));if(h)throw new Error(Xe(5));let O=!0;m();const W=f++;return c.set(W,x),function(){if(O){if(h)throw new Error(Xe(6));O=!1,m(),c.delete(W),a=null}}}function v(x){if(!eh(x))throw new Error(Xe(7));if(typeof x.type>"u")throw new Error(Xe(8));if(typeof x.type!="string")throw new Error(Xe(17));if(h)throw new Error(Xe(9));try{h=!0,o=s(o,x)}finally{h=!1}return(a=c).forEach(W=>{W()}),x}function C(x){if(typeof x!="function")throw new Error(Xe(10));s=x,v({type:Ca.REPLACE})}function I(){const x=y;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Xe(11));function W(){const B=O;B.next&&B.next(_())}return W(),{unsubscribe:x(W)}},[R_](){return this}}}return v({type:Ca.INIT}),{dispatch:v,subscribe:y,getState:_,replaceReducer:C,[R_]:I}}function j1(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Ca.INIT})>"u")throw new Error(Xe(12));if(typeof n(void 0,{type:Ca.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xe(13))})}function W1(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const c=e[a];typeof t[c]=="function"&&(n[c]=t[c])}const s=Object.keys(n);let o;try{j1(n)}catch(a){o=a}return function(c={},f){if(o)throw o;let h=!1;const m={};for(let _=0;_<s.length;_++){const y=s[_],v=n[y],C=c[y],I=v(C,f);if(typeof I>"u")throw f&&f.type,new Error(Xe(14));m[y]=I,h=h||I!==C}return h=h||s.length!==Object.keys(c).length,h?m:c}}function Ia(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...s)=>e(n(...s)))}function B1(...t){return e=>(n,s)=>{const o=e(n,s);let a=()=>{throw new Error(Xe(15))};const c={getState:o.getState,dispatch:(h,...m)=>a(h,...m)},f=t.map(h=>h(c));return a=Ia(...f)(o.dispatch),{...o,dispatch:a}}}function $1(t){return eh(t)&&"type"in t&&typeof t.type=="string"}var _w=Symbol.for("immer-nothing"),P_=Symbol.for("immer-draftable"),kt=Symbol.for("immer-state");function $t(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Oi=Object.getPrototypeOf;function $r(t){return!!t&&!!t[kt]}function Nn(t){var e;return t?yw(t)||Array.isArray(t)||!!t[P_]||!!((e=t.constructor)!=null&&e[P_])||Qa(t)||Ya(t):!1}var H1=Object.prototype.constructor.toString();function yw(t){if(!t||typeof t!="object")return!1;const e=Oi(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===H1}function ka(t,e){qa(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function qa(t){const e=t[kt];return e?e.type_:Array.isArray(t)?1:Qa(t)?2:Ya(t)?3:0}function Hd(t,e){return qa(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function vw(t,e,n){const s=qa(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function V1(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Qa(t){return t instanceof Map}function Ya(t){return t instanceof Set}function Dr(t){return t.copy_||t.base_}function Vd(t,e){if(Qa(t))return new Map(t);if(Ya(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=yw(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[kt];let o=Reflect.ownKeys(s);for(let a=0;a<o.length;a++){const c=o[a],f=s[c];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(s[c]={configurable:!0,writable:!0,enumerable:f.enumerable,value:t[c]})}return Object.create(Oi(t),s)}else{const s=Oi(t);if(s!==null&&n)return{...t};const o=Object.create(s);return Object.assign(o,t)}}function th(t,e=!1){return Ja(t)||$r(t)||!Nn(t)||(qa(t)>1&&(t.set=t.add=t.clear=t.delete=G1),Object.freeze(t),e&&Object.entries(t).forEach(([n,s])=>th(s,!0))),t}function G1(){$t(2)}function Ja(t){return Object.isFrozen(t)}var K1={};function Hr(t){const e=K1[t];return e||$t(0,t),e}var uo;function ww(){return uo}function q1(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function N_(t,e){e&&(Hr("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Gd(t){Kd(t),t.drafts_.forEach(Q1),t.drafts_=null}function Kd(t){t===uo&&(uo=t.parent_)}function x_(t){return uo=q1(uo,t)}function Q1(t){const e=t[kt];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function A_(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[kt].modified_&&(Gd(e),$t(4)),Nn(t)&&(t=Ta(e,t),e.parent_||Ra(e,t)),e.patches_&&Hr("Patches").generateReplacementPatches_(n[kt].base_,t,e.patches_,e.inversePatches_)):t=Ta(e,n,[]),Gd(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==_w?t:void 0}function Ta(t,e,n){if(Ja(e))return e;const s=e[kt];if(!s)return ka(e,(o,a)=>O_(t,s,e,o,a,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return Ra(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const o=s.copy_;let a=o,c=!1;s.type_===3&&(a=new Set(o),o.clear(),c=!0),ka(a,(f,h)=>O_(t,s,o,f,h,n,c)),Ra(t,o,!1),n&&t.patches_&&Hr("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function O_(t,e,n,s,o,a,c){if($r(o)){const f=a&&e&&e.type_!==3&&!Hd(e.assigned_,s)?a.concat(s):void 0,h=Ta(t,o,f);if(vw(n,s,h),$r(h))t.canAutoFreeze_=!1;else return}else c&&n.add(o);if(Nn(o)&&!Ja(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ta(t,o),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&Ra(t,o)}}function Ra(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&th(e,n)}function Y1(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:ww(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=s,a=nh;n&&(o=[s],a=co);const{revoke:c,proxy:f}=Proxy.revocable(o,a);return s.draft_=f,s.revoke_=c,f}var nh={get(t,e){if(e===kt)return t;const n=Dr(t);if(!Hd(n,e))return J1(t,n,e);const s=n[e];return t.finalized_||!Nn(s)?s:s===_d(t.base_,e)?(yd(t),t.copy_[e]=Qd(s,t)):s},has(t,e){return e in Dr(t)},ownKeys(t){return Reflect.ownKeys(Dr(t))},set(t,e,n){const s=Ew(Dr(t),e);if(s!=null&&s.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const o=_d(Dr(t),e),a=o==null?void 0:o[kt];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(V1(n,o)&&(n!==void 0||Hd(t.base_,e)))return!0;yd(t),qd(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return _d(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,yd(t),qd(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Dr(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){$t(11)},getPrototypeOf(t){return Oi(t.base_)},setPrototypeOf(){$t(12)}},co={};ka(nh,(t,e)=>{co[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});co.deleteProperty=function(t,e){return co.set.call(this,t,e,void 0)};co.set=function(t,e,n){return nh.set.call(this,t[0],e,n,t[0])};function _d(t,e){const n=t[kt];return(n?Dr(n):t)[e]}function J1(t,e,n){var o;const s=Ew(e,n);return s?"value"in s?s.value:(o=s.get)==null?void 0:o.call(t.draft_):void 0}function Ew(t,e){if(!(e in t))return;let n=Oi(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=Oi(n)}}function qd(t){t.modified_||(t.modified_=!0,t.parent_&&qd(t.parent_))}function yd(t){t.copy_||(t.copy_=Vd(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var X1=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const c=this;return function(h=a,...m){return c.produce(h,_=>n.call(this,_,...m))}}typeof n!="function"&&$t(6),s!==void 0&&typeof s!="function"&&$t(7);let o;if(Nn(e)){const a=x_(this),c=Qd(e,void 0);let f=!0;try{o=n(c),f=!1}finally{f?Gd(a):Kd(a)}return N_(a,s),A_(o,a)}else if(!e||typeof e!="object"){if(o=n(e),o===void 0&&(o=e),o===_w&&(o=void 0),this.autoFreeze_&&th(o,!0),s){const a=[],c=[];Hr("Patches").generateReplacementPatches_(e,o,a,c),s(a,c)}return o}else $t(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(c,...f)=>this.produceWithPatches(c,h=>e(h,...f));let s,o;return[this.produce(e,n,(c,f)=>{s=c,o=f}),s,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Nn(t)||$t(8),$r(t)&&(t=Z1(t));const e=x_(this),n=Qd(t,void 0);return n[kt].isManual_=!0,Kd(e),n}finishDraft(t,e){const n=t&&t[kt];(!n||!n.isManual_)&&$t(9);const{scope_:s}=n;return N_(s,e),A_(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const o=e[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(e=e.slice(n+1));const s=Hr("Patches").applyPatches_;return $r(t)?s(t,e):this.produce(t,o=>s(o,e))}};function Qd(t,e){const n=Qa(t)?Hr("MapSet").proxyMap_(t,e):Ya(t)?Hr("MapSet").proxySet_(t,e):Y1(t,e);return(e?e.scope_:ww()).drafts_.push(n),n}function Z1(t){return $r(t)||$t(10,t),Sw(t)}function Sw(t){if(!Nn(t)||Ja(t))return t;const e=t[kt];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Vd(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Vd(t,!0);return ka(n,(s,o)=>{vw(n,s,Sw(o))}),e&&(e.finalized_=!1),n}var Tt=new X1,Cw=Tt.produce;Tt.produceWithPatches.bind(Tt);Tt.setAutoFreeze.bind(Tt);Tt.setUseStrictShallowCopy.bind(Tt);Tt.applyPatches.bind(Tt);Tt.createDraft.bind(Tt);Tt.finishDraft.bind(Tt);function Iw(t){return({dispatch:n,getState:s})=>o=>a=>typeof a=="function"?a(n,s,t):o(a)}var ex=Iw(),tx=Iw,nx=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ia:Ia.apply(null,arguments)},rx=t=>t&&typeof t.match=="function";function Ks(t,e){function n(...s){if(e){let o=e(...s);if(!o)throw new Error(kn(0));return{type:t,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>$1(s)&&s.type===t,n}var kw=class zs extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,zs.prototype)}static get[Symbol.species](){return zs}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new zs(...e[0].concat(this)):new zs(...e.concat(this))}};function D_(t){return Nn(t)?Cw(t,()=>{}):t}function L_(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function ix(t){return typeof t=="boolean"}var sx=()=>function(e){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=e??{};let c=new kw;return n&&(ix(n)?c.push(ex):c.push(tx(n.extraArgument))),c},ox="RTK_autoBatch",b_=t=>e=>{setTimeout(e,t)},lx=(t={type:"raf"})=>e=>(...n)=>{const s=e(...n);let o=!0,a=!1,c=!1;const f=new Set,h=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:b_(10):t.type==="callback"?t.queueNotification:b_(t.timeout),m=()=>{c=!1,a&&(a=!1,f.forEach(_=>_()))};return Object.assign({},s,{subscribe(_){const y=()=>o&&_(),v=s.subscribe(y);return f.add(_),()=>{v(),f.delete(_)}},dispatch(_){var y;try{return o=!((y=_==null?void 0:_.meta)!=null&&y[ox]),a=!o,a&&(c||(c=!0,h(m))),s.dispatch(_)}finally{o=!0}}})},ax=t=>function(n){const{autoBatch:s=!0}=n??{};let o=new kw(t);return s&&o.push(lx(typeof s=="object"?s:void 0)),o};function ux(t){const e=sx(),{reducer:n=void 0,middleware:s,devTools:o=!0,preloadedState:a=void 0,enhancers:c=void 0}=t;let f;if(typeof n=="function")f=n;else if(eh(n))f=W1(n);else throw new Error(kn(1));let h;typeof s=="function"?h=s(e):h=e();let m=Ia;o&&(m=nx({trace:!1,...typeof o=="object"&&o}));const _=B1(...h),y=ax(_);let v=typeof c=="function"?c(y):y();const C=m(...v);return gw(f,a,C)}function Tw(t){const e={},n=[];let s;const o={addCase(a,c){const f=typeof a=="string"?a:a.type;if(!f)throw new Error(kn(28));if(f in e)throw new Error(kn(29));return e[f]=c,o},addMatcher(a,c){return n.push({matcher:a,reducer:c}),o},addDefaultCase(a){return s=a,o}};return t(o),[e,n,s]}function cx(t){return typeof t=="function"}function dx(t,e){let[n,s,o]=Tw(e),a;if(cx(t))a=()=>D_(t());else{const f=D_(t);a=()=>f}function c(f=a(),h){let m=[n[h.type],...s.filter(({matcher:_})=>_(h)).map(({reducer:_})=>_)];return m.filter(_=>!!_).length===0&&(m=[o]),m.reduce((_,y)=>{if(y)if($r(_)){const C=y(_,h);return C===void 0?_:C}else{if(Nn(_))return Cw(_,v=>y(v,h));{const v=y(_,h);if(v===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return _},f)}return c.getInitialState=a,c}var fx=(t,e)=>rx(t)?t.match(e):t(e);function hx(...t){return e=>t.some(n=>fx(n,e))}var px="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",mx=(t=21)=>{let e="",n=t;for(;n--;)e+=px[Math.random()*64|0];return e},gx=["name","message","stack","code"],vd=class{constructor(t,e){yi(this,"_type");this.payload=t,this.meta=e}},M_=class{constructor(t,e){yi(this,"_type");this.payload=t,this.meta=e}},_x=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of gx)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},Ro=(()=>{function t(e,n,s){const o=Ks(e+"/fulfilled",(h,m,_,y)=>({payload:h,meta:{...y||{},arg:_,requestId:m,requestStatus:"fulfilled"}})),a=Ks(e+"/pending",(h,m,_)=>({payload:void 0,meta:{..._||{},arg:m,requestId:h,requestStatus:"pending"}})),c=Ks(e+"/rejected",(h,m,_,y,v)=>({payload:y,error:(s&&s.serializeError||_x)(h||"Rejected"),meta:{...v||{},arg:_,requestId:m,rejectedWithValue:!!y,requestStatus:"rejected",aborted:(h==null?void 0:h.name)==="AbortError",condition:(h==null?void 0:h.name)==="ConditionError"}}));function f(h){return(m,_,y)=>{const v=s!=null&&s.idGenerator?s.idGenerator(h):mx(),C=new AbortController;let I,A;function x(W){A=W,C.abort()}const O=async function(){var B,Y;let W;try{let J=(B=s==null?void 0:s.condition)==null?void 0:B.call(s,h,{getState:_,extra:y});if(vx(J)&&(J=await J),J===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const se=new Promise((ee,fe)=>{I=()=>{fe({name:"AbortError",message:A||"Aborted"})},C.signal.addEventListener("abort",I)});m(a(v,h,(Y=s==null?void 0:s.getPendingMeta)==null?void 0:Y.call(s,{requestId:v,arg:h},{getState:_,extra:y}))),W=await Promise.race([se,Promise.resolve(n(h,{dispatch:m,getState:_,extra:y,requestId:v,signal:C.signal,abort:x,rejectWithValue:(ee,fe)=>new vd(ee,fe),fulfillWithValue:(ee,fe)=>new M_(ee,fe)})).then(ee=>{if(ee instanceof vd)throw ee;return ee instanceof M_?o(ee.payload,v,h,ee.meta):o(ee,v,h)})])}catch(J){W=J instanceof vd?c(null,v,h,J.payload,J.meta):c(J,v,h)}finally{I&&C.signal.removeEventListener("abort",I)}return s&&!s.dispatchConditionRejection&&c.match(W)&&W.meta.condition||m(W),W}();return Object.assign(O,{abort:x,requestId:v,arg:h,unwrap(){return O.then(yx)}})}}return Object.assign(f,{pending:a,rejected:c,fulfilled:o,settled:hx(c,o),typePrefix:e})}return t.withTypes=()=>t,t})();function yx(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function vx(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var wx=Symbol.for("rtk-slice-createasyncthunk");function Ex(t,e){return`${t}/${e}`}function Sx({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[wx];return function(o){const{name:a,reducerPath:c=a}=o;if(!a)throw new Error(kn(11));const f=(typeof o.reducers=="function"?o.reducers(kx()):o.reducers)||{},h=Object.keys(f),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(L,B){const Y=typeof L=="string"?L:L.type;if(!Y)throw new Error(kn(12));if(Y in m.sliceCaseReducersByType)throw new Error(kn(13));return m.sliceCaseReducersByType[Y]=B,_},addMatcher(L,B){return m.sliceMatchers.push({matcher:L,reducer:B}),_},exposeAction(L,B){return m.actionCreators[L]=B,_},exposeCaseReducer(L,B){return m.sliceCaseReducersByName[L]=B,_}};h.forEach(L=>{const B=f[L],Y={reducerName:L,type:Ex(a,L),createNotation:typeof o.reducers=="function"};Rx(B)?Nx(Y,B,_,e):Tx(Y,B,_)});function y(){const[L={},B=[],Y=void 0]=typeof o.extraReducers=="function"?Tw(o.extraReducers):[o.extraReducers],J={...L,...m.sliceCaseReducersByType};return dx(o.initialState,se=>{for(let ee in J)se.addCase(ee,J[ee]);for(let ee of m.sliceMatchers)se.addMatcher(ee.matcher,ee.reducer);for(let ee of B)se.addMatcher(ee.matcher,ee.reducer);Y&&se.addDefaultCase(Y)})}const v=L=>L,C=new Map;let I;function A(L,B){return I||(I=y()),I(L,B)}function x(){return I||(I=y()),I.getInitialState()}function O(L,B=!1){function Y(se){let ee=se[L];return typeof ee>"u"&&B&&(ee=x()),ee}function J(se=v){const ee=L_(C,B,()=>new WeakMap);return L_(ee,se,()=>{const fe={};for(const[De,Rt]of Object.entries(o.selectors??{}))fe[De]=Cx(Rt,se,x,B);return fe})}return{reducerPath:L,getSelectors:J,get selectors(){return J(Y)},selectSlice:Y}}const W={name:a,reducer:A,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:x,...O(c),injectInto(L,{reducerPath:B,...Y}={}){const J=B??c;return L.inject({reducerPath:J,reducer:A},Y),{...W,...O(J,!0)}}};return W}}function Cx(t,e,n,s){function o(a,...c){let f=e(a);return typeof f>"u"&&s&&(f=n()),t(f,...c)}return o.unwrapped=t,o}var Ix=Sx();function kx(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Tx({type:t,reducerName:e,createNotation:n},s,o){let a,c;if("reducer"in s){if(n&&!Px(s))throw new Error(kn(17));a=s.reducer,c=s.prepare}else a=s;o.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,c?Ks(t,c):Ks(t))}function Rx(t){return t._reducerDefinitionType==="asyncThunk"}function Px(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Nx({type:t,reducerName:e},n,s,o){if(!o)throw new Error(kn(18));const{payloadCreator:a,fulfilled:c,pending:f,rejected:h,settled:m,options:_}=n,y=o(t,a,_);s.exposeAction(e,y),c&&s.addCase(y.fulfilled,c),f&&s.addCase(y.pending,f),h&&s.addCase(y.rejected,h),m&&s.addMatcher(y.settled,m),s.exposeCaseReducer(e,{fulfilled:c||$l,pending:f||$l,rejected:h||$l,settled:m||$l})}function $l(){}function kn(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const xx=async t=>{const e=lr(To,"orders");return(await YN(e,t)).key},Ax=async()=>{const t=lr(To,"orders");return new Promise(e=>{XN(t,n=>{const s=n.val();console.log(s);const o=s?Object.entries(s).map(([a,c])=>({id:a,items:[c]})):[];console.log(o),e(o)})})},Ox=async(t,e)=>{const n=lr(To,`orders/${t}`);await Va(n,e)},Dx=async t=>{const e=lr(To,`orders/${t}`);await hw(e)},Lx=async()=>{console.log("holi");const t=lr(To,"orders");await hw(t)},bx={orders:[],status:"idle",error:null},wd=Ro("orders/createOrder",async t=>({id:await xx(t),items:[t]})),Xl=Ro("orders/fetchOrders",async()=>await Ax()),Mx=Ro("orders/updateOrder",async({orderId:t,order:e})=>(await Ox(t,e),{orderId:t,order:e})),Fx=Ro("orders/deleteOrder",async t=>(await Dx(t),t)),Rw=Ro("orders/deleteAllOrders",async()=>(await Lx(),!0)),Ux=Ix({name:"orders",initialState:bx,reducers:{},extraReducers:t=>{t.addCase(wd.pending,e=>{e.status="loading"}).addCase(wd.fulfilled,(e,n)=>{e.status="idle",e.orders.push(n.payload),Ti.info("createOrder fulfilled")}).addCase(wd.rejected,e=>{e.status="failed",e.error="Error al crear el pedido"}).addCase(Xl.pending,e=>{e.status="loading",console.log("fetching")}).addCase(Xl.fulfilled,(e,n)=>{e.status="idle",e.orders=n.payload}).addCase(Xl.rejected,e=>{e.status="failed",e.error="Error al obtener los pedidos"}).addCase(Mx.fulfilled,(e,n)=>{const s=e.orders.findIndex(o=>o.id===n.payload.orderId);s!==-1&&(e.orders[s]=n.payload.order)}).addCase(Fx.fulfilled,(e,n)=>{e.orders=e.orders.filter(s=>s.id!==n.payload)}).addCase(Rw.fulfilled,e=>{e.orders=[]})}}),zx=Ux.reducer,jx=Yd.createContext([]),Wx=Yd.lazy(()=>p1(()=>import("./Foods-B7LjhhqD.js"),[])),Bx=()=>{const[t]=N.useState([{id:1,name:"Hamburguesa de Pollo",quantity:40,desc:"Hamburguesa de pollo frito - ... y mayonesa",price:24,image:"pollo.jpeg"},{id:2,name:"Hamburguesa de vaca",quantity:20,desc:"Hamburguesa de vaca - ... y ketsup",price:24,image:"pollo.jpeg"}]),e=L1(),n=F1(a=>a.order.orders),[s,o]=N.useState(!1);return N.useEffect(()=>{e(Xl())},[e]),j.jsxs(jx.Provider,{value:t,children:[j.jsxs(g1,{fallback:j.jsx("div",{children:"Ha ocurrido un error"}),children:[j.jsxs("div",{className:"App",children:[j.jsx("button",{className:"toggleButton",onClick:()=>{o(!s)},children:s?"Disponibilidad":"Pedir comida"}),j.jsx("h3",{className:"title",children:"Comida Rapida Online"}),!s&&j.jsxs(j.Fragment,{children:[j.jsx("h4",{className:"subTitle",children:"Menus"}),j.jsx("ul",{className:"ulApp",children:t.map(a=>j.jsxs("li",{className:"liApp",children:[j.jsx("p",{children:a.name}),j.jsxs("p",{children:["#",a.quantity]})]},a.id))})]}),s&&j.jsx(N.Suspense,{fallback:j.jsx("div",{children:"Cargando..."}),children:j.jsx(Wx,{foodItems:t})})]}),j.jsx("h2",{children:"Pedidos realizados:"}),j.jsx("ul",{children:n.map(a=>j.jsx("li",{children:j.jsx("ul",{children:a.items.map((c,f)=>j.jsxs(j.Fragment,{children:[j.jsx("li",{children:c.name},f),j.jsxs("li",{children:[c.quantity," * ",c.price]},c.quantity*c.price)]}))})},a.id))})]}),j.jsx("button",{onClick:()=>e(Rw()),children:"Reset Firebase"})]})},$x=({children:t})=>{const{user:e,roles:n}=N.useContext(Ka);return!e||!n||!n.includes(_n.ADMIN)?j.jsx(K_,{to:"/",replace:!0}):j.jsx(j.Fragment,{children:t})},Hx=({children:t})=>{const{user:e}=N.useContext(Ka);return e?t:j.jsx(K_,{to:"/login",replace:!0})},F_=()=>j.jsx("div",{children:"Bienvenido al home"}),Vx=()=>{const[t,e]=N.useState(""),[n,s]=N.useState(""),[o,a]=N.useState(""),c=ho(),f=async h=>{h.preventDefault(),a("");try{const m=await ao.signIn(t,n);console.log("Usuario autenticado:",m.user),c("/dashboard")}catch(m){console.error("Error al iniciar sesin:",m),a(m.message)}};return j.jsxs("form",{onSubmit:f,children:[j.jsx("h2",{children:"Iniciar Sesin"}),j.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:h=>e(h.target.value)}),j.jsx("input",{type:"password",placeholder:"Contrasea",value:n,onChange:h=>s(h.target.value)}),j.jsx("button",{type:"submit",children:"Ingresar"}),o&&j.jsx("p",{className:"error-message",children:o})]})},Gx=()=>{const[t,e]=N.useState(""),[n,s]=N.useState(""),[o,a]=N.useState(""),[c,f]=N.useState(""),h=ho();let m=new Xf;const _=async y=>{y.preventDefault(),a("");try{const v=await ao.signUp(t,n);console.log("Usuario registrado:",v.user),await m.setUserRoles(v.user.uid,{email:v.user.email,roles:[_n.USER]}),f("Registro exitoso. Redirigiendo al Dashboard..."),setTimeout(()=>{h("/dashboard")},2e3)}catch(v){console.error("Error al registrarse:",v),a(v.message)}};return j.jsxs("form",{onSubmit:_,children:[j.jsx("h2",{children:"Registrarse"}),j.jsx("input",{type:"email",placeholder:"Correo electrnico",value:t,onChange:y=>e(y.target.value)}),j.jsx("input",{type:"password",placeholder:"Contrasea",value:n,onChange:y=>s(y.target.value)}),j.jsx("button",{type:"submit",children:"Registrarse"}),o&&j.jsx("p",{className:"error-message",children:o}),c&&j.jsx("p",{className:"success-message",children:c})]})},Kx=new Xf,qx=()=>{const[t,e]=N.useState([]);return N.useEffect(()=>{(async()=>{const s=await Kx.GetAllUsers();e(s)})()},[]),j.jsx(j.Fragment,{children:j.jsx("ul",{children:t.map((n,s)=>j.jsx("li",{children:JSON.stringify(n)},s))})})};function Qx(){return j.jsx(c1,{children:j.jsxs(qC,{children:[j.jsx(d1,{}),j.jsx("div",{className:"main-content",children:j.jsxs(IC,{children:[j.jsx(xr,{path:"/",element:j.jsx(F_,{})}),j.jsx(xr,{path:"/login",element:j.jsx(Vx,{})}),j.jsx(xr,{path:"/register",element:j.jsx(Gx,{})}),j.jsx(xr,{path:"/dashboard",element:j.jsx(Hx,{children:j.jsx(Bx,{})})}),j.jsx(xr,{path:"/admin",element:j.jsx($x,{children:j.jsx(qx,{})})}),j.jsx(xr,{path:"*",element:j.jsx(F_,{})})]})})]})})}const Yx=t=>e=>n=>{Ti.info(" Enviando acccin:"+JSON.stringify(n)),Ti.info(" Estado anterior:"+JSON.stringify(t.getState()));const s=e(n);return Ti.info(" Nuevo estado:"+JSON.stringify(t.getState())),s},Jx=ux({reducer:{order:zx},middleware:t=>t().concat(Yx)}),Xx=()=>j.jsx(A1,{store:Jx,children:j.jsx(Qx,{})});LS.createRoot(document.getElementById("root")).render(j.jsx(N.StrictMode,{children:j.jsx(Xx,{})}));export{wd as c,j,N as r,L1 as u};
